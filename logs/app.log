{"environment":"development","level":"info","message":"--- Logger test from server.js ---","service":"medblock-backend","timestamp":"2025-06-26 18:25:33"}
{"environment":"development","level":"info","message":"✅ MongoDB connected successfully","service":"medblock-backend","timestamp":"2025-06-26 18:25:33"}
{"environment":"development","level":"info","message":"Database connected successfully","service":"medblock-backend","timestamp":"2025-06-26 18:25:33"}
{"environment":"development","level":"info","message":"Server running on port 3000 in development mode","service":"medblock-backend","timestamp":"2025-06-26 18:25:33"}
{"environment":"development","level":"info","message":"Health check available at http://localhost:3000/health","service":"medblock-backend","timestamp":"2025-06-26 18:25:33"}
{"environment":"development","level":"info","message":"API documentation available at http://localhost:3000/api/v1","service":"medblock-backend","timestamp":"2025-06-26 18:25:33"}
{"environment":"development","level":"info","message":"SIGINT received, shutting down gracefully","service":"medblock-backend","timestamp":"2025-06-26 18:25:41"}
{"environment":"development","level":"info","message":"--- Logger test from server.js ---","service":"medblock-backend","timestamp":"2025-06-26 18:25:44"}
{"environment":"development","level":"info","message":"✅ MongoDB connected successfully","service":"medblock-backend","timestamp":"2025-06-26 18:25:44"}
{"environment":"development","level":"info","message":"Database connected successfully","service":"medblock-backend","timestamp":"2025-06-26 18:25:44"}
{"environment":"development","level":"info","message":"Server running on port 3000 in development mode","service":"medblock-backend","timestamp":"2025-06-26 18:25:44"}
{"environment":"development","level":"info","message":"Health check available at http://localhost:3000/health","service":"medblock-backend","timestamp":"2025-06-26 18:25:44"}
{"environment":"development","level":"info","message":"API documentation available at http://localhost:3000/api/v1","service":"medblock-backend","timestamp":"2025-06-26 18:25:44"}
{"environment":"development","ip":"::1","level":"info","message":"GET /api/v1","service":"medblock-backend","timestamp":"2025-06-26 18:31:51","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36"}
{"environment":"development","ip":"::1","level":"info","message":"GET /favicon.ico","service":"medblock-backend","timestamp":"2025-06-26 18:31:51","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36"}
{"environment":"development","ip":"::1","level":"info","message":"GET /api/v1","service":"medblock-backend","timestamp":"2025-06-26 19:38:09","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36"}
{"environment":"development","ip":"::1","level":"info","message":"POST /api/v1/auth/register","service":"medblock-backend","timestamp":"2025-06-26 19:39:29","userAgent":"curl/8.5.0"}
{"environment":"development","ip":"::1","level":"info","message":"POST /api/v1/auth/register","service":"medblock-backend","timestamp":"2025-06-26 19:39:48","userAgent":"curl/8.5.0"}
{"environment":"development","level":"info","message":"--- Logger test from server.js ---","service":"medblock-backend","timestamp":"2025-06-26 19:52:06"}
{"environment":"development","level":"info","message":"✅ MongoDB connected successfully","service":"medblock-backend","timestamp":"2025-06-26 19:52:06"}
{"environment":"development","level":"info","message":"Database connected successfully","service":"medblock-backend","timestamp":"2025-06-26 19:52:06"}
{"environment":"development","level":"info","message":"Server running on port 3000 in development mode","service":"medblock-backend","timestamp":"2025-06-26 19:52:06"}
{"environment":"development","level":"info","message":"Health check available at http://localhost:3000/health","service":"medblock-backend","timestamp":"2025-06-26 19:52:06"}
{"environment":"development","level":"info","message":"API documentation available at http://localhost:3000/api/v1","service":"medblock-backend","timestamp":"2025-06-26 19:52:06"}
{"environment":"development","level":"info","message":"--- Logger test from server.js ---","service":"medblock-backend","timestamp":"2025-06-26 19:52:12"}
{"environment":"development","level":"info","message":"✅ MongoDB connected successfully","service":"medblock-backend","timestamp":"2025-06-26 19:52:12"}
{"environment":"development","level":"info","message":"Database connected successfully","service":"medblock-backend","timestamp":"2025-06-26 19:52:12"}
{"environment":"development","level":"info","message":"Server running on port 3000 in development mode","service":"medblock-backend","timestamp":"2025-06-26 19:52:12"}
{"environment":"development","level":"info","message":"Health check available at http://localhost:3000/health","service":"medblock-backend","timestamp":"2025-06-26 19:52:12"}
{"environment":"development","level":"info","message":"API documentation available at http://localhost:3000/api/v1","service":"medblock-backend","timestamp":"2025-06-26 19:52:12"}
{"environment":"development","level":"info","message":"SIGINT received, shutting down gracefully","service":"medblock-backend","timestamp":"2025-06-26 19:54:09"}
{"environment":"development","level":"info","message":"--- Logger test from server.js ---","service":"medblock-backend","timestamp":"2025-06-26 19:54:12"}
{"environment":"development","level":"info","message":"✅ MongoDB connected successfully","service":"medblock-backend","timestamp":"2025-06-26 19:54:12"}
{"environment":"development","level":"info","message":"Database connected successfully","service":"medblock-backend","timestamp":"2025-06-26 19:54:12"}
{"environment":"development","level":"info","message":"Server running on port 3000 in development mode","service":"medblock-backend","timestamp":"2025-06-26 19:54:12"}
{"environment":"development","level":"info","message":"Health check available at http://localhost:3000/health","service":"medblock-backend","timestamp":"2025-06-26 19:54:12"}
{"environment":"development","level":"info","message":"API documentation available at http://localhost:3000/api/v1","service":"medblock-backend","timestamp":"2025-06-26 19:54:12"}
{"environment":"development","ip":"::1","level":"info","message":"GET /health","service":"medblock-backend","timestamp":"2025-06-26 19:54:24","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36"}
{"environment":"development","level":"info","message":"--- Logger test from server.js ---","service":"medblock-backend","timestamp":"2025-06-26 20:15:38"}
{"environment":"development","level":"info","message":"✅ MongoDB connected successfully","service":"medblock-backend","timestamp":"2025-06-26 20:15:38"}
{"environment":"development","level":"info","message":"Database connected successfully","service":"medblock-backend","timestamp":"2025-06-26 20:15:38"}
{"environment":"development","level":"info","message":"Server running on port 3000 in development mode","service":"medblock-backend","timestamp":"2025-06-26 20:15:38"}
{"environment":"development","level":"info","message":"Health check available at http://localhost:3000/health","service":"medblock-backend","timestamp":"2025-06-26 20:15:38"}
{"environment":"development","level":"info","message":"API documentation available at http://localhost:3000/api/v1","service":"medblock-backend","timestamp":"2025-06-26 20:15:38"}
{"environment":"development","ip":"::1","level":"info","message":"GET /health","service":"medblock-backend","timestamp":"2025-06-26 20:16:07","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36"}
{"environment":"development","ip":"::1","level":"info","message":"GET /health","service":"medblock-backend","timestamp":"2025-06-26 20:16:15","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36"}
{"environment":"development","ip":"::1","level":"info","message":"GET /health","service":"medblock-backend","timestamp":"2025-06-26 20:25:38","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36"}
{"environment":"development","ip":"::1","level":"info","message":"GET /health","service":"medblock-backend","timestamp":"2025-06-26 20:25:41","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36"}
{"environment":"development","ip":"::1","level":"info","message":"POST /api/v1/auth/register","service":"medblock-backend","timestamp":"2025-06-26 20:27:27","userAgent":"curl/8.5.0"}
{"environment":"development","ip":"::1","level":"info","message":"POST /api/v1/auth/register","service":"medblock-backend","timestamp":"2025-06-26 20:28:06","userAgent":"curl/8.5.0"}
{"environment":"development","ip":"::1","level":"info","message":"POST /api/v1/auth/register","service":"medblock-backend","timestamp":"2025-06-26 20:34:47","userAgent":"curl/8.5.0"}
{"_message":"User validation failed","environment":"development","errors":{"address.city":{"kind":"required","message":"Path `address.city` is required.","name":"ValidatorError","path":"address.city","properties":{"message":"Path `address.city` is required.","path":"address.city","type":"required"}},"address.county":{"kind":"required","message":"Path `address.county` is required.","name":"ValidatorError","path":"address.county","properties":{"message":"Path `address.county` is required.","path":"address.county","type":"required"}},"address.street":{"kind":"required","message":"Path `address.street` is required.","name":"ValidatorError","path":"address.street","properties":{"message":"Path `address.street` is required.","path":"address.street","type":"required"}},"address.subCounty":{"kind":"required","message":"Path `address.subCounty` is required.","name":"ValidatorError","path":"address.subCounty","properties":{"message":"Path `address.subCounty` is required.","path":"address.subCounty","type":"required"}},"userId":{"kind":"required","message":"Path `userId` is required.","name":"ValidatorError","path":"userId","properties":{"message":"Path `userId` is required.","path":"userId","type":"required"}}},"level":"error","message":"Registration failed: User validation failed: address.subCounty: Path `address.subCounty` is required., address.county: Path `address.county` is required., address.city: Path `address.city` is required., address.street: Path `address.street` is required., userId: Path `userId` is required.","service":"medblock-backend","stack":"ValidationError: User validation failed: address.subCounty: Path `address.subCounty` is required., address.county: Path `address.county` is required., address.city: Path `address.city` is required., address.street: Path `address.street` is required., userId: Path `userId` is required.\n    at Document.invalidate (/home/josva/Desktop/MedBlock/node_modules/mongoose/lib/document.js:3352:32)\n    at /home/josva/Desktop/MedBlock/node_modules/mongoose/lib/document.js:3113:17\n    at /home/josva/Desktop/MedBlock/node_modules/mongoose/lib/schemaType.js:1407:9\n    at process.processTicksAndRejections (node:internal/process/task_queues:85:11)","timestamp":"2025-06-26 20:34:47"}
{"environment":"development","ip":"::1","level":"info","message":"POST /api/v1/auth/register","service":"medblock-backend","timestamp":"2025-06-26 20:39:29","userAgent":"curl/8.5.0"}
{"_message":"User validation failed","environment":"development","errors":{"userId":{"kind":"required","message":"Path `userId` is required.","name":"ValidatorError","path":"userId","properties":{"message":"Path `userId` is required.","path":"userId","type":"required"}}},"level":"error","message":"Registration failed: User validation failed: userId: Path `userId` is required.","service":"medblock-backend","stack":"ValidationError: User validation failed: userId: Path `userId` is required.\n    at Document.invalidate (/home/josva/Desktop/MedBlock/node_modules/mongoose/lib/document.js:3352:32)\n    at /home/josva/Desktop/MedBlock/node_modules/mongoose/lib/document.js:3113:17\n    at /home/josva/Desktop/MedBlock/node_modules/mongoose/lib/schemaType.js:1407:9\n    at process.processTicksAndRejections (node:internal/process/task_queues:85:11)","timestamp":"2025-06-26 20:39:29"}
{"environment":"development","ip":"::1","level":"info","message":"POST /api/v1/auth/register","service":"medblock-backend","timestamp":"2025-06-26 20:40:52","userAgent":"curl/8.5.0"}
{"_message":"User validation failed","environment":"development","errors":{"userId":{"kind":"required","message":"Path `userId` is required.","name":"ValidatorError","path":"userId","properties":{"message":"Path `userId` is required.","path":"userId","type":"required"}}},"level":"error","message":"Registration failed: User validation failed: userId: Path `userId` is required.","service":"medblock-backend","stack":"ValidationError: User validation failed: userId: Path `userId` is required.\n    at Document.invalidate (/home/josva/Desktop/MedBlock/node_modules/mongoose/lib/document.js:3352:32)\n    at /home/josva/Desktop/MedBlock/node_modules/mongoose/lib/document.js:3113:17\n    at /home/josva/Desktop/MedBlock/node_modules/mongoose/lib/schemaType.js:1407:9\n    at process.processTicksAndRejections (node:internal/process/task_queues:85:11)","timestamp":"2025-06-26 20:40:52"}
{"environment":"development","ip":"::1","level":"info","message":"POST /api/v1/auth/register","service":"medblock-backend","timestamp":"2025-06-26 20:43:56","userAgent":"curl/8.5.0"}
{"_message":"User validation failed","environment":"development","errors":{"userId":{"kind":"required","message":"Path `userId` is required.","name":"ValidatorError","path":"userId","properties":{"message":"Path `userId` is required.","path":"userId","type":"required"}}},"level":"error","message":"Registration failed: User validation failed: userId: Path `userId` is required.","service":"medblock-backend","stack":"ValidationError: User validation failed: userId: Path `userId` is required.\n    at Document.invalidate (/home/josva/Desktop/MedBlock/node_modules/mongoose/lib/document.js:3352:32)\n    at /home/josva/Desktop/MedBlock/node_modules/mongoose/lib/document.js:3113:17\n    at /home/josva/Desktop/MedBlock/node_modules/mongoose/lib/schemaType.js:1407:9\n    at process.processTicksAndRejections (node:internal/process/task_queues:85:11)","timestamp":"2025-06-26 20:43:56"}
{"environment":"development","ip":"::1","level":"info","message":"GET /health","service":"medblock-backend","timestamp":"2025-06-26 20:44:50","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36"}
{"environment":"development","ip":"::1","level":"info","message":"POST /api/v1/auth/register","service":"medblock-backend","timestamp":"2025-06-26 20:45:00","userAgent":"curl/8.5.0"}
{"_message":"User validation failed","environment":"development","errors":{"userId":{"kind":"required","message":"Path `userId` is required.","name":"ValidatorError","path":"userId","properties":{"message":"Path `userId` is required.","path":"userId","type":"required"}}},"level":"error","message":"Registration failed: User validation failed: userId: Path `userId` is required.","service":"medblock-backend","stack":"ValidationError: User validation failed: userId: Path `userId` is required.\n    at Document.invalidate (/home/josva/Desktop/MedBlock/node_modules/mongoose/lib/document.js:3352:32)\n    at /home/josva/Desktop/MedBlock/node_modules/mongoose/lib/document.js:3113:17\n    at /home/josva/Desktop/MedBlock/node_modules/mongoose/lib/schemaType.js:1407:9\n    at process.processTicksAndRejections (node:internal/process/task_queues:85:11)","timestamp":"2025-06-26 20:45:00"}
{"environment":"development","ip":"::1","level":"info","message":"POST /api/v1/auth/register","service":"medblock-backend","timestamp":"2025-06-26 21:15:09","userAgent":"curl/8.5.0"}
{"_message":"User validation failed","environment":"development","errors":{"userId":{"kind":"required","message":"Path `userId` is required.","name":"ValidatorError","path":"userId","properties":{"message":"Path `userId` is required.","path":"userId","type":"required"}}},"level":"error","message":"Registration failed: User validation failed: userId: Path `userId` is required.","service":"medblock-backend","stack":"ValidationError: User validation failed: userId: Path `userId` is required.\n    at Document.invalidate (/home/josva/Desktop/MedBlock/node_modules/mongoose/lib/document.js:3352:32)\n    at /home/josva/Desktop/MedBlock/node_modules/mongoose/lib/document.js:3113:17\n    at /home/josva/Desktop/MedBlock/node_modules/mongoose/lib/schemaType.js:1407:9\n    at process.processTicksAndRejections (node:internal/process/task_queues:85:11)","timestamp":"2025-06-26 21:15:09"}
{"environment":"development","level":"info","message":"--- Logger test from server.js ---","service":"medblock-backend","timestamp":"2025-06-26 21:22:47"}
{"environment":"development","level":"info","message":"✅ MongoDB connected successfully","service":"medblock-backend","timestamp":"2025-06-26 21:22:48"}
{"environment":"development","level":"info","message":"Database connected successfully","service":"medblock-backend","timestamp":"2025-06-26 21:22:48"}
{"environment":"development","level":"info","message":"Server running on port 3000 in development mode","service":"medblock-backend","timestamp":"2025-06-26 21:22:48"}
{"environment":"development","level":"info","message":"Health check available at http://localhost:3000/health","service":"medblock-backend","timestamp":"2025-06-26 21:22:48"}
{"environment":"development","level":"info","message":"API documentation available at http://localhost:3000/api/v1","service":"medblock-backend","timestamp":"2025-06-26 21:22:48"}
{"environment":"development","level":"info","message":"--- Logger test from server.js ---","service":"medblock-backend","timestamp":"2025-06-26 21:23:17"}
{"environment":"development","level":"info","message":"✅ MongoDB connected successfully","service":"medblock-backend","timestamp":"2025-06-26 21:23:17"}
{"environment":"development","level":"info","message":"Database connected successfully","service":"medblock-backend","timestamp":"2025-06-26 21:23:17"}
{"environment":"development","level":"info","message":"Server running on port 3000 in development mode","service":"medblock-backend","timestamp":"2025-06-26 21:23:17"}
{"environment":"development","level":"info","message":"Health check available at http://localhost:3000/health","service":"medblock-backend","timestamp":"2025-06-26 21:23:17"}
{"environment":"development","level":"info","message":"API documentation available at http://localhost:3000/api/v1","service":"medblock-backend","timestamp":"2025-06-26 21:23:17"}
{"environment":"development","ip":"::1","level":"info","message":"POST /api/v1/auth/register","service":"medblock-backend","timestamp":"2025-06-26 21:25:50","userAgent":"curl/8.5.0"}
{"action":"user_registered","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","resource":"auth","service":"medblock-backend","timestamp":"2025-06-26 21:25:51","userAgent":"curl/8.5.0","userId":"b0e60435-b552-4d48-a3fa-06ba9957ac17"}
{"environment":"development","ip":"::1","level":"info","message":"GET /health","service":"medblock-backend","timestamp":"2025-06-26 21:26:25","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36"}
{"environment":"development","ip":"::1","level":"info","message":"GET /api/v1","service":"medblock-backend","timestamp":"2025-06-26 21:27:38","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36"}
{"environment":"development","ip":"::1","level":"info","message":"POST /api/v1/auth/login","service":"medblock-backend","timestamp":"2025-06-26 21:55:29","userAgent":"curl/8.5.0"}
{"action":"user_login","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","resource":"auth","service":"medblock-backend","timestamp":"2025-06-26 21:55:30","userAgent":"curl/8.5.0","userId":"b0e60435-b552-4d48-a3fa-06ba9957ac17"}
{"environment":"development","ip":"::1","level":"info","message":"POST /api/v1/patients","service":"medblock-backend","timestamp":"2025-06-26 21:57:18","userAgent":"curl/8.5.0"}
{"environment":"development","level":"info","message":"--- Logger test from server.js ---","service":"medblock-backend","timestamp":"2025-06-26 22:01:34"}
{"environment":"development","level":"info","message":"✅ MongoDB connected successfully","service":"medblock-backend","timestamp":"2025-06-26 22:01:35"}
{"environment":"development","level":"info","message":"Database connected successfully","service":"medblock-backend","timestamp":"2025-06-26 22:01:35"}
{"environment":"development","level":"info","message":"Server running on port 3000 in development mode","service":"medblock-backend","timestamp":"2025-06-26 22:01:35"}
{"environment":"development","level":"info","message":"Health check available at http://localhost:3000/health","service":"medblock-backend","timestamp":"2025-06-26 22:01:35"}
{"environment":"development","level":"info","message":"API documentation available at http://localhost:3000/api/v1","service":"medblock-backend","timestamp":"2025-06-26 22:01:35"}
{"environment":"development","ip":"::1","level":"info","message":"POST /api/v1/patients","service":"medblock-backend","timestamp":"2025-06-26 22:02:12","userAgent":"curl/8.5.0"}
{"environment":"development","kind":"ObjectId","level":"error","message":"Authentication error: Cast to ObjectId failed for value \"b0e60435-b552-4d48-a3fa-06ba9957ac17\" (type string) at path \"_id\" for model \"User\"","path":"_id","reason":{},"service":"medblock-backend","stack":"CastError: Cast to ObjectId failed for value \"b0e60435-b552-4d48-a3fa-06ba9957ac17\" (type string) at path \"_id\" for model \"User\"\n    at SchemaObjectId.cast (/home/josva/Desktop/MedBlock/node_modules/mongoose/lib/schema/objectId.js:251:11)\n    at SchemaType.applySetters (/home/josva/Desktop/MedBlock/node_modules/mongoose/lib/schemaType.js:1255:12)\n    at SchemaType.castForQuery (/home/josva/Desktop/MedBlock/node_modules/mongoose/lib/schemaType.js:1673:17)\n    at cast (/home/josva/Desktop/MedBlock/node_modules/mongoose/lib/cast.js:390:32)\n    at Query.cast (/home/josva/Desktop/MedBlock/node_modules/mongoose/lib/query.js:5055:12)\n    at Query._castConditions (/home/josva/Desktop/MedBlock/node_modules/mongoose/lib/query.js:2351:10)\n    at model.Query._findOne (/home/josva/Desktop/MedBlock/node_modules/mongoose/lib/query.js:2674:8)\n    at model.Query.exec (/home/josva/Desktop/MedBlock/node_modules/mongoose/lib/query.js:4604:80)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async authenticateToken (/home/josva/Desktop/MedBlock/src/middleware/auth.js:29:18)","stringValue":"\"b0e60435-b552-4d48-a3fa-06ba9957ac17\"","timestamp":"2025-06-26 22:02:12","value":"b0e60435-b552-4d48-a3fa-06ba9957ac17","valueType":"string"}
{"environment":"development","level":"info","message":"--- Logger test from server.js ---","service":"medblock-backend","timestamp":"2025-06-26 22:10:56"}
{"environment":"development","level":"info","message":"✅ MongoDB connected successfully","service":"medblock-backend","timestamp":"2025-06-26 22:10:56"}
{"environment":"development","level":"info","message":"Database connected successfully","service":"medblock-backend","timestamp":"2025-06-26 22:10:56"}
{"environment":"development","level":"info","message":"Server running on port 3000 in development mode","service":"medblock-backend","timestamp":"2025-06-26 22:10:56"}
{"environment":"development","level":"info","message":"Health check available at http://localhost:3000/health","service":"medblock-backend","timestamp":"2025-06-26 22:10:56"}
{"environment":"development","level":"info","message":"API documentation available at http://localhost:3000/api/v1","service":"medblock-backend","timestamp":"2025-06-26 22:10:56"}
{"environment":"development","level":"info","message":"--- Logger test from server.js ---","service":"medblock-backend","timestamp":"2025-06-26 22:11:12"}
{"environment":"development","level":"info","message":"✅ MongoDB connected successfully","service":"medblock-backend","timestamp":"2025-06-26 22:11:12"}
{"environment":"development","level":"info","message":"Database connected successfully","service":"medblock-backend","timestamp":"2025-06-26 22:11:12"}
{"environment":"development","level":"info","message":"Server running on port 3000 in development mode","service":"medblock-backend","timestamp":"2025-06-26 22:11:12"}
{"environment":"development","level":"info","message":"Health check available at http://localhost:3000/health","service":"medblock-backend","timestamp":"2025-06-26 22:11:12"}
{"environment":"development","level":"info","message":"API documentation available at http://localhost:3000/api/v1","service":"medblock-backend","timestamp":"2025-06-26 22:11:12"}
{"environment":"development","level":"info","message":"--- Logger test from server.js ---","service":"medblock-backend","timestamp":"2025-06-26 22:11:40"}
{"environment":"development","level":"info","message":"✅ MongoDB connected successfully","service":"medblock-backend","timestamp":"2025-06-26 22:11:41"}
{"environment":"development","level":"info","message":"Database connected successfully","service":"medblock-backend","timestamp":"2025-06-26 22:11:41"}
{"environment":"development","level":"info","message":"Server running on port 3000 in development mode","service":"medblock-backend","timestamp":"2025-06-26 22:11:41"}
{"environment":"development","level":"info","message":"Health check available at http://localhost:3000/health","service":"medblock-backend","timestamp":"2025-06-26 22:11:41"}
{"environment":"development","level":"info","message":"API documentation available at http://localhost:3000/api/v1","service":"medblock-backend","timestamp":"2025-06-26 22:11:41"}
{"environment":"development","level":"info","message":"--- Logger test from server.js ---","service":"medblock-backend","timestamp":"2025-06-26 22:11:53"}
{"environment":"development","level":"info","message":"✅ MongoDB connected successfully","service":"medblock-backend","timestamp":"2025-06-26 22:11:53"}
{"environment":"development","level":"info","message":"Database connected successfully","service":"medblock-backend","timestamp":"2025-06-26 22:11:53"}
{"environment":"development","level":"info","message":"Server running on port 3000 in development mode","service":"medblock-backend","timestamp":"2025-06-26 22:11:53"}
{"environment":"development","level":"info","message":"Health check available at http://localhost:3000/health","service":"medblock-backend","timestamp":"2025-06-26 22:11:53"}
{"environment":"development","level":"info","message":"API documentation available at http://localhost:3000/api/v1","service":"medblock-backend","timestamp":"2025-06-26 22:11:53"}
{"environment":"development","level":"info","message":"--- Logger test from server.js ---","service":"medblock-backend","timestamp":"2025-06-26 22:12:02"}
{"environment":"development","level":"info","message":"✅ MongoDB connected successfully","service":"medblock-backend","timestamp":"2025-06-26 22:12:03"}
{"environment":"development","level":"info","message":"Database connected successfully","service":"medblock-backend","timestamp":"2025-06-26 22:12:03"}
{"environment":"development","level":"info","message":"Server running on port 3000 in development mode","service":"medblock-backend","timestamp":"2025-06-26 22:12:03"}
{"environment":"development","level":"info","message":"Health check available at http://localhost:3000/health","service":"medblock-backend","timestamp":"2025-06-26 22:12:03"}
{"environment":"development","level":"info","message":"API documentation available at http://localhost:3000/api/v1","service":"medblock-backend","timestamp":"2025-06-26 22:12:03"}
{"environment":"development","ip":"::1","level":"info","message":"POST /api/v1/auth/register","service":"medblock-backend","timestamp":"2025-06-26 22:22:37","userAgent":"curl/8.5.0"}
{"environment":"development","ip":"::1","level":"info","message":"GET /api/v1","service":"medblock-backend","timestamp":"2025-06-26 22:25:25","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36"}
{"environment":"development","ip":"::1","level":"info","message":"POST /api/v1/auth/register","service":"medblock-backend","timestamp":"2025-06-26 22:38:15","userAgent":"curl/8.5.0"}
{"environment":"development","ip":"::1","level":"info","message":"POST /api/v1/auth/register","service":"medblock-backend","timestamp":"2025-06-26 22:39:32","userAgent":"curl/8.5.0"}
{"action":"user_registered","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","resource":"auth","service":"medblock-backend","timestamp":"2025-06-26 22:39:32","userAgent":"curl/8.5.0","userId":"685da1f425549ec1ae4d9eab"}
{"environment":"development","ip":"::1","level":"info","message":"POST /api/v1/patients","service":"medblock-backend","timestamp":"2025-06-26 22:44:13","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"POST","resource":"/api/v1/patients","service":"medblock-backend","timestamp":"2025-06-26 22:44:13","userAgent":"curl/8.5.0"}
{"environment":"development","ip":"::1","level":"info","message":"POST /api/v1/patients","service":"medblock-backend","timestamp":"2025-06-26 22:51:48","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"POST","resource":"/api/v1/patients","service":"medblock-backend","timestamp":"2025-06-26 22:51:48","userAgent":"curl/8.5.0"}
{"_message":"Patient validation failed","environment":"development","errors":{"address.city":{"kind":"required","message":"Path `address.city` is required.","name":"ValidatorError","path":"address.city","properties":{"message":"Path `address.city` is required.","path":"address.city","type":"required"}},"address.street":{"kind":"required","message":"Path `address.street` is required.","name":"ValidatorError","path":"address.street","properties":{"message":"Path `address.street` is required.","path":"address.street","type":"required"}},"emergencyContact.name":{"kind":"required","message":"Path `emergencyContact.name` is required.","name":"ValidatorError","path":"emergencyContact.name","properties":{"message":"Path `emergencyContact.name` is required.","path":"emergencyContact.name","type":"required"}},"emergencyContact.phoneNumber":{"kind":"required","message":"Path `emergencyContact.phoneNumber` is required.","name":"ValidatorError","path":"emergencyContact.phoneNumber","properties":{"message":"Path `emergencyContact.phoneNumber` is required.","path":"emergencyContact.phoneNumber","type":"required"}},"emergencyContact.relationship":{"kind":"required","message":"Path `emergencyContact.relationship` is required.","name":"ValidatorError","path":"emergencyContact.relationship","properties":{"message":"Path `emergencyContact.relationship` is required.","path":"emergencyContact.relationship","type":"required"}},"password":{"kind":"required","message":"Path `password` is required.","name":"ValidatorError","path":"password","properties":{"message":"Path `password` is required.","path":"password","type":"required"}},"patientId":{"kind":"required","message":"Path `patientId` is required.","name":"ValidatorError","path":"patientId","properties":{"message":"Path `patientId` is required.","path":"patientId","type":"required"}}},"level":"error","message":"Create patient failed: Patient validation failed: password: Path `password` is required., emergencyContact.phoneNumber: Path `emergencyContact.phoneNumber` is required., emergencyContact.relationship: Path `emergencyContact.relationship` is required., emergencyContact.name: Path `emergencyContact.name` is required., address.city: Path `address.city` is required., address.street: Path `address.street` is required., patientId: Path `patientId` is required.","service":"medblock-backend","stack":"ValidationError: Patient validation failed: password: Path `password` is required., emergencyContact.phoneNumber: Path `emergencyContact.phoneNumber` is required., emergencyContact.relationship: Path `emergencyContact.relationship` is required., emergencyContact.name: Path `emergencyContact.name` is required., address.city: Path `address.city` is required., address.street: Path `address.street` is required., patientId: Path `patientId` is required.\n    at Document.invalidate (/home/josva/Desktop/MedBlock/node_modules/mongoose/lib/document.js:3352:32)\n    at /home/josva/Desktop/MedBlock/node_modules/mongoose/lib/document.js:3113:17\n    at /home/josva/Desktop/MedBlock/node_modules/mongoose/lib/schemaType.js:1407:9\n    at process.processTicksAndRejections (node:internal/process/task_queues:85:11)","timestamp":"2025-06-26 22:51:48"}
{"environment":"development","ip":"::1","level":"info","message":"POST /api/v1/patients","service":"medblock-backend","timestamp":"2025-06-26 22:55:11","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"POST","resource":"/api/v1/patients","service":"medblock-backend","timestamp":"2025-06-26 22:55:11","userAgent":"curl/8.5.0"}
{"_message":"Patient validation failed","environment":"development","errors":{"emergencyContact.relationship":{"kind":"enum","message":"`Brother` is not a valid enum value for path `emergencyContact.relationship`.","name":"ValidatorError","path":"emergencyContact.relationship","properties":{"enumValues":["spouse","parent","child","sibling","friend","other"],"message":"`Brother` is not a valid enum value for path `emergencyContact.relationship`.","path":"emergencyContact.relationship","type":"enum","value":"Brother"},"value":"Brother"}},"level":"error","message":"Create patient failed: Patient validation failed: emergencyContact.relationship: `Brother` is not a valid enum value for path `emergencyContact.relationship`.","service":"medblock-backend","stack":"ValidationError: Patient validation failed: emergencyContact.relationship: `Brother` is not a valid enum value for path `emergencyContact.relationship`.\n    at Document.invalidate (/home/josva/Desktop/MedBlock/node_modules/mongoose/lib/document.js:3352:32)\n    at /home/josva/Desktop/MedBlock/node_modules/mongoose/lib/document.js:3113:17\n    at /home/josva/Desktop/MedBlock/node_modules/mongoose/lib/schemaType.js:1407:9\n    at process.processTicksAndRejections (node:internal/process/task_queues:85:11)","timestamp":"2025-06-26 22:55:11"}
{"environment":"development","ip":"::1","level":"info","message":"POST /api/v1/patients","service":"medblock-backend","timestamp":"2025-06-26 22:56:37","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"POST","resource":"/api/v1/patients","service":"medblock-backend","timestamp":"2025-06-26 22:56:37","userAgent":"curl/8.5.0"}
{"_message":"Patient validation failed","environment":"development","errors":{"emergencyContact.relationship":{"kind":"enum","message":"`Mother` is not a valid enum value for path `emergencyContact.relationship`.","name":"ValidatorError","path":"emergencyContact.relationship","properties":{"enumValues":["spouse","parent","child","sibling","friend","other"],"message":"`Mother` is not a valid enum value for path `emergencyContact.relationship`.","path":"emergencyContact.relationship","type":"enum","value":"Mother"},"value":"Mother"}},"level":"error","message":"Create patient failed: Patient validation failed: emergencyContact.relationship: `Mother` is not a valid enum value for path `emergencyContact.relationship`.","service":"medblock-backend","stack":"ValidationError: Patient validation failed: emergencyContact.relationship: `Mother` is not a valid enum value for path `emergencyContact.relationship`.\n    at Document.invalidate (/home/josva/Desktop/MedBlock/node_modules/mongoose/lib/document.js:3352:32)\n    at /home/josva/Desktop/MedBlock/node_modules/mongoose/lib/document.js:3113:17\n    at /home/josva/Desktop/MedBlock/node_modules/mongoose/lib/schemaType.js:1407:9\n    at process.processTicksAndRejections (node:internal/process/task_queues:85:11)","timestamp":"2025-06-26 22:56:37"}
{"environment":"development","ip":"::1","level":"info","message":"POST /api/v1/patients","service":"medblock-backend","timestamp":"2025-06-26 23:08:26","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"POST","resource":"/api/v1/patients","service":"medblock-backend","timestamp":"2025-06-26 23:08:26","userAgent":"curl/8.5.0"}
{"action":"patient_created","environment":"development","level":"info","message":"AUDIT_LOG","patientId":"PT-00123","patientName":"Jane Doe","resource":"patient:PT-00123","service":"medblock-backend","timestamp":"2025-06-26 23:08:27"}
{"environment":"development","level":"error","message":"Create patient failed: patient.getSummary is not a function","service":"medblock-backend","stack":"TypeError: patient.getSummary is not a function\n    at /home/josva/Desktop/MedBlock/src/routes/patients.js:208:26\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-06-26 23:08:27"}
{"environment":"development","level":"info","message":"--- Logger test from server.js ---","service":"medblock-backend","timestamp":"2025-06-26 23:22:23"}
{"environment":"development","level":"info","message":"✅ MongoDB connected successfully","service":"medblock-backend","timestamp":"2025-06-26 23:22:24"}
{"environment":"development","level":"info","message":"Database connected successfully","service":"medblock-backend","timestamp":"2025-06-26 23:22:24"}
{"environment":"development","level":"info","message":"Server running on port 3000 in development mode","service":"medblock-backend","timestamp":"2025-06-26 23:22:24"}
{"environment":"development","level":"info","message":"Health check available at http://localhost:3000/health","service":"medblock-backend","timestamp":"2025-06-26 23:22:24"}
{"environment":"development","level":"info","message":"API documentation available at http://localhost:3000/api/v1","service":"medblock-backend","timestamp":"2025-06-26 23:22:24"}
{"environment":"development","level":"info","message":"--- Logger test from server.js ---","service":"medblock-backend","timestamp":"2025-06-26 23:22:42"}
{"environment":"development","level":"info","message":"✅ MongoDB connected successfully","service":"medblock-backend","timestamp":"2025-06-26 23:22:42"}
{"environment":"development","level":"info","message":"Database connected successfully","service":"medblock-backend","timestamp":"2025-06-26 23:22:42"}
{"environment":"development","level":"info","message":"Server running on port 3000 in development mode","service":"medblock-backend","timestamp":"2025-06-26 23:22:42"}
{"environment":"development","level":"info","message":"Health check available at http://localhost:3000/health","service":"medblock-backend","timestamp":"2025-06-26 23:22:42"}
{"environment":"development","level":"info","message":"API documentation available at http://localhost:3000/api/v1","service":"medblock-backend","timestamp":"2025-06-26 23:22:42"}
{"environment":"development","ip":"::1","level":"info","message":"GET /api/v1/health","service":"medblock-backend","timestamp":"2025-06-26 23:22:57","userAgent":"curl/8.5.0"}
{"environment":"development","level":"info","message":"--- Logger test from server.js ---","service":"medblock-backend","timestamp":"2025-06-26 23:22:57"}
{"environment":"development","level":"info","message":"✅ MongoDB connected successfully","service":"medblock-backend","timestamp":"2025-06-26 23:22:58"}
{"environment":"development","ip":"::1","level":"info","message":"POST /api/v1/auth/login","service":"medblock-backend","timestamp":"2025-06-26 23:23:04","userAgent":"curl/8.5.0"}
{"environment":"development","level":"error","message":"Authentication failed: Invalid email or password","service":"medblock-backend","stack":"Error: Invalid email or password\n    at userSchema.statics.authenticate (/home/josva/Desktop/MedBlock/src/models/User.js:439:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async /home/josva/Desktop/MedBlock/src/routes/auth.js:144:18","timestamp":"2025-06-26 23:23:04"}
{"environment":"development","level":"error","message":"Login failed: Invalid email or password","service":"medblock-backend","stack":"Error: Invalid email or password\n    at userSchema.statics.authenticate (/home/josva/Desktop/MedBlock/src/models/User.js:439:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async /home/josva/Desktop/MedBlock/src/routes/auth.js:144:18","timestamp":"2025-06-26 23:23:04"}
{"environment":"development","ip":"::1","level":"info","message":"POST /api/v1/auth/login","service":"medblock-backend","timestamp":"2025-06-26 23:23:09","userAgent":"curl/8.5.0"}
{"environment":"development","level":"error","message":"Authentication failed: Invalid email or password","service":"medblock-backend","stack":"Error: Invalid email or password\n    at userSchema.statics.authenticate (/home/josva/Desktop/MedBlock/src/models/User.js:439:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async /home/josva/Desktop/MedBlock/src/routes/auth.js:144:18","timestamp":"2025-06-26 23:23:09"}
{"environment":"development","level":"error","message":"Login failed: Invalid email or password","service":"medblock-backend","stack":"Error: Invalid email or password\n    at userSchema.statics.authenticate (/home/josva/Desktop/MedBlock/src/models/User.js:439:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async /home/josva/Desktop/MedBlock/src/routes/auth.js:144:18","timestamp":"2025-06-26 23:23:09"}
{"environment":"development","ip":"::1","level":"info","message":"POST /api/v1/auth/register","service":"medblock-backend","timestamp":"2025-06-26 23:23:15","userAgent":"curl/8.5.0"}
{"environment":"development","ip":"::1","level":"info","message":"POST /api/v1/auth/register","service":"medblock-backend","timestamp":"2025-06-26 23:23:21","userAgent":"curl/8.5.0"}
{"_message":"User validation failed","environment":"development","errors":{"address.city":{"kind":"required","message":"Path `address.city` is required.","name":"ValidatorError","path":"address.city","properties":{"message":"Path `address.city` is required.","path":"address.city","type":"required"}},"address.county":{"kind":"required","message":"Path `address.county` is required.","name":"ValidatorError","path":"address.county","properties":{"message":"Path `address.county` is required.","path":"address.county","type":"required"}},"address.street":{"kind":"required","message":"Path `address.street` is required.","name":"ValidatorError","path":"address.street","properties":{"message":"Path `address.street` is required.","path":"address.street","type":"required"}},"address.subCounty":{"kind":"required","message":"Path `address.subCounty` is required.","name":"ValidatorError","path":"address.subCounty","properties":{"message":"Path `address.subCounty` is required.","path":"address.subCounty","type":"required"}}},"level":"error","message":"Registration failed: User validation failed: address.subCounty: Path `address.subCounty` is required., address.county: Path `address.county` is required., address.city: Path `address.city` is required., address.street: Path `address.street` is required.","service":"medblock-backend","stack":"ValidationError: User validation failed: address.subCounty: Path `address.subCounty` is required., address.county: Path `address.county` is required., address.city: Path `address.city` is required., address.street: Path `address.street` is required.\n    at Document.invalidate (/home/josva/Desktop/MedBlock/node_modules/mongoose/lib/document.js:3352:32)\n    at /home/josva/Desktop/MedBlock/node_modules/mongoose/lib/document.js:3113:17\n    at /home/josva/Desktop/MedBlock/node_modules/mongoose/lib/schemaType.js:1407:9\n    at process.processTicksAndRejections (node:internal/process/task_queues:85:11)","timestamp":"2025-06-26 23:23:21"}
{"environment":"development","ip":"::1","level":"info","message":"POST /api/v1/auth/register","service":"medblock-backend","timestamp":"2025-06-26 23:23:24","userAgent":"curl/8.5.0"}
{"code":11000,"environment":"development","errorLabelSet":{},"errorResponse":{"code":11000,"errmsg":"E11000 duplicate key error collection: medblock.users index: userId_1 dup key: { userId: null }","index":0,"keyPattern":{"userId":1},"keyValue":{"userId":null}},"index":0,"keyPattern":{"userId":1},"keyValue":{"userId":null},"level":"error","message":"Registration failed: E11000 duplicate key error collection: medblock.users index: userId_1 dup key: { userId: null }","service":"medblock-backend","stack":"MongoServerError: E11000 duplicate key error collection: medblock.users index: userId_1 dup key: { userId: null }\n    at InsertOneOperation.execute (/home/josva/Desktop/MedBlock/node_modules/mongodb/lib/operations/insert.js:51:19)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async tryOperation (/home/josva/Desktop/MedBlock/node_modules/mongodb/lib/operations/execute_operation.js:207:20)\n    at async executeOperation (/home/josva/Desktop/MedBlock/node_modules/mongodb/lib/operations/execute_operation.js:75:16)\n    at async Collection.insertOne (/home/josva/Desktop/MedBlock/node_modules/mongodb/lib/collection.js:157:16)","timestamp":"2025-06-26 23:23:25"}
{"environment":"development","level":"info","message":"--- Logger test from server.js ---","service":"medblock-backend","timestamp":"2025-06-26 23:23:48"}
{"environment":"development","level":"info","message":"✅ MongoDB connected successfully","service":"medblock-backend","timestamp":"2025-06-26 23:23:48"}
{"environment":"development","level":"info","message":"Database connected successfully","service":"medblock-backend","timestamp":"2025-06-26 23:23:48"}
{"environment":"development","level":"info","message":"Server running on port 3000 in development mode","service":"medblock-backend","timestamp":"2025-06-26 23:23:48"}
{"environment":"development","level":"info","message":"Health check available at http://localhost:3000/health","service":"medblock-backend","timestamp":"2025-06-26 23:23:48"}
{"environment":"development","level":"info","message":"API documentation available at http://localhost:3000/api/v1","service":"medblock-backend","timestamp":"2025-06-26 23:23:48"}
{"environment":"development","ip":"::1","level":"info","message":"POST /api/v1/auth/register","service":"medblock-backend","timestamp":"2025-06-26 23:23:52","userAgent":"curl/8.5.0"}
{"code":11000,"environment":"development","errorLabelSet":{},"errorResponse":{"code":11000,"errmsg":"E11000 duplicate key error collection: medblock.users index: userId_1 dup key: { userId: null }","index":0,"keyPattern":{"userId":1},"keyValue":{"userId":null}},"index":0,"keyPattern":{"userId":1},"keyValue":{"userId":null},"level":"error","message":"Registration failed: E11000 duplicate key error collection: medblock.users index: userId_1 dup key: { userId: null }","service":"medblock-backend","stack":"MongoServerError: E11000 duplicate key error collection: medblock.users index: userId_1 dup key: { userId: null }\n    at InsertOneOperation.execute (/home/josva/Desktop/MedBlock/node_modules/mongodb/lib/operations/insert.js:51:19)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async tryOperation (/home/josva/Desktop/MedBlock/node_modules/mongodb/lib/operations/execute_operation.js:207:20)\n    at async executeOperation (/home/josva/Desktop/MedBlock/node_modules/mongodb/lib/operations/execute_operation.js:75:16)\n    at async Collection.insertOne (/home/josva/Desktop/MedBlock/node_modules/mongodb/lib/collection.js:157:16)","timestamp":"2025-06-26 23:23:53"}
{"environment":"development","ip":"::1","level":"info","message":"POST /api/v1/patients","service":"medblock-backend","timestamp":"2025-06-26 23:25:00","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"POST","resource":"/api/v1/patients","service":"medblock-backend","timestamp":"2025-06-26 23:25:00","userAgent":"curl/8.5.0"}
{"environment":"development","ip":"::1","level":"info","message":"POST /api/v1/patients","service":"medblock-backend","timestamp":"2025-06-26 23:25:30","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"POST","resource":"/api/v1/patients","service":"medblock-backend","timestamp":"2025-06-26 23:25:30","userAgent":"curl/8.5.0"}
{"environment":"development","ip":"::1","level":"info","message":"GET /api/v1/patients","service":"medblock-backend","timestamp":"2025-06-26 23:29:21","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"GET","resource":"/api/v1/patients","service":"medblock-backend","timestamp":"2025-06-26 23:29:21","userAgent":"curl/8.5.0"}
{"action":"patients_listed","count":1,"environment":"development","level":"info","limit":20,"message":"AUDIT_LOG","page":1,"resource":"patients","service":"medblock-backend","timestamp":"2025-06-26 23:29:21"}
{"environment":"development","ip":"::1","level":"info","message":"GET /api/v1/patients?phoneNumber=0712345678","service":"medblock-backend","timestamp":"2025-06-26 23:30:06","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"GET","resource":"/api/v1/patients?phoneNumber=0712345678","service":"medblock-backend","timestamp":"2025-06-26 23:30:06","userAgent":"curl/8.5.0"}
{"action":"patients_listed","count":1,"environment":"development","level":"info","limit":20,"message":"AUDIT_LOG","page":1,"resource":"patients","service":"medblock-backend","timestamp":"2025-06-26 23:30:06"}
{"environment":"development","level":"info","message":"--- Logger test from server.js ---","service":"medblock-backend","timestamp":"2025-06-26 23:42:21"}
{"environment":"development","level":"info","message":"✅ MongoDB connected successfully","service":"medblock-backend","timestamp":"2025-06-26 23:42:21"}
{"environment":"development","level":"info","message":"Database connected successfully","service":"medblock-backend","timestamp":"2025-06-26 23:42:21"}
{"environment":"development","level":"info","message":"Server running on port 3000 in development mode","service":"medblock-backend","timestamp":"2025-06-26 23:42:21"}
{"environment":"development","level":"info","message":"Health check available at http://localhost:3000/health","service":"medblock-backend","timestamp":"2025-06-26 23:42:21"}
{"environment":"development","level":"info","message":"API documentation available at http://localhost:3000/api/v1","service":"medblock-backend","timestamp":"2025-06-26 23:42:21"}
{"environment":"development","level":"info","message":"--- Logger test from server.js ---","service":"medblock-backend","timestamp":"2025-06-26 23:42:28"}
{"environment":"development","level":"info","message":"✅ MongoDB connected successfully","service":"medblock-backend","timestamp":"2025-06-26 23:42:28"}
{"environment":"development","level":"info","message":"Database connected successfully","service":"medblock-backend","timestamp":"2025-06-26 23:42:28"}
{"environment":"development","level":"info","message":"Server running on port 3000 in development mode","service":"medblock-backend","timestamp":"2025-06-26 23:42:28"}
{"environment":"development","level":"info","message":"Health check available at http://localhost:3000/health","service":"medblock-backend","timestamp":"2025-06-26 23:42:28"}
{"environment":"development","level":"info","message":"API documentation available at http://localhost:3000/api/v1","service":"medblock-backend","timestamp":"2025-06-26 23:42:28"}
{"environment":"development","level":"info","message":"--- Logger test from server.js ---","service":"medblock-backend","timestamp":"2025-06-26 23:42:35"}
{"environment":"development","level":"info","message":"✅ MongoDB connected successfully","service":"medblock-backend","timestamp":"2025-06-26 23:42:36"}
{"environment":"development","level":"info","message":"Database connected successfully","service":"medblock-backend","timestamp":"2025-06-26 23:42:36"}
{"environment":"development","level":"info","message":"Server running on port 3000 in development mode","service":"medblock-backend","timestamp":"2025-06-26 23:42:36"}
{"environment":"development","level":"info","message":"Health check available at http://localhost:3000/health","service":"medblock-backend","timestamp":"2025-06-26 23:42:36"}
{"environment":"development","level":"info","message":"API documentation available at http://localhost:3000/api/v1","service":"medblock-backend","timestamp":"2025-06-26 23:42:36"}
{"environment":"development","ip":"::1","level":"info","message":"POST /api/v1/auth/register","service":"medblock-backend","timestamp":"2025-06-26 23:42:37","userAgent":"curl/8.5.0"}
{"action":"user_registered","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","resource":"auth","service":"medblock-backend","timestamp":"2025-06-26 23:42:38","userAgent":"curl/8.5.0","userId":"685db0bdb5642849727fe6fb"}
{"environment":"development","level":"info","message":"--- Logger test from server.js ---","service":"medblock-backend","timestamp":"2025-06-26 23:42:55"}
{"environment":"development","level":"info","message":"✅ MongoDB connected successfully","service":"medblock-backend","timestamp":"2025-06-26 23:42:55"}
{"environment":"development","level":"info","message":"Database connected successfully","service":"medblock-backend","timestamp":"2025-06-26 23:42:55"}
{"environment":"development","level":"info","message":"Server running on port 3000 in development mode","service":"medblock-backend","timestamp":"2025-06-26 23:42:55"}
{"environment":"development","level":"info","message":"Health check available at http://localhost:3000/health","service":"medblock-backend","timestamp":"2025-06-26 23:42:55"}
{"environment":"development","level":"info","message":"API documentation available at http://localhost:3000/api/v1","service":"medblock-backend","timestamp":"2025-06-26 23:42:55"}
{"environment":"development","level":"info","message":"--- Logger test from server.js ---","service":"medblock-backend","timestamp":"2025-06-26 23:43:04"}
{"environment":"development","level":"info","message":"✅ MongoDB connected successfully","service":"medblock-backend","timestamp":"2025-06-26 23:43:05"}
{"environment":"development","level":"info","message":"Database connected successfully","service":"medblock-backend","timestamp":"2025-06-26 23:43:05"}
{"environment":"development","level":"info","message":"Server running on port 3000 in development mode","service":"medblock-backend","timestamp":"2025-06-26 23:43:05"}
{"environment":"development","level":"info","message":"Health check available at http://localhost:3000/health","service":"medblock-backend","timestamp":"2025-06-26 23:43:05"}
{"environment":"development","level":"info","message":"API documentation available at http://localhost:3000/api/v1","service":"medblock-backend","timestamp":"2025-06-26 23:43:05"}
{"environment":"development","ip":"::1","level":"info","message":"POST /api/v1/auth/login","service":"medblock-backend","timestamp":"2025-06-26 23:43:09","userAgent":"curl/8.5.0"}
{"action":"user_login","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","resource":"auth","service":"medblock-backend","timestamp":"2025-06-26 23:43:10","userAgent":"curl/8.5.0","userId":"685db0bdb5642849727fe6fb"}
{"environment":"development","ip":"::1","level":"info","message":"POST /api/v1/patients","service":"medblock-backend","timestamp":"2025-06-26 23:43:16","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"POST","resource":"/api/v1/patients","service":"medblock-backend","timestamp":"2025-06-26 23:43:16","userAgent":"curl/8.5.0","userId":"685db0bdb5642849727fe6fb"}
{"environment":"development","ip":"::1","level":"info","message":"POST /api/v1/patients","service":"medblock-backend","timestamp":"2025-06-26 23:43:22","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"POST","resource":"/api/v1/patients","service":"medblock-backend","timestamp":"2025-06-26 23:43:22","userAgent":"curl/8.5.0","userId":"685db0bdb5642849727fe6fb"}
{"environment":"development","ip":"::1","level":"info","message":"GET /api/v1/patients","service":"medblock-backend","timestamp":"2025-06-26 23:43:29","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"GET","resource":"/api/v1/patients","service":"medblock-backend","timestamp":"2025-06-26 23:43:29","userAgent":"curl/8.5.0","userId":"685db0bdb5642849727fe6fb"}
{"action":"patients_listed","count":1,"environment":"development","level":"info","limit":20,"message":"AUDIT_LOG","page":1,"resource":"patients","service":"medblock-backend","timestamp":"2025-06-26 23:43:29","userId":"685db0bdb5642849727fe6fb"}
{"environment":"development","ip":"::1","level":"info","message":"GET /api/v1/patients/PT-00123","service":"medblock-backend","timestamp":"2025-06-26 23:43:34","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"GET","resource":"/api/v1/patients/PT-00123","service":"medblock-backend","timestamp":"2025-06-26 23:43:34","userAgent":"curl/8.5.0","userId":"685db0bdb5642849727fe6fb"}
{"environment":"development","kind":"ObjectId","level":"error","message":"Get patient failed: Cast to ObjectId failed for value \"PT-00123\" (type string) at path \"_id\" for model \"Patient\"","path":"_id","reason":{},"service":"medblock-backend","stack":"CastError: Cast to ObjectId failed for value \"PT-00123\" (type string) at path \"_id\" for model \"Patient\"\n    at SchemaObjectId.cast (/home/josva/Desktop/MedBlock/node_modules/mongoose/lib/schema/objectId.js:251:11)\n    at SchemaType.applySetters (/home/josva/Desktop/MedBlock/node_modules/mongoose/lib/schemaType.js:1255:12)\n    at SchemaType.castForQuery (/home/josva/Desktop/MedBlock/node_modules/mongoose/lib/schemaType.js:1673:17)\n    at cast (/home/josva/Desktop/MedBlock/node_modules/mongoose/lib/cast.js:390:32)\n    at cast (/home/josva/Desktop/MedBlock/node_modules/mongoose/lib/cast.js:76:20)\n    at Query.cast (/home/josva/Desktop/MedBlock/node_modules/mongoose/lib/query.js:5055:12)\n    at Query._castConditions (/home/josva/Desktop/MedBlock/node_modules/mongoose/lib/query.js:2351:10)\n    at model.Query._findOne (/home/josva/Desktop/MedBlock/node_modules/mongoose/lib/query.js:2674:8)\n    at model.Query.exec (/home/josva/Desktop/MedBlock/node_modules/mongoose/lib/query.js:4604:80)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","stringValue":"\"PT-00123\"","timestamp":"2025-06-26 23:43:34","value":"PT-00123","valueType":"string"}
{"environment":"development","ip":"::1","level":"info","message":"GET /api/v1/patients/685db0bdb5642849727fe6fb","service":"medblock-backend","timestamp":"2025-06-26 23:43:41","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"GET","resource":"/api/v1/patients/685db0bdb5642849727fe6fb","service":"medblock-backend","timestamp":"2025-06-26 23:43:41","userAgent":"curl/8.5.0","userId":"685db0bdb5642849727fe6fb"}
{"environment":"development","level":"info","message":"--- Logger test from server.js ---","service":"medblock-backend","timestamp":"2025-06-26 23:44:31"}
{"environment":"development","level":"info","message":"✅ MongoDB connected successfully","service":"medblock-backend","timestamp":"2025-06-26 23:44:31"}
{"environment":"development","level":"info","message":"Database connected successfully","service":"medblock-backend","timestamp":"2025-06-26 23:44:31"}
{"environment":"development","level":"info","message":"Server running on port 3000 in development mode","service":"medblock-backend","timestamp":"2025-06-26 23:44:31"}
{"environment":"development","level":"info","message":"Health check available at http://localhost:3000/health","service":"medblock-backend","timestamp":"2025-06-26 23:44:31"}
{"environment":"development","level":"info","message":"API documentation available at http://localhost:3000/api/v1","service":"medblock-backend","timestamp":"2025-06-26 23:44:31"}
{"environment":"development","ip":"::1","level":"info","message":"GET /api/v1/patients/PT-00123","service":"medblock-backend","timestamp":"2025-06-26 23:44:37","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"GET","resource":"/api/v1/patients/PT-00123","service":"medblock-backend","timestamp":"2025-06-26 23:44:37","userAgent":"curl/8.5.0","userId":"685db0bdb5642849727fe6fb"}
{"environment":"development","kind":"ObjectId","level":"error","message":"Get patient failed: Cast to ObjectId failed for value \"PT-00123\" (type string) at path \"_id\" for model \"Patient\"","path":"_id","reason":{},"service":"medblock-backend","stack":"CastError: Cast to ObjectId failed for value \"PT-00123\" (type string) at path \"_id\" for model \"Patient\"\n    at SchemaObjectId.cast (/home/josva/Desktop/MedBlock/node_modules/mongoose/lib/schema/objectId.js:251:11)\n    at SchemaType.applySetters (/home/josva/Desktop/MedBlock/node_modules/mongoose/lib/schemaType.js:1255:12)\n    at SchemaType.castForQuery (/home/josva/Desktop/MedBlock/node_modules/mongoose/lib/schemaType.js:1673:17)\n    at cast (/home/josva/Desktop/MedBlock/node_modules/mongoose/lib/cast.js:390:32)\n    at cast (/home/josva/Desktop/MedBlock/node_modules/mongoose/lib/cast.js:76:20)\n    at Query.cast (/home/josva/Desktop/MedBlock/node_modules/mongoose/lib/query.js:5055:12)\n    at Query._castConditions (/home/josva/Desktop/MedBlock/node_modules/mongoose/lib/query.js:2351:10)\n    at model.Query._findOne (/home/josva/Desktop/MedBlock/node_modules/mongoose/lib/query.js:2674:8)\n    at model.Query.exec (/home/josva/Desktop/MedBlock/node_modules/mongoose/lib/query.js:4604:80)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","stringValue":"\"PT-00123\"","timestamp":"2025-06-26 23:44:37","value":"PT-00123","valueType":"string"}
{"environment":"development","level":"info","message":"--- Logger test from server.js ---","service":"medblock-backend","timestamp":"2025-06-26 23:45:06"}
{"environment":"development","level":"info","message":"✅ MongoDB connected successfully","service":"medblock-backend","timestamp":"2025-06-26 23:45:06"}
{"environment":"development","level":"info","message":"Database connected successfully","service":"medblock-backend","timestamp":"2025-06-26 23:45:06"}
{"environment":"development","level":"info","message":"Server running on port 3000 in development mode","service":"medblock-backend","timestamp":"2025-06-26 23:45:06"}
{"environment":"development","level":"info","message":"Health check available at http://localhost:3000/health","service":"medblock-backend","timestamp":"2025-06-26 23:45:06"}
{"environment":"development","level":"info","message":"API documentation available at http://localhost:3000/api/v1","service":"medblock-backend","timestamp":"2025-06-26 23:45:06"}
{"environment":"development","level":"info","message":"--- Logger test from server.js ---","service":"medblock-backend","timestamp":"2025-06-26 23:45:20"}
{"environment":"development","level":"info","message":"✅ MongoDB connected successfully","service":"medblock-backend","timestamp":"2025-06-26 23:45:20"}
{"environment":"development","level":"info","message":"Database connected successfully","service":"medblock-backend","timestamp":"2025-06-26 23:45:20"}
{"environment":"development","level":"info","message":"Server running on port 3000 in development mode","service":"medblock-backend","timestamp":"2025-06-26 23:45:20"}
{"environment":"development","level":"info","message":"Health check available at http://localhost:3000/health","service":"medblock-backend","timestamp":"2025-06-26 23:45:20"}
{"environment":"development","level":"info","message":"API documentation available at http://localhost:3000/api/v1","service":"medblock-backend","timestamp":"2025-06-26 23:45:20"}
{"environment":"development","ip":"::1","level":"info","message":"GET /api/v1/patients/PT-00123","service":"medblock-backend","timestamp":"2025-06-26 23:45:25","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"GET","resource":"/api/v1/patients/PT-00123","service":"medblock-backend","timestamp":"2025-06-26 23:45:25","userAgent":"curl/8.5.0","userId":"685db0bdb5642849727fe6fb"}
{"environment":"development","kind":"ObjectId","level":"error","message":"Get patient failed: Cast to ObjectId failed for value \"PT-00123\" (type string) at path \"_id\" for model \"Patient\"","path":"_id","reason":{},"service":"medblock-backend","stack":"CastError: Cast to ObjectId failed for value \"PT-00123\" (type string) at path \"_id\" for model \"Patient\"\n    at SchemaObjectId.cast (/home/josva/Desktop/MedBlock/node_modules/mongoose/lib/schema/objectId.js:251:11)\n    at SchemaType.applySetters (/home/josva/Desktop/MedBlock/node_modules/mongoose/lib/schemaType.js:1255:12)\n    at SchemaType.castForQuery (/home/josva/Desktop/MedBlock/node_modules/mongoose/lib/schemaType.js:1673:17)\n    at cast (/home/josva/Desktop/MedBlock/node_modules/mongoose/lib/cast.js:390:32)\n    at cast (/home/josva/Desktop/MedBlock/node_modules/mongoose/lib/cast.js:76:20)\n    at Query.cast (/home/josva/Desktop/MedBlock/node_modules/mongoose/lib/query.js:5055:12)\n    at Query._castConditions (/home/josva/Desktop/MedBlock/node_modules/mongoose/lib/query.js:2351:10)\n    at model.Query._findOne (/home/josva/Desktop/MedBlock/node_modules/mongoose/lib/query.js:2674:8)\n    at model.Query.exec (/home/josva/Desktop/MedBlock/node_modules/mongoose/lib/query.js:4604:80)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","stringValue":"\"PT-00123\"","timestamp":"2025-06-26 23:45:25","value":"PT-00123","valueType":"string"}
{"environment":"development","level":"info","message":"--- Logger test from server.js ---","service":"medblock-backend","timestamp":"2025-06-26 23:45:36"}
{"environment":"development","level":"info","message":"✅ MongoDB connected successfully","service":"medblock-backend","timestamp":"2025-06-26 23:45:37"}
{"environment":"development","level":"info","message":"Database connected successfully","service":"medblock-backend","timestamp":"2025-06-26 23:45:37"}
{"environment":"development","level":"info","message":"Server running on port 3000 in development mode","service":"medblock-backend","timestamp":"2025-06-26 23:45:37"}
{"environment":"development","level":"info","message":"Health check available at http://localhost:3000/health","service":"medblock-backend","timestamp":"2025-06-26 23:45:37"}
{"environment":"development","level":"info","message":"API documentation available at http://localhost:3000/api/v1","service":"medblock-backend","timestamp":"2025-06-26 23:45:37"}
{"environment":"development","level":"info","message":"--- Logger test from server.js ---","service":"medblock-backend","timestamp":"2025-06-26 23:45:56"}
{"environment":"development","level":"info","message":"✅ MongoDB connected successfully","service":"medblock-backend","timestamp":"2025-06-26 23:45:56"}
{"environment":"development","level":"info","message":"Database connected successfully","service":"medblock-backend","timestamp":"2025-06-26 23:45:56"}
{"environment":"development","level":"info","message":"Server running on port 3000 in development mode","service":"medblock-backend","timestamp":"2025-06-26 23:45:56"}
{"environment":"development","level":"info","message":"Health check available at http://localhost:3000/health","service":"medblock-backend","timestamp":"2025-06-26 23:45:56"}
{"environment":"development","level":"info","message":"API documentation available at http://localhost:3000/api/v1","service":"medblock-backend","timestamp":"2025-06-26 23:45:56"}
{"environment":"development","ip":"::1","level":"info","message":"GET /api/v1/patients/PT-00123","service":"medblock-backend","timestamp":"2025-06-26 23:50:21","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"GET","resource":"/api/v1/patients/PT-00123","service":"medblock-backend","timestamp":"2025-06-26 23:50:21","userAgent":"curl/8.5.0","userId":"685da1f425549ec1ae4d9eab"}
{"environment":"development","kind":"ObjectId","level":"error","message":"Get patient failed: Cast to ObjectId failed for value \"PT-00123\" (type string) at path \"_id\" for model \"Patient\"","path":"_id","reason":{},"service":"medblock-backend","stack":"CastError: Cast to ObjectId failed for value \"PT-00123\" (type string) at path \"_id\" for model \"Patient\"\n    at SchemaObjectId.cast (/home/josva/Desktop/MedBlock/node_modules/mongoose/lib/schema/objectId.js:251:11)\n    at SchemaType.applySetters (/home/josva/Desktop/MedBlock/node_modules/mongoose/lib/schemaType.js:1255:12)\n    at SchemaType.castForQuery (/home/josva/Desktop/MedBlock/node_modules/mongoose/lib/schemaType.js:1673:17)\n    at cast (/home/josva/Desktop/MedBlock/node_modules/mongoose/lib/cast.js:390:32)\n    at cast (/home/josva/Desktop/MedBlock/node_modules/mongoose/lib/cast.js:76:20)\n    at Query.cast (/home/josva/Desktop/MedBlock/node_modules/mongoose/lib/query.js:5055:12)\n    at Query._castConditions (/home/josva/Desktop/MedBlock/node_modules/mongoose/lib/query.js:2351:10)\n    at model.Query._findOne (/home/josva/Desktop/MedBlock/node_modules/mongoose/lib/query.js:2674:8)\n    at model.Query.exec (/home/josva/Desktop/MedBlock/node_modules/mongoose/lib/query.js:4604:80)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","stringValue":"\"PT-00123\"","timestamp":"2025-06-26 23:50:21","value":"PT-00123","valueType":"string"}
{"environment":"development","ip":"::1","level":"info","message":"GET /api/v1/patients","service":"medblock-backend","timestamp":"2025-06-26 23:51:58","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"GET","resource":"/api/v1/patients","service":"medblock-backend","timestamp":"2025-06-26 23:51:58","userAgent":"curl/8.5.0","userId":"685da1f425549ec1ae4d9eab"}
{"action":"patients_listed","count":1,"environment":"development","level":"info","limit":20,"message":"AUDIT_LOG","page":1,"resource":"patients","service":"medblock-backend","timestamp":"2025-06-26 23:51:58","userId":"685da1f425549ec1ae4d9eab"}
{"environment":"development","ip":"::1","level":"info","message":"GET /api/v1/patients","service":"medblock-backend","timestamp":"2025-06-26 23:53:35","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"GET","resource":"/api/v1/patients","service":"medblock-backend","timestamp":"2025-06-26 23:53:35","userAgent":"curl/8.5.0","userId":"685da1f425549ec1ae4d9eab"}
{"action":"patients_listed","count":1,"environment":"development","level":"info","limit":20,"message":"AUDIT_LOG","page":1,"resource":"patients","service":"medblock-backend","timestamp":"2025-06-26 23:53:35","userId":"685da1f425549ec1ae4d9eab"}
{"environment":"development","level":"info","message":"--- Logger test from server.js ---","service":"medblock-backend","timestamp":"2025-06-27 00:10:49"}
{"environment":"development","level":"info","message":"✅ MongoDB connected successfully","service":"medblock-backend","timestamp":"2025-06-27 00:10:50"}
{"environment":"development","level":"info","message":"Database connected successfully","service":"medblock-backend","timestamp":"2025-06-27 00:10:50"}
{"environment":"development","level":"info","message":"Server running on port 3000 in development mode","service":"medblock-backend","timestamp":"2025-06-27 00:10:50"}
{"environment":"development","level":"info","message":"Health check available at http://localhost:3000/health","service":"medblock-backend","timestamp":"2025-06-27 00:10:50"}
{"environment":"development","level":"info","message":"API documentation available at http://localhost:3000/api/v1","service":"medblock-backend","timestamp":"2025-06-27 00:10:50"}
{"environment":"development","level":"info","message":"--- Logger test from server.js ---","service":"medblock-backend","timestamp":"2025-06-27 00:10:58"}
{"environment":"development","level":"info","message":"✅ MongoDB connected successfully","service":"medblock-backend","timestamp":"2025-06-27 00:10:59"}
{"environment":"development","level":"info","message":"Database connected successfully","service":"medblock-backend","timestamp":"2025-06-27 00:10:59"}
{"environment":"development","level":"info","message":"Server running on port 3000 in development mode","service":"medblock-backend","timestamp":"2025-06-27 00:10:59"}
{"environment":"development","level":"info","message":"Health check available at http://localhost:3000/health","service":"medblock-backend","timestamp":"2025-06-27 00:10:59"}
{"environment":"development","level":"info","message":"API documentation available at http://localhost:3000/api/v1","service":"medblock-backend","timestamp":"2025-06-27 00:10:59"}
{"environment":"development","level":"info","message":"--- Logger test from server.js ---","service":"medblock-backend","timestamp":"2025-06-27 00:11:08"}
{"environment":"development","level":"info","message":"✅ MongoDB connected successfully","service":"medblock-backend","timestamp":"2025-06-27 00:11:08"}
{"environment":"development","level":"info","message":"Database connected successfully","service":"medblock-backend","timestamp":"2025-06-27 00:11:08"}
{"environment":"development","level":"info","message":"Server running on port 3000 in development mode","service":"medblock-backend","timestamp":"2025-06-27 00:11:08"}
{"environment":"development","level":"info","message":"Health check available at http://localhost:3000/health","service":"medblock-backend","timestamp":"2025-06-27 00:11:08"}
{"environment":"development","level":"info","message":"API documentation available at http://localhost:3000/api/v1","service":"medblock-backend","timestamp":"2025-06-27 00:11:08"}
{"environment":"development","level":"info","message":"--- Logger test from server.js ---","service":"medblock-backend","timestamp":"2025-06-27 00:11:19"}
{"environment":"development","level":"info","message":"✅ MongoDB connected successfully","service":"medblock-backend","timestamp":"2025-06-27 00:11:19"}
{"environment":"development","level":"info","message":"Database connected successfully","service":"medblock-backend","timestamp":"2025-06-27 00:11:19"}
{"environment":"development","level":"info","message":"Server running on port 3000 in development mode","service":"medblock-backend","timestamp":"2025-06-27 00:11:19"}
{"environment":"development","level":"info","message":"Health check available at http://localhost:3000/health","service":"medblock-backend","timestamp":"2025-06-27 00:11:19"}
{"environment":"development","level":"info","message":"API documentation available at http://localhost:3000/api/v1","service":"medblock-backend","timestamp":"2025-06-27 00:11:19"}
{"environment":"development","level":"info","message":"--- Logger test from server.js ---","service":"medblock-backend","timestamp":"2025-06-27 00:11:33"}
{"environment":"development","level":"info","message":"✅ MongoDB connected successfully","service":"medblock-backend","timestamp":"2025-06-27 00:11:33"}
{"environment":"development","level":"info","message":"Database connected successfully","service":"medblock-backend","timestamp":"2025-06-27 00:11:33"}
{"environment":"development","level":"info","message":"Server running on port 3000 in development mode","service":"medblock-backend","timestamp":"2025-06-27 00:11:33"}
{"environment":"development","level":"info","message":"Health check available at http://localhost:3000/health","service":"medblock-backend","timestamp":"2025-06-27 00:11:33"}
{"environment":"development","level":"info","message":"API documentation available at http://localhost:3000/api/v1","service":"medblock-backend","timestamp":"2025-06-27 00:11:33"}
{"environment":"development","ip":"::1","level":"info","message":"GET /api/v1/patients","service":"medblock-backend","timestamp":"2025-06-27 00:16:47","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"GET","resource":"/api/v1/patients","service":"medblock-backend","timestamp":"2025-06-27 00:16:47","userAgent":"curl/8.5.0","userId":"685da1f425549ec1ae4d9eab"}
{"action":"patients_listed","count":1,"environment":"development","level":"info","limit":20,"message":"AUDIT_LOG","page":1,"resource":"patients","service":"medblock-backend","timestamp":"2025-06-27 00:16:47","userId":"685da1f425549ec1ae4d9eab"}
{"environment":"development","ip":"::1","level":"info","message":"GET /api/v1/patients/658da1f425549ec1ae4d9eab","service":"medblock-backend","timestamp":"2025-06-27 00:18:16","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"GET","resource":"/api/v1/patients/658da1f425549ec1ae4d9eab","service":"medblock-backend","timestamp":"2025-06-27 00:18:16","userAgent":"curl/8.5.0","userId":"685da1f425549ec1ae4d9eab"}
{"environment":"development","ip":"::1","level":"info","message":"DELETE /api/v1/patients/658da1f425549ec1ae4d9eab","service":"medblock-backend","timestamp":"2025-06-27 00:19:08","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"DELETE","resource":"/api/v1/patients/658da1f425549ec1ae4d9eab","service":"medblock-backend","timestamp":"2025-06-27 00:19:08","userAgent":"curl/8.5.0","userId":"685da1f425549ec1ae4d9eab"}
{"environment":"development","ip":"::1","level":"info","message":"GET /api/v1/patients","service":"medblock-backend","timestamp":"2025-06-27 00:19:44","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"GET","resource":"/api/v1/patients","service":"medblock-backend","timestamp":"2025-06-27 00:19:44","userAgent":"curl/8.5.0","userId":"685da1f425549ec1ae4d9eab"}
{"action":"patients_listed","count":1,"environment":"development","level":"info","limit":20,"message":"AUDIT_LOG","page":1,"resource":"patients","service":"medblock-backend","timestamp":"2025-06-27 00:19:44","userId":"685da1f425549ec1ae4d9eab"}
{"environment":"development","ip":"::1","level":"info","message":"GET /api/v1/patients/685da8ba25549ec1ae4d9eba","service":"medblock-backend","timestamp":"2025-06-27 00:21:34","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"GET","resource":"/api/v1/patients/685da8ba25549ec1ae4d9eba","service":"medblock-backend","timestamp":"2025-06-27 00:21:34","userAgent":"curl/8.5.0","userId":"685da1f425549ec1ae4d9eab"}
{"action":"patient_viewed","environment":"development","level":"info","message":"AUDIT_LOG","patientId":"PT-00123","resource":"patient:PT-00123","service":"medblock-backend","timestamp":"2025-06-27 00:21:34","userId":"685da1f425549ec1ae4d9eab"}
{"environment":"development","ip":"::1","level":"info","message":"POST /api/v1/patients","service":"medblock-backend","timestamp":"2025-06-27 00:26:14","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"POST","resource":"/api/v1/patients","service":"medblock-backend","timestamp":"2025-06-27 00:26:14","userAgent":"curl/8.5.0","userId":"685da1f425549ec1ae4d9eab"}
{"environment":"development","ip":"::1","level":"info","message":"PATCH /api/v1/patients/685da8ba25549ec1ae4d9eba","service":"medblock-backend","timestamp":"2025-06-27 00:27:15","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"PATCH","resource":"/api/v1/patients/685da8ba25549ec1ae4d9eba","service":"medblock-backend","timestamp":"2025-06-27 00:27:15","userAgent":"curl/8.5.0","userId":"685da1f425549ec1ae4d9eab"}
{"environment":"development","ip":"::1","level":"info","message":"DELETE /api/v1/patients/685da8ba25549ec1ae4d9eba","service":"medblock-backend","timestamp":"2025-06-27 00:27:52","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"DELETE","resource":"/api/v1/patients/685da8ba25549ec1ae4d9eba","service":"medblock-backend","timestamp":"2025-06-27 00:27:52","userAgent":"curl/8.5.0","userId":"685da1f425549ec1ae4d9eab"}
{"action":"patient_deleted","environment":"development","level":"info","message":"AUDIT_LOG","patientId":"PT-00123","patientName":"Jane Doe","resource":"patient:PT-00123","service":"medblock-backend","timestamp":"2025-06-27 00:27:52","userId":"685da1f425549ec1ae4d9eab"}
{"environment":"development","ip":"::1","level":"info","message":"GET /api/v1/patients/685da8ba25549ec1ae4d9eba","service":"medblock-backend","timestamp":"2025-06-27 00:28:26","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"GET","resource":"/api/v1/patients/685da8ba25549ec1ae4d9eba","service":"medblock-backend","timestamp":"2025-06-27 00:28:26","userAgent":"curl/8.5.0","userId":"685da1f425549ec1ae4d9eab"}
{"action":"patient_viewed","environment":"development","level":"info","message":"AUDIT_LOG","patientId":"PT-00123","resource":"patient:PT-00123","service":"medblock-backend","timestamp":"2025-06-27 00:28:26","userId":"685da1f425549ec1ae4d9eab"}
{"environment":"development","level":"info","message":"--- Logger test from server.js ---","service":"medblock-backend","timestamp":"2025-06-27 00:37:22"}
{"environment":"development","level":"info","message":"✅ MongoDB connected successfully","service":"medblock-backend","timestamp":"2025-06-27 00:37:22"}
{"environment":"development","level":"info","message":"Database connected successfully","service":"medblock-backend","timestamp":"2025-06-27 00:37:22"}
{"environment":"development","level":"info","message":"Server running on port 3000 in development mode","service":"medblock-backend","timestamp":"2025-06-27 00:37:22"}
{"environment":"development","level":"info","message":"Health check available at http://localhost:3000/health","service":"medblock-backend","timestamp":"2025-06-27 00:37:22"}
{"environment":"development","level":"info","message":"API documentation available at http://localhost:3000/api/v1","service":"medblock-backend","timestamp":"2025-06-27 00:37:22"}
{"environment":"development","level":"info","message":"--- Logger test from server.js ---","service":"medblock-backend","timestamp":"2025-06-27 00:37:41"}
{"environment":"development","level":"info","message":"✅ MongoDB connected successfully","service":"medblock-backend","timestamp":"2025-06-27 00:37:42"}
{"environment":"development","level":"info","message":"Database connected successfully","service":"medblock-backend","timestamp":"2025-06-27 00:37:42"}
{"environment":"development","level":"info","message":"Server running on port 3000 in development mode","service":"medblock-backend","timestamp":"2025-06-27 00:37:42"}
{"environment":"development","level":"info","message":"Health check available at http://localhost:3000/health","service":"medblock-backend","timestamp":"2025-06-27 00:37:42"}
{"environment":"development","level":"info","message":"API documentation available at http://localhost:3000/api/v1","service":"medblock-backend","timestamp":"2025-06-27 00:37:42"}
{"environment":"development","level":"info","message":"--- Logger test from server.js ---","service":"medblock-backend","timestamp":"2025-06-27 00:37:59"}
{"environment":"development","level":"info","message":"✅ MongoDB connected successfully","service":"medblock-backend","timestamp":"2025-06-27 00:38:00"}
{"environment":"development","level":"info","message":"Database connected successfully","service":"medblock-backend","timestamp":"2025-06-27 00:38:00"}
{"environment":"development","level":"info","message":"Server running on port 3000 in development mode","service":"medblock-backend","timestamp":"2025-06-27 00:38:00"}
{"environment":"development","level":"info","message":"Health check available at http://localhost:3000/health","service":"medblock-backend","timestamp":"2025-06-27 00:38:00"}
{"environment":"development","level":"info","message":"API documentation available at http://localhost:3000/api/v1","service":"medblock-backend","timestamp":"2025-06-27 00:38:00"}
{"environment":"development","level":"info","message":"--- Logger test from server.js ---","service":"medblock-backend","timestamp":"2025-06-27 00:38:14"}
{"environment":"development","level":"info","message":"✅ MongoDB connected successfully","service":"medblock-backend","timestamp":"2025-06-27 00:38:14"}
{"environment":"development","level":"info","message":"Database connected successfully","service":"medblock-backend","timestamp":"2025-06-27 00:38:14"}
{"environment":"development","level":"info","message":"Server running on port 3000 in development mode","service":"medblock-backend","timestamp":"2025-06-27 00:38:14"}
{"environment":"development","level":"info","message":"Health check available at http://localhost:3000/health","service":"medblock-backend","timestamp":"2025-06-27 00:38:14"}
{"environment":"development","level":"info","message":"API documentation available at http://localhost:3000/api/v1","service":"medblock-backend","timestamp":"2025-06-27 00:38:14"}
{"environment":"development","level":"info","message":"--- Logger test from server.js ---","service":"medblock-backend","timestamp":"2025-06-27 00:38:29"}
{"environment":"development","level":"info","message":"✅ MongoDB connected successfully","service":"medblock-backend","timestamp":"2025-06-27 00:38:30"}
{"environment":"development","level":"info","message":"Database connected successfully","service":"medblock-backend","timestamp":"2025-06-27 00:38:30"}
{"environment":"development","level":"info","message":"Server running on port 3000 in development mode","service":"medblock-backend","timestamp":"2025-06-27 00:38:30"}
{"environment":"development","level":"info","message":"Health check available at http://localhost:3000/health","service":"medblock-backend","timestamp":"2025-06-27 00:38:30"}
{"environment":"development","level":"info","message":"API documentation available at http://localhost:3000/api/v1","service":"medblock-backend","timestamp":"2025-06-27 00:38:30"}
{"environment":"development","level":"info","message":"--- Logger test from server.js ---","service":"medblock-backend","timestamp":"2025-06-27 00:38:42"}
{"environment":"development","level":"info","message":"✅ MongoDB connected successfully","service":"medblock-backend","timestamp":"2025-06-27 00:38:42"}
{"environment":"development","level":"info","message":"Database connected successfully","service":"medblock-backend","timestamp":"2025-06-27 00:38:42"}
{"environment":"development","level":"info","message":"Server running on port 3000 in development mode","service":"medblock-backend","timestamp":"2025-06-27 00:38:42"}
{"environment":"development","level":"info","message":"Health check available at http://localhost:3000/health","service":"medblock-backend","timestamp":"2025-06-27 00:38:42"}
{"environment":"development","level":"info","message":"API documentation available at http://localhost:3000/api/v1","service":"medblock-backend","timestamp":"2025-06-27 00:38:42"}
{"environment":"development","level":"info","message":"--- Logger test from server.js ---","service":"medblock-backend","timestamp":"2025-06-27 00:38:51"}
{"environment":"development","level":"info","message":"✅ MongoDB connected successfully","service":"medblock-backend","timestamp":"2025-06-27 00:38:51"}
{"environment":"development","level":"info","message":"Database connected successfully","service":"medblock-backend","timestamp":"2025-06-27 00:38:51"}
{"environment":"development","level":"info","message":"Server running on port 3000 in development mode","service":"medblock-backend","timestamp":"2025-06-27 00:38:51"}
{"environment":"development","level":"info","message":"Health check available at http://localhost:3000/health","service":"medblock-backend","timestamp":"2025-06-27 00:38:51"}
{"environment":"development","level":"info","message":"API documentation available at http://localhost:3000/api/v1","service":"medblock-backend","timestamp":"2025-06-27 00:38:51"}
{"environment":"development","ip":"::1","level":"info","message":"POST /api/v1/patients","service":"medblock-backend","timestamp":"2025-06-27 00:44:10","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"POST","resource":"/api/v1/patients","service":"medblock-backend","timestamp":"2025-06-27 00:44:10","userAgent":"curl/8.5.0","userId":"685da1f425549ec1ae4d9eab"}
{"environment":"development","ip":"::1","level":"info","message":"POST /api/v1/patients","service":"medblock-backend","timestamp":"2025-06-27 00:45:39","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"POST","resource":"/api/v1/patients","service":"medblock-backend","timestamp":"2025-06-27 00:45:39","userAgent":"curl/8.5.0","userId":"685da1f425549ec1ae4d9eab"}
{"environment":"development","ip":"::1","level":"info","message":"GET /api/v1/patients","service":"medblock-backend","timestamp":"2025-06-27 00:47:25","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"GET","resource":"/api/v1/patients","service":"medblock-backend","timestamp":"2025-06-27 00:47:25","userAgent":"curl/8.5.0","userId":"685da1f425549ec1ae4d9eab"}
{"action":"patients_listed","count":1,"environment":"development","level":"info","limit":20,"message":"AUDIT_LOG","page":1,"resource":"patients","service":"medblock-backend","timestamp":"2025-06-27 00:47:25","userId":"685da1f425549ec1ae4d9eab"}
{"environment":"development","ip":"::1","level":"info","message":"PATCH /api/v1/patients/685da8ba25549ec1ae4d9eba","service":"medblock-backend","timestamp":"2025-06-27 00:48:35","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"PATCH","resource":"/api/v1/patients/685da8ba25549ec1ae4d9eba","service":"medblock-backend","timestamp":"2025-06-27 00:48:35","userAgent":"curl/8.5.0","userId":"685da1f425549ec1ae4d9eab"}
{"action":"patient_updated","environment":"development","level":"info","message":"AUDIT_LOG","patientId":"PT-00123","patientName":"Jane Doe","resource":"patient:PT-00123","service":"medblock-backend","timestamp":"2025-06-27 00:48:35","userId":"685da1f425549ec1ae4d9eab"}
{"environment":"development","ip":"::1","level":"info","message":"DELETE /api/v1/patients/685da8ba25549ec1ae4d9eba","service":"medblock-backend","timestamp":"2025-06-27 00:50:01","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"DELETE","resource":"/api/v1/patients/685da8ba25549ec1ae4d9eba","service":"medblock-backend","timestamp":"2025-06-27 00:50:01","userAgent":"curl/8.5.0","userId":"685da1f425549ec1ae4d9eab"}
{"action":"patient_deleted","environment":"development","level":"info","message":"AUDIT_LOG","patientId":"PT-00123","patientName":"Jane Doe","resource":"patient:PT-00123","service":"medblock-backend","timestamp":"2025-06-27 00:50:01","userId":"685da1f425549ec1ae4d9eab"}
{"environment":"development","ip":"::1","level":"info","message":"POST /api/v1/patients","service":"medblock-backend","timestamp":"2025-06-27 00:56:34","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"POST","resource":"/api/v1/patients","service":"medblock-backend","timestamp":"2025-06-27 00:56:34","userAgent":"curl/8.5.0","userId":"685da1f425549ec1ae4d9eab"}
{"environment":"development","ip":"::1","level":"info","message":"POST /api/v1/patients","service":"medblock-backend","timestamp":"2025-06-27 00:59:34","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"POST","resource":"/api/v1/patients","service":"medblock-backend","timestamp":"2025-06-27 00:59:34","userAgent":"curl/8.5.0","userId":"685da1f425549ec1ae4d9eab"}
{"environment":"development","ip":"::1","level":"info","message":"POST /api/v1/patients","service":"medblock-backend","timestamp":"2025-06-27 01:00:29","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"POST","resource":"/api/v1/patients","service":"medblock-backend","timestamp":"2025-06-27 01:00:29","userAgent":"curl/8.5.0","userId":"685da1f425549ec1ae4d9eab"}
{"environment":"development","ip":"::1","level":"info","message":"POST /api/v1/patients","service":"medblock-backend","timestamp":"2025-06-27 01:00:43","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"POST","resource":"/api/v1/patients","service":"medblock-backend","timestamp":"2025-06-27 01:00:43","userAgent":"curl/8.5.0","userId":"685da1f425549ec1ae4d9eab"}
{"environment":"development","ip":"::1","level":"info","message":"POST /api/v1/auth/login","service":"medblock-backend","timestamp":"2025-06-27 01:08:18","userAgent":"curl/8.5.0"}
{"action":"user_login","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","resource":"auth","service":"medblock-backend","timestamp":"2025-06-27 01:08:18","userAgent":"curl/8.5.0","userId":"685da1f425549ec1ae4d9eab"}
{"environment":"development","ip":"::1","level":"info","message":"POST /api/v1/patients","service":"medblock-backend","timestamp":"2025-06-27 01:10:17","userAgent":"curl/8.5.0"}
{"environment":"development","level":"info","message":"--- Logger test from server.js ---","service":"medblock-backend","timestamp":"2025-06-27 01:10:37"}
{"environment":"development","level":"info","message":"✅ MongoDB connected successfully","service":"medblock-backend","timestamp":"2025-06-27 01:10:37"}
{"environment":"development","level":"info","message":"Database connected successfully","service":"medblock-backend","timestamp":"2025-06-27 01:10:37"}
{"environment":"development","level":"info","message":"Server running on port 3000 in development mode","service":"medblock-backend","timestamp":"2025-06-27 01:10:37"}
{"environment":"development","level":"info","message":"Health check available at http://localhost:3000/health","service":"medblock-backend","timestamp":"2025-06-27 01:10:37"}
{"environment":"development","level":"info","message":"API documentation available at http://localhost:3000/api/v1","service":"medblock-backend","timestamp":"2025-06-27 01:10:37"}
{"environment":"development","ip":"::1","level":"info","message":"POST /api/v1/patients","service":"medblock-backend","timestamp":"2025-06-27 01:10:44","userAgent":"curl/8.5.0"}
{"environment":"development","level":"info","message":"--- Logger test from server.js ---","service":"medblock-backend","timestamp":"2025-06-27 01:10:52"}
{"environment":"development","level":"info","message":"✅ MongoDB connected successfully","service":"medblock-backend","timestamp":"2025-06-27 01:10:53"}
{"environment":"development","level":"info","message":"Database connected successfully","service":"medblock-backend","timestamp":"2025-06-27 01:10:53"}
{"environment":"development","level":"info","message":"Server running on port 3000 in development mode","service":"medblock-backend","timestamp":"2025-06-27 01:10:53"}
{"environment":"development","level":"info","message":"Health check available at http://localhost:3000/health","service":"medblock-backend","timestamp":"2025-06-27 01:10:53"}
{"environment":"development","level":"info","message":"API documentation available at http://localhost:3000/api/v1","service":"medblock-backend","timestamp":"2025-06-27 01:10:53"}
{"environment":"development","ip":"::1","level":"info","message":"POST /api/v1/patients","service":"medblock-backend","timestamp":"2025-06-27 01:12:01","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"POST","resource":"/api/v1/patients","service":"medblock-backend","timestamp":"2025-06-27 01:12:01","userAgent":"curl/8.5.0","userId":"685da1f425549ec1ae4d9eab"}
{"environment":"development","ip":"::1","level":"info","message":"POST /api/v1/patients","service":"medblock-backend","timestamp":"2025-06-27 01:14:43","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"POST","resource":"/api/v1/patients","service":"medblock-backend","timestamp":"2025-06-27 01:14:43","userAgent":"curl/8.5.0","userId":"685da1f425549ec1ae4d9eab"}
{"_message":"Patient validation failed","environment":"development","errors":{"address.city":{"kind":"required","message":"Path `address.city` is required.","name":"ValidatorError","path":"address.city","properties":{"message":"Path `address.city` is required.","path":"address.city","type":"required"}},"address.street":{"kind":"required","message":"Path `address.street` is required.","name":"ValidatorError","path":"address.street","properties":{"message":"Path `address.street` is required.","path":"address.street","type":"required"}},"emergencyContact.phoneNumber":{"kind":"required","message":"Path `emergencyContact.phoneNumber` is required.","name":"ValidatorError","path":"emergencyContact.phoneNumber","properties":{"message":"Path `emergencyContact.phoneNumber` is required.","path":"emergencyContact.phoneNumber","type":"required"}},"emergencyContact.relationship":{"kind":"enum","message":"`wife` is not a valid enum value for path `emergencyContact.relationship`.","name":"ValidatorError","path":"emergencyContact.relationship","properties":{"enumValues":["spouse","parent","child","sibling","friend","other"],"message":"`wife` is not a valid enum value for path `emergencyContact.relationship`.","path":"emergencyContact.relationship","type":"enum","value":"wife"},"value":"wife"},"patientId":{"kind":"required","message":"Path `patientId` is required.","name":"ValidatorError","path":"patientId","properties":{"message":"Path `patientId` is required.","path":"patientId","type":"required"}}},"level":"error","message":"Create patient failed: Patient validation failed: emergencyContact.phoneNumber: Path `emergencyContact.phoneNumber` is required., emergencyContact.relationship: `wife` is not a valid enum value for path `emergencyContact.relationship`., address.city: Path `address.city` is required., address.street: Path `address.street` is required., patientId: Path `patientId` is required.","service":"medblock-backend","stack":"ValidationError: Patient validation failed: emergencyContact.phoneNumber: Path `emergencyContact.phoneNumber` is required., emergencyContact.relationship: `wife` is not a valid enum value for path `emergencyContact.relationship`., address.city: Path `address.city` is required., address.street: Path `address.street` is required., patientId: Path `patientId` is required.\n    at Document.invalidate (/home/josva/Desktop/MedBlock/node_modules/mongoose/lib/document.js:3352:32)\n    at /home/josva/Desktop/MedBlock/node_modules/mongoose/lib/document.js:3113:17\n    at /home/josva/Desktop/MedBlock/node_modules/mongoose/lib/schemaType.js:1407:9\n    at process.processTicksAndRejections (node:internal/process/task_queues:85:11)","timestamp":"2025-06-27 01:14:43"}
{"environment":"development","ip":"::1","level":"info","message":"POST /api/v1/patients","service":"medblock-backend","timestamp":"2025-06-27 01:18:33","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"POST","resource":"/api/v1/patients","service":"medblock-backend","timestamp":"2025-06-27 01:18:33","userAgent":"curl/8.5.0","userId":"685da1f425549ec1ae4d9eab"}
{"action":"patient_created","environment":"development","level":"info","message":"AUDIT_LOG","patientId":"P-0001","patientName":"James Otieno","resource":"patient:P-0001","service":"medblock-backend","timestamp":"2025-06-27 01:18:33","userId":"685da1f425549ec1ae4d9eab"}
{"environment":"development","ip":"::1","level":"info","message":"POST /api/v1/patients","service":"medblock-backend","timestamp":"2025-06-27 01:19:18","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"POST","resource":"/api/v1/patients","service":"medblock-backend","timestamp":"2025-06-27 01:19:18","userAgent":"curl/8.5.0","userId":"685da1f425549ec1ae4d9eab"}
{"action":"patient_created","environment":"development","level":"info","message":"AUDIT_LOG","patientId":"P-0002","patientName":"Grace Mwende","resource":"patient:P-0002","service":"medblock-backend","timestamp":"2025-06-27 01:19:18","userId":"685da1f425549ec1ae4d9eab"}
{"environment":"development","ip":"::1","level":"info","message":"POST /api/v1/patients","service":"medblock-backend","timestamp":"2025-06-27 01:19:33","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"POST","resource":"/api/v1/patients","service":"medblock-backend","timestamp":"2025-06-27 01:19:33","userAgent":"curl/8.5.0","userId":"685da1f425549ec1ae4d9eab"}
{"action":"patient_created","environment":"development","level":"info","message":"AUDIT_LOG","patientId":"P-0003","patientName":"Brian Njoroge","resource":"patient:P-0003","service":"medblock-backend","timestamp":"2025-06-27 01:19:33","userId":"685da1f425549ec1ae4d9eab"}
{"environment":"development","ip":"::1","level":"info","message":"POST /api/v1/patients","service":"medblock-backend","timestamp":"2025-06-27 01:19:49","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"POST","resource":"/api/v1/patients","service":"medblock-backend","timestamp":"2025-06-27 01:19:49","userAgent":"curl/8.5.0","userId":"685da1f425549ec1ae4d9eab"}
{"action":"patient_created","environment":"development","level":"info","message":"AUDIT_LOG","patientId":"P-0004","patientName":"Amina Yusuf","resource":"patient:P-0004","service":"medblock-backend","timestamp":"2025-06-27 01:19:49","userId":"685da1f425549ec1ae4d9eab"}
{"environment":"development","ip":"::1","level":"info","message":"POST /api/v1/patients","service":"medblock-backend","timestamp":"2025-06-27 01:20:04","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"POST","resource":"/api/v1/patients","service":"medblock-backend","timestamp":"2025-06-27 01:20:04","userAgent":"curl/8.5.0","userId":"685da1f425549ec1ae4d9eab"}
{"action":"patient_created","environment":"development","level":"info","message":"AUDIT_LOG","patientId":"P-0005","patientName":"Kelvin Kiprotich","resource":"patient:P-0005","service":"medblock-backend","timestamp":"2025-06-27 01:20:04","userId":"685da1f425549ec1ae4d9eab"}
{"environment":"development","ip":"::1","level":"info","message":"GET /api/v1/patients","service":"medblock-backend","timestamp":"2025-06-27 01:21:45","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"GET","resource":"/api/v1/patients","service":"medblock-backend","timestamp":"2025-06-27 01:21:45","userAgent":"curl/8.5.0","userId":"685da1f425549ec1ae4d9eab"}
{"action":"patients_listed","count":6,"environment":"development","level":"info","limit":20,"message":"AUDIT_LOG","page":1,"resource":"patients","service":"medblock-backend","timestamp":"2025-06-27 01:21:46","userId":"685da1f425549ec1ae4d9eab"}
{"environment":"development","ip":"::1","level":"info","message":"GET /api/v1/patients/685dc7399aaaebdbf35da64b","service":"medblock-backend","timestamp":"2025-06-27 01:22:53","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"GET","resource":"/api/v1/patients/685dc7399aaaebdbf35da64b","service":"medblock-backend","timestamp":"2025-06-27 01:22:53","userAgent":"curl/8.5.0","userId":"685da1f425549ec1ae4d9eab"}
{"action":"patient_viewed","environment":"development","level":"info","message":"AUDIT_LOG","patientId":"P-0001","resource":"patient:P-0001","service":"medblock-backend","timestamp":"2025-06-27 01:22:53","userId":"685da1f425549ec1ae4d9eab"}
{"environment":"development","ip":"::1","level":"info","message":"PATCH /api/v1/patients/685dc7399aaaebdbf35da64b","service":"medblock-backend","timestamp":"2025-06-27 01:23:43","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"PATCH","resource":"/api/v1/patients/685dc7399aaaebdbf35da64b","service":"medblock-backend","timestamp":"2025-06-27 01:23:43","userAgent":"curl/8.5.0","userId":"685da1f425549ec1ae4d9eab"}
{"action":"patient_updated","environment":"development","level":"info","message":"AUDIT_LOG","patientId":"P-0001","patientName":"James Otieno","resource":"patient:P-0001","service":"medblock-backend","timestamp":"2025-06-27 01:23:43","userId":"685da1f425549ec1ae4d9eab"}
{"environment":"development","ip":"::1","level":"info","message":"DELETE /api/v1/patients/685dc7399aaaebdbf35da64b","service":"medblock-backend","timestamp":"2025-06-27 01:25:42","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"DELETE","resource":"/api/v1/patients/685dc7399aaaebdbf35da64b","service":"medblock-backend","timestamp":"2025-06-27 01:25:42","userAgent":"curl/8.5.0","userId":"685da1f425549ec1ae4d9eab"}
{"action":"patient_deleted","environment":"development","level":"info","message":"AUDIT_LOG","patientId":"P-0001","patientName":"James Otieno","resource":"patient:P-0001","service":"medblock-backend","timestamp":"2025-06-27 01:25:42","userId":"685da1f425549ec1ae4d9eab"}
{"environment":"development","ip":"::1","level":"info","message":"GET /api/v1/patients/685dc7399aaaebdbf35da64b","service":"medblock-backend","timestamp":"2025-06-27 01:31:08","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"GET","resource":"/api/v1/patients/685dc7399aaaebdbf35da64b","service":"medblock-backend","timestamp":"2025-06-27 01:31:08","userAgent":"curl/8.5.0","userId":"685da1f425549ec1ae4d9eab"}
{"action":"patient_viewed","environment":"development","level":"info","message":"AUDIT_LOG","patientId":"P-0001","resource":"patient:P-0001","service":"medblock-backend","timestamp":"2025-06-27 01:31:08","userId":"685da1f425549ec1ae4d9eab"}
{"environment":"development","ip":"::1","level":"info","message":"DELETE /api/v1/patients/685dc7399aaaebdbf35da64b","service":"medblock-backend","timestamp":"2025-06-27 01:31:39","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"DELETE","resource":"/api/v1/patients/685dc7399aaaebdbf35da64b","service":"medblock-backend","timestamp":"2025-06-27 01:31:39","userAgent":"curl/8.5.0","userId":"685da1f425549ec1ae4d9eab"}
{"action":"patient_deleted","environment":"development","level":"info","message":"AUDIT_LOG","patientId":"P-0001","patientName":"James Otieno","resource":"patient:P-0001","service":"medblock-backend","timestamp":"2025-06-27 01:31:39","userId":"685da1f425549ec1ae4d9eab"}
{"environment":"development","ip":"::1","level":"info","message":"DELETE /api/v1/patients/invalid-id-format","service":"medblock-backend","timestamp":"2025-06-27 01:32:24","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"DELETE","resource":"/api/v1/patients/invalid-id-format","service":"medblock-backend","timestamp":"2025-06-27 01:32:24","userAgent":"curl/8.5.0","userId":"685da1f425549ec1ae4d9eab"}
{"environment":"development","kind":"ObjectId","level":"error","message":"Delete patient failed: Cast to ObjectId failed for value \"invalid-id-format\" (type string) at path \"_id\" for model \"Patient\"","path":"_id","reason":{},"service":"medblock-backend","stack":"CastError: Cast to ObjectId failed for value \"invalid-id-format\" (type string) at path \"_id\" for model \"Patient\"\n    at SchemaObjectId.cast (/home/josva/Desktop/MedBlock/node_modules/mongoose/lib/schema/objectId.js:251:11)\n    at SchemaType.applySetters (/home/josva/Desktop/MedBlock/node_modules/mongoose/lib/schemaType.js:1255:12)\n    at SchemaType.castForQuery (/home/josva/Desktop/MedBlock/node_modules/mongoose/lib/schemaType.js:1673:17)\n    at cast (/home/josva/Desktop/MedBlock/node_modules/mongoose/lib/cast.js:390:32)\n    at cast (/home/josva/Desktop/MedBlock/node_modules/mongoose/lib/cast.js:76:20)\n    at Query.cast (/home/josva/Desktop/MedBlock/node_modules/mongoose/lib/query.js:5055:12)\n    at Query._castConditions (/home/josva/Desktop/MedBlock/node_modules/mongoose/lib/query.js:2351:10)\n    at model.Query._findOne (/home/josva/Desktop/MedBlock/node_modules/mongoose/lib/query.js:2674:8)\n    at model.Query.exec (/home/josva/Desktop/MedBlock/node_modules/mongoose/lib/query.js:4604:80)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","stringValue":"\"invalid-id-format\"","timestamp":"2025-06-27 01:32:24","value":"invalid-id-format","valueType":"string"}
{"environment":"development","ip":"::1","level":"info","message":"DELETE /api/v1/patients/685dc7399aaaebdbf35da64b","service":"medblock-backend","timestamp":"2025-06-27 01:32:52","userAgent":"curl/8.5.0"}
{"environment":"development","level":"error","message":"Authentication error: logger.security is not a function","service":"medblock-backend","stack":"TypeError: logger.security is not a function\n    at authenticateToken (/home/josva/Desktop/MedBlock/src/middleware/auth.js:14:14)\n    at Layer.handle [as handle_request] (/home/josva/Desktop/MedBlock/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/home/josva/Desktop/MedBlock/node_modules/express/lib/router/index.js:328:13)\n    at /home/josva/Desktop/MedBlock/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/home/josva/Desktop/MedBlock/node_modules/express/lib/router/index.js:346:12)\n    at next (/home/josva/Desktop/MedBlock/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/home/josva/Desktop/MedBlock/node_modules/express/lib/router/index.js:175:3)\n    at router (/home/josva/Desktop/MedBlock/node_modules/express/lib/router/index.js:47:12)\n    at Layer.handle [as handle_request] (/home/josva/Desktop/MedBlock/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/home/josva/Desktop/MedBlock/node_modules/express/lib/router/index.js:328:13)","timestamp":"2025-06-27 01:32:52"}
{"environment":"development","ip":"::1","level":"info","message":"GET /api/v1/patients","service":"medblock-backend","timestamp":"2025-06-27 01:39:43","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"GET","resource":"/api/v1/patients","service":"medblock-backend","timestamp":"2025-06-27 01:39:43","userAgent":"curl/8.5.0","userId":"685da1f425549ec1ae4d9eab"}
{"action":"patients_listed","count":6,"environment":"development","level":"info","limit":20,"message":"AUDIT_LOG","page":1,"resource":"patients","service":"medblock-backend","timestamp":"2025-06-27 01:39:43","userId":"685da1f425549ec1ae4d9eab"}
{"environment":"development","ip":"::1","level":"info","message":"DELETE /api/v1/patients/685dc7399aaaebdbf35da64b","service":"medblock-backend","timestamp":"2025-06-27 01:39:58","userAgent":"curl/8.5.0"}
{"environment":"development","level":"error","message":"Authentication error: logger.security is not a function","service":"medblock-backend","stack":"TypeError: logger.security is not a function\n    at authenticateToken (/home/josva/Desktop/MedBlock/src/middleware/auth.js:14:14)\n    at Layer.handle [as handle_request] (/home/josva/Desktop/MedBlock/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/home/josva/Desktop/MedBlock/node_modules/express/lib/router/index.js:328:13)\n    at /home/josva/Desktop/MedBlock/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/home/josva/Desktop/MedBlock/node_modules/express/lib/router/index.js:346:12)\n    at next (/home/josva/Desktop/MedBlock/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/home/josva/Desktop/MedBlock/node_modules/express/lib/router/index.js:175:3)\n    at router (/home/josva/Desktop/MedBlock/node_modules/express/lib/router/index.js:47:12)\n    at Layer.handle [as handle_request] (/home/josva/Desktop/MedBlock/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/home/josva/Desktop/MedBlock/node_modules/express/lib/router/index.js:328:13)","timestamp":"2025-06-27 01:39:58"}
{"environment":"development","ip":"::1","level":"info","message":"GET /api/v1/patients","service":"medblock-backend","timestamp":"2025-06-27 01:40:55","userAgent":"curl/8.5.0"}
{"environment":"development","level":"info","message":"--- Logger test from server.js ---","service":"medblock-backend","timestamp":"2025-06-27 01:41:05"}
{"environment":"development","level":"info","message":"✅ MongoDB connected successfully","service":"medblock-backend","timestamp":"2025-06-27 01:41:05"}
{"environment":"development","level":"info","message":"Database connected successfully","service":"medblock-backend","timestamp":"2025-06-27 01:41:05"}
{"environment":"development","level":"info","message":"Server running on port 3000 in development mode","service":"medblock-backend","timestamp":"2025-06-27 01:41:05"}
{"environment":"development","level":"info","message":"Health check available at http://localhost:3000/health","service":"medblock-backend","timestamp":"2025-06-27 01:41:05"}
{"environment":"development","level":"info","message":"API documentation available at http://localhost:3000/api/v1","service":"medblock-backend","timestamp":"2025-06-27 01:41:05"}
{"environment":"development","ip":"::1","level":"info","message":"GET /api/v1/patients","service":"medblock-backend","timestamp":"2025-06-27 01:41:20","userAgent":"curl/8.5.0"}
{"environment":"development","level":"info","message":"--- Logger test from server.js ---","service":"medblock-backend","timestamp":"2025-06-27 01:48:12"}
{"environment":"development","level":"info","message":"✅ MongoDB connected successfully","service":"medblock-backend","timestamp":"2025-06-27 01:48:12"}
{"environment":"development","level":"info","message":"Database connected successfully","service":"medblock-backend","timestamp":"2025-06-27 01:48:12"}
{"environment":"development","level":"info","message":"Server running on port 3000 in development mode","service":"medblock-backend","timestamp":"2025-06-27 01:48:12"}
{"environment":"development","level":"info","message":"Health check available at http://localhost:3000/health","service":"medblock-backend","timestamp":"2025-06-27 01:48:12"}
{"environment":"development","level":"info","message":"API documentation available at http://localhost:3000/api/v1","service":"medblock-backend","timestamp":"2025-06-27 01:48:12"}
{"environment":"development","ip":"::1","level":"info","message":"DELETE /api/v1/patients/685dc7399aaaebdbf35da64b","service":"medblock-backend","timestamp":"2025-06-27 01:48:22","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"DELETE","resource":"/api/v1/patients/685dc7399aaaebdbf35da64b","service":"medblock-backend","timestamp":"2025-06-27 01:48:22","userAgent":"curl/8.5.0","userId":"685da1f425549ec1ae4d9eab"}
{"action":"patient_deleted","environment":"development","level":"info","message":"AUDIT_LOG","patientId":"P-0001","patientName":"James Otieno","resource":"patient:P-0001","service":"medblock-backend","timestamp":"2025-06-27 01:48:22","userId":"685da1f425549ec1ae4d9eab"}
{"environment":"development","ip":"::1","level":"info","message":"DELETE /api/v1/patients/invalid-id","service":"medblock-backend","timestamp":"2025-06-27 01:50:55","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"DELETE","resource":"/api/v1/patients/invalid-id","service":"medblock-backend","timestamp":"2025-06-27 01:50:55","userAgent":"curl/8.5.0","userId":"685da1f425549ec1ae4d9eab"}
{"environment":"development","kind":"ObjectId","level":"error","message":"Delete patient failed: Cast to ObjectId failed for value \"invalid-id\" (type string) at path \"_id\" for model \"Patient\"","path":"_id","reason":{},"service":"medblock-backend","stack":"CastError: Cast to ObjectId failed for value \"invalid-id\" (type string) at path \"_id\" for model \"Patient\"\n    at SchemaObjectId.cast (/home/josva/Desktop/MedBlock/node_modules/mongoose/lib/schema/objectId.js:251:11)\n    at SchemaType.applySetters (/home/josva/Desktop/MedBlock/node_modules/mongoose/lib/schemaType.js:1255:12)\n    at SchemaType.castForQuery (/home/josva/Desktop/MedBlock/node_modules/mongoose/lib/schemaType.js:1673:17)\n    at cast (/home/josva/Desktop/MedBlock/node_modules/mongoose/lib/cast.js:390:32)\n    at cast (/home/josva/Desktop/MedBlock/node_modules/mongoose/lib/cast.js:76:20)\n    at Query.cast (/home/josva/Desktop/MedBlock/node_modules/mongoose/lib/query.js:5055:12)\n    at Query._castConditions (/home/josva/Desktop/MedBlock/node_modules/mongoose/lib/query.js:2351:10)\n    at model.Query._findOne (/home/josva/Desktop/MedBlock/node_modules/mongoose/lib/query.js:2674:8)\n    at model.Query.exec (/home/josva/Desktop/MedBlock/node_modules/mongoose/lib/query.js:4604:80)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","stringValue":"\"invalid-id\"","timestamp":"2025-06-27 01:50:55","value":"invalid-id","valueType":"string"}
{"environment":"development","ip":"::1","level":"info","message":"DELETE /api/v1/patients/000000000000000000000000","service":"medblock-backend","timestamp":"2025-06-27 01:51:36","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"DELETE","resource":"/api/v1/patients/000000000000000000000000","service":"medblock-backend","timestamp":"2025-06-27 01:51:36","userAgent":"curl/8.5.0","userId":"685da1f425549ec1ae4d9eab"}
{"environment":"development","ip":"::1","level":"info","message":"DELETE /api/v1/patients/685dc7399aaaebdbf35da64b","service":"medblock-backend","timestamp":"2025-06-27 01:51:54","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"DELETE","resource":"/api/v1/patients/685dc7399aaaebdbf35da64b","service":"medblock-backend","timestamp":"2025-06-27 01:51:54","userAgent":"curl/8.5.0","userId":"685da1f425549ec1ae4d9eab"}
{"action":"patient_deleted","environment":"development","level":"info","message":"AUDIT_LOG","patientId":"P-0001","patientName":"James Otieno","resource":"patient:P-0001","service":"medblock-backend","timestamp":"2025-06-27 01:51:54","userId":"685da1f425549ec1ae4d9eab"}
{"environment":"development","ip":"::1","level":"info","message":"DELETE /api/v1/patients/685dc7759aaaebdbf35da653","service":"medblock-backend","timestamp":"2025-06-27 01:52:26","userAgent":"curl/8.5.0"}
{"environment":"development","level":"error","message":"Authentication error: logger.security is not a function","service":"medblock-backend","stack":"TypeError: logger.security is not a function\n    at authenticateToken (/home/josva/Desktop/MedBlock/src/middleware/auth.js:14:14)\n    at Layer.handle [as handle_request] (/home/josva/Desktop/MedBlock/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/home/josva/Desktop/MedBlock/node_modules/express/lib/router/index.js:328:13)\n    at /home/josva/Desktop/MedBlock/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/home/josva/Desktop/MedBlock/node_modules/express/lib/router/index.js:346:12)\n    at next (/home/josva/Desktop/MedBlock/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/home/josva/Desktop/MedBlock/node_modules/express/lib/router/index.js:175:3)\n    at router (/home/josva/Desktop/MedBlock/node_modules/express/lib/router/index.js:47:12)\n    at Layer.handle [as handle_request] (/home/josva/Desktop/MedBlock/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/home/josva/Desktop/MedBlock/node_modules/express/lib/router/index.js:328:13)","timestamp":"2025-06-27 01:52:26"}
{"environment":"development","ip":"::1","level":"info","message":"GET /api/v1/patients/685dc7399aaaebdbf35da64b","service":"medblock-backend","timestamp":"2025-06-27 01:57:03","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"GET","resource":"/api/v1/patients/685dc7399aaaebdbf35da64b","service":"medblock-backend","timestamp":"2025-06-27 01:57:03","userAgent":"curl/8.5.0","userId":"685da1f425549ec1ae4d9eab"}
{"action":"patient_viewed","environment":"development","level":"info","message":"AUDIT_LOG","patientId":"P-0001","resource":"patient:P-0001","service":"medblock-backend","timestamp":"2025-06-27 01:57:03","userId":"685da1f425549ec1ae4d9eab"}
{"environment":"development","ip":"::1","level":"info","message":"DELETE /api/v1/patients/685dc7759aaaebdbf35da653","service":"medblock-backend","timestamp":"2025-06-27 01:59:48","userAgent":"curl/8.5.0"}
{"environment":"development","level":"info","message":"--- Logger test from server.js ---","service":"medblock-backend","timestamp":"2025-06-27 02:04:01"}
{"environment":"development","level":"info","message":"✅ MongoDB connected successfully","service":"medblock-backend","timestamp":"2025-06-27 02:04:01"}
{"environment":"development","level":"info","message":"Database connected successfully","service":"medblock-backend","timestamp":"2025-06-27 02:04:01"}
{"environment":"development","level":"info","message":"Server running on port 3000 in development mode","service":"medblock-backend","timestamp":"2025-06-27 02:04:01"}
{"environment":"development","level":"info","message":"Health check available at http://localhost:3000/health","service":"medblock-backend","timestamp":"2025-06-27 02:04:01"}
{"environment":"development","level":"info","message":"API documentation available at http://localhost:3000/api/v1","service":"medblock-backend","timestamp":"2025-06-27 02:04:01"}
{"environment":"development","ip":"::1","level":"info","message":"DELETE /api/v1/patients/bulk","service":"medblock-backend","timestamp":"2025-06-27 02:04:09","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"DELETE","resource":"/api/v1/patients/bulk","service":"medblock-backend","timestamp":"2025-06-27 02:04:09","userAgent":"curl/8.5.0","userId":"685da1f425549ec1ae4d9eab"}
{"environment":"development","kind":"ObjectId","level":"error","message":"Delete patient failed: Cast to ObjectId failed for value \"bulk\" (type string) at path \"_id\" for model \"Patient\"","path":"_id","reason":{},"service":"medblock-backend","stack":"CastError: Cast to ObjectId failed for value \"bulk\" (type string) at path \"_id\" for model \"Patient\"\n    at SchemaObjectId.cast (/home/josva/Desktop/MedBlock/node_modules/mongoose/lib/schema/objectId.js:251:11)\n    at SchemaType.applySetters (/home/josva/Desktop/MedBlock/node_modules/mongoose/lib/schemaType.js:1255:12)\n    at SchemaType.castForQuery (/home/josva/Desktop/MedBlock/node_modules/mongoose/lib/schemaType.js:1673:17)\n    at cast (/home/josva/Desktop/MedBlock/node_modules/mongoose/lib/cast.js:390:32)\n    at cast (/home/josva/Desktop/MedBlock/node_modules/mongoose/lib/cast.js:76:20)\n    at Query.cast (/home/josva/Desktop/MedBlock/node_modules/mongoose/lib/query.js:5055:12)\n    at Query._castConditions (/home/josva/Desktop/MedBlock/node_modules/mongoose/lib/query.js:2351:10)\n    at model.Query._findOne (/home/josva/Desktop/MedBlock/node_modules/mongoose/lib/query.js:2674:8)\n    at model.Query.exec (/home/josva/Desktop/MedBlock/node_modules/mongoose/lib/query.js:4604:80)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","stringValue":"\"bulk\"","timestamp":"2025-06-27 02:04:09","value":"bulk","valueType":"string"}
{"environment":"development","level":"info","message":"--- Logger test from server.js ---","service":"medblock-backend","timestamp":"2025-06-27 02:13:41"}
{"environment":"development","level":"info","message":"✅ MongoDB connected successfully","service":"medblock-backend","timestamp":"2025-06-27 02:13:42"}
{"environment":"development","level":"info","message":"Database connected successfully","service":"medblock-backend","timestamp":"2025-06-27 02:13:42"}
{"environment":"development","level":"info","message":"Server running on port 3000 in development mode","service":"medblock-backend","timestamp":"2025-06-27 02:13:42"}
{"environment":"development","level":"info","message":"Health check available at http://localhost:3000/health","service":"medblock-backend","timestamp":"2025-06-27 02:13:42"}
{"environment":"development","level":"info","message":"API documentation available at http://localhost:3000/api/v1","service":"medblock-backend","timestamp":"2025-06-27 02:13:42"}
{"environment":"development","level":"info","message":"--- Logger test from server.js ---","service":"medblock-backend","timestamp":"2025-06-27 02:14:21"}
{"environment":"development","level":"info","message":"✅ MongoDB connected successfully","service":"medblock-backend","timestamp":"2025-06-27 02:14:21"}
{"environment":"development","level":"info","message":"Database connected successfully","service":"medblock-backend","timestamp":"2025-06-27 02:14:21"}
{"environment":"development","level":"info","message":"Server running on port 3000 in development mode","service":"medblock-backend","timestamp":"2025-06-27 02:14:21"}
{"environment":"development","level":"info","message":"Health check available at http://localhost:3000/health","service":"medblock-backend","timestamp":"2025-06-27 02:14:21"}
{"environment":"development","level":"info","message":"API documentation available at http://localhost:3000/api/v1","service":"medblock-backend","timestamp":"2025-06-27 02:14:21"}
{"environment":"development","ip":"::1","level":"info","message":"DELETE /api/v1/patients/invalid-id","service":"medblock-backend","timestamp":"2025-06-27 02:19:54","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"DELETE","resource":"/api/v1/patients/invalid-id","service":"medblock-backend","timestamp":"2025-06-27 02:19:54","userAgent":"curl/8.5.0","userId":"685da1f425549ec1ae4d9eab"}
{"environment":"development","kind":"ObjectId","level":"error","message":"Delete patient failed: Cast to ObjectId failed for value \"invalid-id\" (type string) at path \"_id\" for model \"Patient\"","path":"_id","reason":{},"service":"medblock-backend","stack":"CastError: Cast to ObjectId failed for value \"invalid-id\" (type string) at path \"_id\" for model \"Patient\"\n    at SchemaObjectId.cast (/home/josva/Desktop/MedBlock/node_modules/mongoose/lib/schema/objectId.js:251:11)\n    at SchemaType.applySetters (/home/josva/Desktop/MedBlock/node_modules/mongoose/lib/schemaType.js:1255:12)\n    at SchemaType.castForQuery (/home/josva/Desktop/MedBlock/node_modules/mongoose/lib/schemaType.js:1673:17)\n    at cast (/home/josva/Desktop/MedBlock/node_modules/mongoose/lib/cast.js:390:32)\n    at cast (/home/josva/Desktop/MedBlock/node_modules/mongoose/lib/cast.js:76:20)\n    at Query.cast (/home/josva/Desktop/MedBlock/node_modules/mongoose/lib/query.js:5055:12)\n    at Query._castConditions (/home/josva/Desktop/MedBlock/node_modules/mongoose/lib/query.js:2351:10)\n    at model.Query._findOne (/home/josva/Desktop/MedBlock/node_modules/mongoose/lib/query.js:2674:8)\n    at model.Query.exec (/home/josva/Desktop/MedBlock/node_modules/mongoose/lib/query.js:4604:80)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","stringValue":"\"invalid-id\"","timestamp":"2025-06-27 02:19:54","value":"invalid-id","valueType":"string"}
{"environment":"development","level":"info","message":"--- Logger test from server.js ---","service":"medblock-backend","timestamp":"2025-06-27 02:26:10"}
{"environment":"development","level":"info","message":"✅ MongoDB connected successfully","service":"medblock-backend","timestamp":"2025-06-27 02:26:10"}
{"environment":"development","level":"info","message":"Database connected successfully","service":"medblock-backend","timestamp":"2025-06-27 02:26:10"}
{"environment":"development","level":"info","message":"Server running on port 3000 in development mode","service":"medblock-backend","timestamp":"2025-06-27 02:26:10"}
{"environment":"development","level":"info","message":"Health check available at http://localhost:3000/health","service":"medblock-backend","timestamp":"2025-06-27 02:26:10"}
{"environment":"development","level":"info","message":"API documentation available at http://localhost:3000/api/v1","service":"medblock-backend","timestamp":"2025-06-27 02:26:10"}
{"environment":"development","level":"info","message":"--- Logger test from server.js ---","service":"medblock-backend","timestamp":"2025-06-27 02:26:35"}
{"environment":"development","level":"info","message":"✅ MongoDB connected successfully","service":"medblock-backend","timestamp":"2025-06-27 02:26:35"}
{"environment":"development","level":"info","message":"Database connected successfully","service":"medblock-backend","timestamp":"2025-06-27 02:26:35"}
{"environment":"development","level":"info","message":"Server running on port 3000 in development mode","service":"medblock-backend","timestamp":"2025-06-27 02:26:35"}
{"environment":"development","level":"info","message":"Health check available at http://localhost:3000/health","service":"medblock-backend","timestamp":"2025-06-27 02:26:35"}
{"environment":"development","level":"info","message":"API documentation available at http://localhost:3000/api/v1","service":"medblock-backend","timestamp":"2025-06-27 02:26:35"}
{"environment":"development","level":"info","message":"--- Logger test from server.js ---","service":"medblock-backend","timestamp":"2025-06-27 02:26:57"}
{"environment":"development","level":"info","message":"✅ MongoDB connected successfully","service":"medblock-backend","timestamp":"2025-06-27 02:26:57"}
{"environment":"development","level":"info","message":"Database connected successfully","service":"medblock-backend","timestamp":"2025-06-27 02:26:57"}
{"environment":"development","level":"info","message":"Server running on port 3000 in development mode","service":"medblock-backend","timestamp":"2025-06-27 02:26:57"}
{"environment":"development","level":"info","message":"Health check available at http://localhost:3000/health","service":"medblock-backend","timestamp":"2025-06-27 02:26:57"}
{"environment":"development","level":"info","message":"API documentation available at http://localhost:3000/api/v1","service":"medblock-backend","timestamp":"2025-06-27 02:26:57"}
{"environment":"development","level":"info","message":"--- Logger test from server.js ---","service":"medblock-backend","timestamp":"2025-06-27 02:27:22"}
{"environment":"development","level":"info","message":"✅ MongoDB connected successfully","service":"medblock-backend","timestamp":"2025-06-27 02:27:23"}
{"environment":"development","level":"info","message":"Database connected successfully","service":"medblock-backend","timestamp":"2025-06-27 02:27:23"}
{"environment":"development","level":"info","message":"Server running on port 3000 in development mode","service":"medblock-backend","timestamp":"2025-06-27 02:27:23"}
{"environment":"development","level":"info","message":"Health check available at http://localhost:3000/health","service":"medblock-backend","timestamp":"2025-06-27 02:27:23"}
{"environment":"development","level":"info","message":"API documentation available at http://localhost:3000/api/v1","service":"medblock-backend","timestamp":"2025-06-27 02:27:23"}
{"environment":"development","level":"info","message":"--- Logger test from server.js ---","service":"medblock-backend","timestamp":"2025-06-27 02:27:46"}
{"environment":"development","level":"info","message":"✅ MongoDB connected successfully","service":"medblock-backend","timestamp":"2025-06-27 02:27:47"}
{"environment":"development","level":"info","message":"Database connected successfully","service":"medblock-backend","timestamp":"2025-06-27 02:27:47"}
{"environment":"development","level":"info","message":"Server running on port 3000 in development mode","service":"medblock-backend","timestamp":"2025-06-27 02:27:47"}
{"environment":"development","level":"info","message":"Health check available at http://localhost:3000/health","service":"medblock-backend","timestamp":"2025-06-27 02:27:47"}
{"environment":"development","level":"info","message":"API documentation available at http://localhost:3000/api/v1","service":"medblock-backend","timestamp":"2025-06-27 02:27:47"}
{"environment":"development","level":"info","message":"--- Logger test from server.js ---","service":"medblock-backend","timestamp":"2025-06-27 02:28:07"}
{"environment":"development","level":"info","message":"✅ MongoDB connected successfully","service":"medblock-backend","timestamp":"2025-06-27 02:28:07"}
{"environment":"development","level":"info","message":"Database connected successfully","service":"medblock-backend","timestamp":"2025-06-27 02:28:07"}
{"environment":"development","level":"info","message":"Server running on port 3000 in development mode","service":"medblock-backend","timestamp":"2025-06-27 02:28:07"}
{"environment":"development","level":"info","message":"Health check available at http://localhost:3000/health","service":"medblock-backend","timestamp":"2025-06-27 02:28:07"}
{"environment":"development","level":"info","message":"API documentation available at http://localhost:3000/api/v1","service":"medblock-backend","timestamp":"2025-06-27 02:28:07"}
{"environment":"development","level":"info","message":"--- Logger test from server.js ---","service":"medblock-backend","timestamp":"2025-06-27 02:28:23"}
{"environment":"development","level":"info","message":"✅ MongoDB connected successfully","service":"medblock-backend","timestamp":"2025-06-27 02:28:23"}
{"environment":"development","level":"info","message":"Database connected successfully","service":"medblock-backend","timestamp":"2025-06-27 02:28:23"}
{"environment":"development","level":"info","message":"Server running on port 3000 in development mode","service":"medblock-backend","timestamp":"2025-06-27 02:28:23"}
{"environment":"development","level":"info","message":"Health check available at http://localhost:3000/health","service":"medblock-backend","timestamp":"2025-06-27 02:28:23"}
{"environment":"development","level":"info","message":"API documentation available at http://localhost:3000/api/v1","service":"medblock-backend","timestamp":"2025-06-27 02:28:23"}
