{"environment":"development","level":"info","message":"--- Logger test from server.js ---","service":"medblock-backend","timestamp":"2025-06-26 18:25:33"}
{"environment":"development","level":"info","message":"✅ MongoDB connected successfully","service":"medblock-backend","timestamp":"2025-06-26 18:25:33"}
{"environment":"development","level":"info","message":"Database connected successfully","service":"medblock-backend","timestamp":"2025-06-26 18:25:33"}
{"environment":"development","level":"info","message":"Server running on port 3000 in development mode","service":"medblock-backend","timestamp":"2025-06-26 18:25:33"}
{"environment":"development","level":"info","message":"Health check available at http://localhost:3000/health","service":"medblock-backend","timestamp":"2025-06-26 18:25:33"}
{"environment":"development","level":"info","message":"API documentation available at http://localhost:3000/api/v1","service":"medblock-backend","timestamp":"2025-06-26 18:25:33"}
{"environment":"development","level":"info","message":"SIGINT received, shutting down gracefully","service":"medblock-backend","timestamp":"2025-06-26 18:25:41"}
{"environment":"development","level":"info","message":"--- Logger test from server.js ---","service":"medblock-backend","timestamp":"2025-06-26 18:25:44"}
{"environment":"development","level":"info","message":"✅ MongoDB connected successfully","service":"medblock-backend","timestamp":"2025-06-26 18:25:44"}
{"environment":"development","level":"info","message":"Database connected successfully","service":"medblock-backend","timestamp":"2025-06-26 18:25:44"}
{"environment":"development","level":"info","message":"Server running on port 3000 in development mode","service":"medblock-backend","timestamp":"2025-06-26 18:25:44"}
{"environment":"development","level":"info","message":"Health check available at http://localhost:3000/health","service":"medblock-backend","timestamp":"2025-06-26 18:25:44"}
{"environment":"development","level":"info","message":"API documentation available at http://localhost:3000/api/v1","service":"medblock-backend","timestamp":"2025-06-26 18:25:44"}
{"environment":"development","ip":"::1","level":"info","message":"GET /api/v1","service":"medblock-backend","timestamp":"2025-06-26 18:31:51","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36"}
{"environment":"development","ip":"::1","level":"info","message":"GET /favicon.ico","service":"medblock-backend","timestamp":"2025-06-26 18:31:51","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36"}
{"environment":"development","ip":"::1","level":"info","message":"GET /api/v1","service":"medblock-backend","timestamp":"2025-06-26 19:38:09","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36"}
{"environment":"development","ip":"::1","level":"info","message":"POST /api/v1/auth/register","service":"medblock-backend","timestamp":"2025-06-26 19:39:29","userAgent":"curl/8.5.0"}
{"environment":"development","ip":"::1","level":"info","message":"POST /api/v1/auth/register","service":"medblock-backend","timestamp":"2025-06-26 19:39:48","userAgent":"curl/8.5.0"}
{"environment":"development","level":"info","message":"--- Logger test from server.js ---","service":"medblock-backend","timestamp":"2025-06-26 19:52:06"}
{"environment":"development","level":"info","message":"✅ MongoDB connected successfully","service":"medblock-backend","timestamp":"2025-06-26 19:52:06"}
{"environment":"development","level":"info","message":"Database connected successfully","service":"medblock-backend","timestamp":"2025-06-26 19:52:06"}
{"environment":"development","level":"info","message":"Server running on port 3000 in development mode","service":"medblock-backend","timestamp":"2025-06-26 19:52:06"}
{"environment":"development","level":"info","message":"Health check available at http://localhost:3000/health","service":"medblock-backend","timestamp":"2025-06-26 19:52:06"}
{"environment":"development","level":"info","message":"API documentation available at http://localhost:3000/api/v1","service":"medblock-backend","timestamp":"2025-06-26 19:52:06"}
{"environment":"development","level":"info","message":"--- Logger test from server.js ---","service":"medblock-backend","timestamp":"2025-06-26 19:52:12"}
{"environment":"development","level":"info","message":"✅ MongoDB connected successfully","service":"medblock-backend","timestamp":"2025-06-26 19:52:12"}
{"environment":"development","level":"info","message":"Database connected successfully","service":"medblock-backend","timestamp":"2025-06-26 19:52:12"}
{"environment":"development","level":"info","message":"Server running on port 3000 in development mode","service":"medblock-backend","timestamp":"2025-06-26 19:52:12"}
{"environment":"development","level":"info","message":"Health check available at http://localhost:3000/health","service":"medblock-backend","timestamp":"2025-06-26 19:52:12"}
{"environment":"development","level":"info","message":"API documentation available at http://localhost:3000/api/v1","service":"medblock-backend","timestamp":"2025-06-26 19:52:12"}
{"environment":"development","level":"info","message":"SIGINT received, shutting down gracefully","service":"medblock-backend","timestamp":"2025-06-26 19:54:09"}
{"environment":"development","level":"info","message":"--- Logger test from server.js ---","service":"medblock-backend","timestamp":"2025-06-26 19:54:12"}
{"environment":"development","level":"info","message":"✅ MongoDB connected successfully","service":"medblock-backend","timestamp":"2025-06-26 19:54:12"}
{"environment":"development","level":"info","message":"Database connected successfully","service":"medblock-backend","timestamp":"2025-06-26 19:54:12"}
{"environment":"development","level":"info","message":"Server running on port 3000 in development mode","service":"medblock-backend","timestamp":"2025-06-26 19:54:12"}
{"environment":"development","level":"info","message":"Health check available at http://localhost:3000/health","service":"medblock-backend","timestamp":"2025-06-26 19:54:12"}
{"environment":"development","level":"info","message":"API documentation available at http://localhost:3000/api/v1","service":"medblock-backend","timestamp":"2025-06-26 19:54:12"}
{"environment":"development","ip":"::1","level":"info","message":"GET /health","service":"medblock-backend","timestamp":"2025-06-26 19:54:24","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36"}
{"environment":"development","level":"info","message":"--- Logger test from server.js ---","service":"medblock-backend","timestamp":"2025-06-26 20:15:38"}
{"environment":"development","level":"info","message":"✅ MongoDB connected successfully","service":"medblock-backend","timestamp":"2025-06-26 20:15:38"}
{"environment":"development","level":"info","message":"Database connected successfully","service":"medblock-backend","timestamp":"2025-06-26 20:15:38"}
{"environment":"development","level":"info","message":"Server running on port 3000 in development mode","service":"medblock-backend","timestamp":"2025-06-26 20:15:38"}
{"environment":"development","level":"info","message":"Health check available at http://localhost:3000/health","service":"medblock-backend","timestamp":"2025-06-26 20:15:38"}
{"environment":"development","level":"info","message":"API documentation available at http://localhost:3000/api/v1","service":"medblock-backend","timestamp":"2025-06-26 20:15:38"}
{"environment":"development","ip":"::1","level":"info","message":"GET /health","service":"medblock-backend","timestamp":"2025-06-26 20:16:07","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36"}
{"environment":"development","ip":"::1","level":"info","message":"GET /health","service":"medblock-backend","timestamp":"2025-06-26 20:16:15","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36"}
{"environment":"development","ip":"::1","level":"info","message":"GET /health","service":"medblock-backend","timestamp":"2025-06-26 20:25:38","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36"}
{"environment":"development","ip":"::1","level":"info","message":"GET /health","service":"medblock-backend","timestamp":"2025-06-26 20:25:41","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36"}
{"environment":"development","ip":"::1","level":"info","message":"POST /api/v1/auth/register","service":"medblock-backend","timestamp":"2025-06-26 20:27:27","userAgent":"curl/8.5.0"}
{"environment":"development","ip":"::1","level":"info","message":"POST /api/v1/auth/register","service":"medblock-backend","timestamp":"2025-06-26 20:28:06","userAgent":"curl/8.5.0"}
{"environment":"development","ip":"::1","level":"info","message":"POST /api/v1/auth/register","service":"medblock-backend","timestamp":"2025-06-26 20:34:47","userAgent":"curl/8.5.0"}
{"_message":"User validation failed","environment":"development","errors":{"address.city":{"kind":"required","message":"Path `address.city` is required.","name":"ValidatorError","path":"address.city","properties":{"message":"Path `address.city` is required.","path":"address.city","type":"required"}},"address.county":{"kind":"required","message":"Path `address.county` is required.","name":"ValidatorError","path":"address.county","properties":{"message":"Path `address.county` is required.","path":"address.county","type":"required"}},"address.street":{"kind":"required","message":"Path `address.street` is required.","name":"ValidatorError","path":"address.street","properties":{"message":"Path `address.street` is required.","path":"address.street","type":"required"}},"address.subCounty":{"kind":"required","message":"Path `address.subCounty` is required.","name":"ValidatorError","path":"address.subCounty","properties":{"message":"Path `address.subCounty` is required.","path":"address.subCounty","type":"required"}},"userId":{"kind":"required","message":"Path `userId` is required.","name":"ValidatorError","path":"userId","properties":{"message":"Path `userId` is required.","path":"userId","type":"required"}}},"level":"error","message":"Registration failed: User validation failed: address.subCounty: Path `address.subCounty` is required., address.county: Path `address.county` is required., address.city: Path `address.city` is required., address.street: Path `address.street` is required., userId: Path `userId` is required.","service":"medblock-backend","stack":"ValidationError: User validation failed: address.subCounty: Path `address.subCounty` is required., address.county: Path `address.county` is required., address.city: Path `address.city` is required., address.street: Path `address.street` is required., userId: Path `userId` is required.\n    at Document.invalidate (/home/josva/Desktop/MedBlock/node_modules/mongoose/lib/document.js:3352:32)\n    at /home/josva/Desktop/MedBlock/node_modules/mongoose/lib/document.js:3113:17\n    at /home/josva/Desktop/MedBlock/node_modules/mongoose/lib/schemaType.js:1407:9\n    at process.processTicksAndRejections (node:internal/process/task_queues:85:11)","timestamp":"2025-06-26 20:34:47"}
{"environment":"development","ip":"::1","level":"info","message":"POST /api/v1/auth/register","service":"medblock-backend","timestamp":"2025-06-26 20:39:29","userAgent":"curl/8.5.0"}
{"_message":"User validation failed","environment":"development","errors":{"userId":{"kind":"required","message":"Path `userId` is required.","name":"ValidatorError","path":"userId","properties":{"message":"Path `userId` is required.","path":"userId","type":"required"}}},"level":"error","message":"Registration failed: User validation failed: userId: Path `userId` is required.","service":"medblock-backend","stack":"ValidationError: User validation failed: userId: Path `userId` is required.\n    at Document.invalidate (/home/josva/Desktop/MedBlock/node_modules/mongoose/lib/document.js:3352:32)\n    at /home/josva/Desktop/MedBlock/node_modules/mongoose/lib/document.js:3113:17\n    at /home/josva/Desktop/MedBlock/node_modules/mongoose/lib/schemaType.js:1407:9\n    at process.processTicksAndRejections (node:internal/process/task_queues:85:11)","timestamp":"2025-06-26 20:39:29"}
{"environment":"development","ip":"::1","level":"info","message":"POST /api/v1/auth/register","service":"medblock-backend","timestamp":"2025-06-26 20:40:52","userAgent":"curl/8.5.0"}
{"_message":"User validation failed","environment":"development","errors":{"userId":{"kind":"required","message":"Path `userId` is required.","name":"ValidatorError","path":"userId","properties":{"message":"Path `userId` is required.","path":"userId","type":"required"}}},"level":"error","message":"Registration failed: User validation failed: userId: Path `userId` is required.","service":"medblock-backend","stack":"ValidationError: User validation failed: userId: Path `userId` is required.\n    at Document.invalidate (/home/josva/Desktop/MedBlock/node_modules/mongoose/lib/document.js:3352:32)\n    at /home/josva/Desktop/MedBlock/node_modules/mongoose/lib/document.js:3113:17\n    at /home/josva/Desktop/MedBlock/node_modules/mongoose/lib/schemaType.js:1407:9\n    at process.processTicksAndRejections (node:internal/process/task_queues:85:11)","timestamp":"2025-06-26 20:40:52"}
{"environment":"development","ip":"::1","level":"info","message":"POST /api/v1/auth/register","service":"medblock-backend","timestamp":"2025-06-26 20:43:56","userAgent":"curl/8.5.0"}
{"_message":"User validation failed","environment":"development","errors":{"userId":{"kind":"required","message":"Path `userId` is required.","name":"ValidatorError","path":"userId","properties":{"message":"Path `userId` is required.","path":"userId","type":"required"}}},"level":"error","message":"Registration failed: User validation failed: userId: Path `userId` is required.","service":"medblock-backend","stack":"ValidationError: User validation failed: userId: Path `userId` is required.\n    at Document.invalidate (/home/josva/Desktop/MedBlock/node_modules/mongoose/lib/document.js:3352:32)\n    at /home/josva/Desktop/MedBlock/node_modules/mongoose/lib/document.js:3113:17\n    at /home/josva/Desktop/MedBlock/node_modules/mongoose/lib/schemaType.js:1407:9\n    at process.processTicksAndRejections (node:internal/process/task_queues:85:11)","timestamp":"2025-06-26 20:43:56"}
{"environment":"development","ip":"::1","level":"info","message":"GET /health","service":"medblock-backend","timestamp":"2025-06-26 20:44:50","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36"}
{"environment":"development","ip":"::1","level":"info","message":"POST /api/v1/auth/register","service":"medblock-backend","timestamp":"2025-06-26 20:45:00","userAgent":"curl/8.5.0"}
{"_message":"User validation failed","environment":"development","errors":{"userId":{"kind":"required","message":"Path `userId` is required.","name":"ValidatorError","path":"userId","properties":{"message":"Path `userId` is required.","path":"userId","type":"required"}}},"level":"error","message":"Registration failed: User validation failed: userId: Path `userId` is required.","service":"medblock-backend","stack":"ValidationError: User validation failed: userId: Path `userId` is required.\n    at Document.invalidate (/home/josva/Desktop/MedBlock/node_modules/mongoose/lib/document.js:3352:32)\n    at /home/josva/Desktop/MedBlock/node_modules/mongoose/lib/document.js:3113:17\n    at /home/josva/Desktop/MedBlock/node_modules/mongoose/lib/schemaType.js:1407:9\n    at process.processTicksAndRejections (node:internal/process/task_queues:85:11)","timestamp":"2025-06-26 20:45:00"}
{"environment":"development","ip":"::1","level":"info","message":"POST /api/v1/auth/register","service":"medblock-backend","timestamp":"2025-06-26 21:15:09","userAgent":"curl/8.5.0"}
{"_message":"User validation failed","environment":"development","errors":{"userId":{"kind":"required","message":"Path `userId` is required.","name":"ValidatorError","path":"userId","properties":{"message":"Path `userId` is required.","path":"userId","type":"required"}}},"level":"error","message":"Registration failed: User validation failed: userId: Path `userId` is required.","service":"medblock-backend","stack":"ValidationError: User validation failed: userId: Path `userId` is required.\n    at Document.invalidate (/home/josva/Desktop/MedBlock/node_modules/mongoose/lib/document.js:3352:32)\n    at /home/josva/Desktop/MedBlock/node_modules/mongoose/lib/document.js:3113:17\n    at /home/josva/Desktop/MedBlock/node_modules/mongoose/lib/schemaType.js:1407:9\n    at process.processTicksAndRejections (node:internal/process/task_queues:85:11)","timestamp":"2025-06-26 21:15:09"}
{"environment":"development","level":"info","message":"--- Logger test from server.js ---","service":"medblock-backend","timestamp":"2025-06-26 21:22:47"}
{"environment":"development","level":"info","message":"✅ MongoDB connected successfully","service":"medblock-backend","timestamp":"2025-06-26 21:22:48"}
{"environment":"development","level":"info","message":"Database connected successfully","service":"medblock-backend","timestamp":"2025-06-26 21:22:48"}
{"environment":"development","level":"info","message":"Server running on port 3000 in development mode","service":"medblock-backend","timestamp":"2025-06-26 21:22:48"}
{"environment":"development","level":"info","message":"Health check available at http://localhost:3000/health","service":"medblock-backend","timestamp":"2025-06-26 21:22:48"}
{"environment":"development","level":"info","message":"API documentation available at http://localhost:3000/api/v1","service":"medblock-backend","timestamp":"2025-06-26 21:22:48"}
{"environment":"development","level":"info","message":"--- Logger test from server.js ---","service":"medblock-backend","timestamp":"2025-06-26 21:23:17"}
{"environment":"development","level":"info","message":"✅ MongoDB connected successfully","service":"medblock-backend","timestamp":"2025-06-26 21:23:17"}
{"environment":"development","level":"info","message":"Database connected successfully","service":"medblock-backend","timestamp":"2025-06-26 21:23:17"}
{"environment":"development","level":"info","message":"Server running on port 3000 in development mode","service":"medblock-backend","timestamp":"2025-06-26 21:23:17"}
{"environment":"development","level":"info","message":"Health check available at http://localhost:3000/health","service":"medblock-backend","timestamp":"2025-06-26 21:23:17"}
{"environment":"development","level":"info","message":"API documentation available at http://localhost:3000/api/v1","service":"medblock-backend","timestamp":"2025-06-26 21:23:17"}
{"environment":"development","ip":"::1","level":"info","message":"POST /api/v1/auth/register","service":"medblock-backend","timestamp":"2025-06-26 21:25:50","userAgent":"curl/8.5.0"}
{"action":"user_registered","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","resource":"auth","service":"medblock-backend","timestamp":"2025-06-26 21:25:51","userAgent":"curl/8.5.0","userId":"b0e60435-b552-4d48-a3fa-06ba9957ac17"}
{"environment":"development","ip":"::1","level":"info","message":"GET /health","service":"medblock-backend","timestamp":"2025-06-26 21:26:25","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36"}
{"environment":"development","ip":"::1","level":"info","message":"GET /api/v1","service":"medblock-backend","timestamp":"2025-06-26 21:27:38","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36"}
{"environment":"development","ip":"::1","level":"info","message":"POST /api/v1/auth/login","service":"medblock-backend","timestamp":"2025-06-26 21:55:29","userAgent":"curl/8.5.0"}
{"action":"user_login","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","resource":"auth","service":"medblock-backend","timestamp":"2025-06-26 21:55:30","userAgent":"curl/8.5.0","userId":"b0e60435-b552-4d48-a3fa-06ba9957ac17"}
{"environment":"development","ip":"::1","level":"info","message":"POST /api/v1/patients","service":"medblock-backend","timestamp":"2025-06-26 21:57:18","userAgent":"curl/8.5.0"}
{"environment":"development","level":"info","message":"--- Logger test from server.js ---","service":"medblock-backend","timestamp":"2025-06-26 22:01:34"}
{"environment":"development","level":"info","message":"✅ MongoDB connected successfully","service":"medblock-backend","timestamp":"2025-06-26 22:01:35"}
{"environment":"development","level":"info","message":"Database connected successfully","service":"medblock-backend","timestamp":"2025-06-26 22:01:35"}
{"environment":"development","level":"info","message":"Server running on port 3000 in development mode","service":"medblock-backend","timestamp":"2025-06-26 22:01:35"}
{"environment":"development","level":"info","message":"Health check available at http://localhost:3000/health","service":"medblock-backend","timestamp":"2025-06-26 22:01:35"}
{"environment":"development","level":"info","message":"API documentation available at http://localhost:3000/api/v1","service":"medblock-backend","timestamp":"2025-06-26 22:01:35"}
{"environment":"development","ip":"::1","level":"info","message":"POST /api/v1/patients","service":"medblock-backend","timestamp":"2025-06-26 22:02:12","userAgent":"curl/8.5.0"}
{"environment":"development","kind":"ObjectId","level":"error","message":"Authentication error: Cast to ObjectId failed for value \"b0e60435-b552-4d48-a3fa-06ba9957ac17\" (type string) at path \"_id\" for model \"User\"","path":"_id","reason":{},"service":"medblock-backend","stack":"CastError: Cast to ObjectId failed for value \"b0e60435-b552-4d48-a3fa-06ba9957ac17\" (type string) at path \"_id\" for model \"User\"\n    at SchemaObjectId.cast (/home/josva/Desktop/MedBlock/node_modules/mongoose/lib/schema/objectId.js:251:11)\n    at SchemaType.applySetters (/home/josva/Desktop/MedBlock/node_modules/mongoose/lib/schemaType.js:1255:12)\n    at SchemaType.castForQuery (/home/josva/Desktop/MedBlock/node_modules/mongoose/lib/schemaType.js:1673:17)\n    at cast (/home/josva/Desktop/MedBlock/node_modules/mongoose/lib/cast.js:390:32)\n    at Query.cast (/home/josva/Desktop/MedBlock/node_modules/mongoose/lib/query.js:5055:12)\n    at Query._castConditions (/home/josva/Desktop/MedBlock/node_modules/mongoose/lib/query.js:2351:10)\n    at model.Query._findOne (/home/josva/Desktop/MedBlock/node_modules/mongoose/lib/query.js:2674:8)\n    at model.Query.exec (/home/josva/Desktop/MedBlock/node_modules/mongoose/lib/query.js:4604:80)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async authenticateToken (/home/josva/Desktop/MedBlock/src/middleware/auth.js:29:18)","stringValue":"\"b0e60435-b552-4d48-a3fa-06ba9957ac17\"","timestamp":"2025-06-26 22:02:12","value":"b0e60435-b552-4d48-a3fa-06ba9957ac17","valueType":"string"}
{"environment":"development","level":"info","message":"--- Logger test from server.js ---","service":"medblock-backend","timestamp":"2025-06-26 22:10:56"}
{"environment":"development","level":"info","message":"✅ MongoDB connected successfully","service":"medblock-backend","timestamp":"2025-06-26 22:10:56"}
{"environment":"development","level":"info","message":"Database connected successfully","service":"medblock-backend","timestamp":"2025-06-26 22:10:56"}
{"environment":"development","level":"info","message":"Server running on port 3000 in development mode","service":"medblock-backend","timestamp":"2025-06-26 22:10:56"}
{"environment":"development","level":"info","message":"Health check available at http://localhost:3000/health","service":"medblock-backend","timestamp":"2025-06-26 22:10:56"}
{"environment":"development","level":"info","message":"API documentation available at http://localhost:3000/api/v1","service":"medblock-backend","timestamp":"2025-06-26 22:10:56"}
{"environment":"development","level":"info","message":"--- Logger test from server.js ---","service":"medblock-backend","timestamp":"2025-06-26 22:11:12"}
{"environment":"development","level":"info","message":"✅ MongoDB connected successfully","service":"medblock-backend","timestamp":"2025-06-26 22:11:12"}
{"environment":"development","level":"info","message":"Database connected successfully","service":"medblock-backend","timestamp":"2025-06-26 22:11:12"}
{"environment":"development","level":"info","message":"Server running on port 3000 in development mode","service":"medblock-backend","timestamp":"2025-06-26 22:11:12"}
{"environment":"development","level":"info","message":"Health check available at http://localhost:3000/health","service":"medblock-backend","timestamp":"2025-06-26 22:11:12"}
{"environment":"development","level":"info","message":"API documentation available at http://localhost:3000/api/v1","service":"medblock-backend","timestamp":"2025-06-26 22:11:12"}
{"environment":"development","level":"info","message":"--- Logger test from server.js ---","service":"medblock-backend","timestamp":"2025-06-26 22:11:40"}
{"environment":"development","level":"info","message":"✅ MongoDB connected successfully","service":"medblock-backend","timestamp":"2025-06-26 22:11:41"}
{"environment":"development","level":"info","message":"Database connected successfully","service":"medblock-backend","timestamp":"2025-06-26 22:11:41"}
{"environment":"development","level":"info","message":"Server running on port 3000 in development mode","service":"medblock-backend","timestamp":"2025-06-26 22:11:41"}
{"environment":"development","level":"info","message":"Health check available at http://localhost:3000/health","service":"medblock-backend","timestamp":"2025-06-26 22:11:41"}
{"environment":"development","level":"info","message":"API documentation available at http://localhost:3000/api/v1","service":"medblock-backend","timestamp":"2025-06-26 22:11:41"}
{"environment":"development","level":"info","message":"--- Logger test from server.js ---","service":"medblock-backend","timestamp":"2025-06-26 22:11:53"}
{"environment":"development","level":"info","message":"✅ MongoDB connected successfully","service":"medblock-backend","timestamp":"2025-06-26 22:11:53"}
{"environment":"development","level":"info","message":"Database connected successfully","service":"medblock-backend","timestamp":"2025-06-26 22:11:53"}
{"environment":"development","level":"info","message":"Server running on port 3000 in development mode","service":"medblock-backend","timestamp":"2025-06-26 22:11:53"}
{"environment":"development","level":"info","message":"Health check available at http://localhost:3000/health","service":"medblock-backend","timestamp":"2025-06-26 22:11:53"}
{"environment":"development","level":"info","message":"API documentation available at http://localhost:3000/api/v1","service":"medblock-backend","timestamp":"2025-06-26 22:11:53"}
{"environment":"development","level":"info","message":"--- Logger test from server.js ---","service":"medblock-backend","timestamp":"2025-06-26 22:12:02"}
{"environment":"development","level":"info","message":"✅ MongoDB connected successfully","service":"medblock-backend","timestamp":"2025-06-26 22:12:03"}
{"environment":"development","level":"info","message":"Database connected successfully","service":"medblock-backend","timestamp":"2025-06-26 22:12:03"}
{"environment":"development","level":"info","message":"Server running on port 3000 in development mode","service":"medblock-backend","timestamp":"2025-06-26 22:12:03"}
{"environment":"development","level":"info","message":"Health check available at http://localhost:3000/health","service":"medblock-backend","timestamp":"2025-06-26 22:12:03"}
{"environment":"development","level":"info","message":"API documentation available at http://localhost:3000/api/v1","service":"medblock-backend","timestamp":"2025-06-26 22:12:03"}
{"environment":"development","ip":"::1","level":"info","message":"POST /api/v1/auth/register","service":"medblock-backend","timestamp":"2025-06-26 22:22:37","userAgent":"curl/8.5.0"}
{"environment":"development","ip":"::1","level":"info","message":"GET /api/v1","service":"medblock-backend","timestamp":"2025-06-26 22:25:25","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36"}
{"environment":"development","ip":"::1","level":"info","message":"POST /api/v1/auth/register","service":"medblock-backend","timestamp":"2025-06-26 22:38:15","userAgent":"curl/8.5.0"}
{"environment":"development","ip":"::1","level":"info","message":"POST /api/v1/auth/register","service":"medblock-backend","timestamp":"2025-06-26 22:39:32","userAgent":"curl/8.5.0"}
{"action":"user_registered","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","resource":"auth","service":"medblock-backend","timestamp":"2025-06-26 22:39:32","userAgent":"curl/8.5.0","userId":"685da1f425549ec1ae4d9eab"}
{"environment":"development","ip":"::1","level":"info","message":"POST /api/v1/patients","service":"medblock-backend","timestamp":"2025-06-26 22:44:13","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"POST","resource":"/api/v1/patients","service":"medblock-backend","timestamp":"2025-06-26 22:44:13","userAgent":"curl/8.5.0"}
{"environment":"development","ip":"::1","level":"info","message":"POST /api/v1/patients","service":"medblock-backend","timestamp":"2025-06-26 22:51:48","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"POST","resource":"/api/v1/patients","service":"medblock-backend","timestamp":"2025-06-26 22:51:48","userAgent":"curl/8.5.0"}
{"_message":"Patient validation failed","environment":"development","errors":{"address.city":{"kind":"required","message":"Path `address.city` is required.","name":"ValidatorError","path":"address.city","properties":{"message":"Path `address.city` is required.","path":"address.city","type":"required"}},"address.street":{"kind":"required","message":"Path `address.street` is required.","name":"ValidatorError","path":"address.street","properties":{"message":"Path `address.street` is required.","path":"address.street","type":"required"}},"emergencyContact.name":{"kind":"required","message":"Path `emergencyContact.name` is required.","name":"ValidatorError","path":"emergencyContact.name","properties":{"message":"Path `emergencyContact.name` is required.","path":"emergencyContact.name","type":"required"}},"emergencyContact.phoneNumber":{"kind":"required","message":"Path `emergencyContact.phoneNumber` is required.","name":"ValidatorError","path":"emergencyContact.phoneNumber","properties":{"message":"Path `emergencyContact.phoneNumber` is required.","path":"emergencyContact.phoneNumber","type":"required"}},"emergencyContact.relationship":{"kind":"required","message":"Path `emergencyContact.relationship` is required.","name":"ValidatorError","path":"emergencyContact.relationship","properties":{"message":"Path `emergencyContact.relationship` is required.","path":"emergencyContact.relationship","type":"required"}},"password":{"kind":"required","message":"Path `password` is required.","name":"ValidatorError","path":"password","properties":{"message":"Path `password` is required.","path":"password","type":"required"}},"patientId":{"kind":"required","message":"Path `patientId` is required.","name":"ValidatorError","path":"patientId","properties":{"message":"Path `patientId` is required.","path":"patientId","type":"required"}}},"level":"error","message":"Create patient failed: Patient validation failed: password: Path `password` is required., emergencyContact.phoneNumber: Path `emergencyContact.phoneNumber` is required., emergencyContact.relationship: Path `emergencyContact.relationship` is required., emergencyContact.name: Path `emergencyContact.name` is required., address.city: Path `address.city` is required., address.street: Path `address.street` is required., patientId: Path `patientId` is required.","service":"medblock-backend","stack":"ValidationError: Patient validation failed: password: Path `password` is required., emergencyContact.phoneNumber: Path `emergencyContact.phoneNumber` is required., emergencyContact.relationship: Path `emergencyContact.relationship` is required., emergencyContact.name: Path `emergencyContact.name` is required., address.city: Path `address.city` is required., address.street: Path `address.street` is required., patientId: Path `patientId` is required.\n    at Document.invalidate (/home/josva/Desktop/MedBlock/node_modules/mongoose/lib/document.js:3352:32)\n    at /home/josva/Desktop/MedBlock/node_modules/mongoose/lib/document.js:3113:17\n    at /home/josva/Desktop/MedBlock/node_modules/mongoose/lib/schemaType.js:1407:9\n    at process.processTicksAndRejections (node:internal/process/task_queues:85:11)","timestamp":"2025-06-26 22:51:48"}
{"environment":"development","ip":"::1","level":"info","message":"POST /api/v1/patients","service":"medblock-backend","timestamp":"2025-06-26 22:55:11","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"POST","resource":"/api/v1/patients","service":"medblock-backend","timestamp":"2025-06-26 22:55:11","userAgent":"curl/8.5.0"}
{"_message":"Patient validation failed","environment":"development","errors":{"emergencyContact.relationship":{"kind":"enum","message":"`Brother` is not a valid enum value for path `emergencyContact.relationship`.","name":"ValidatorError","path":"emergencyContact.relationship","properties":{"enumValues":["spouse","parent","child","sibling","friend","other"],"message":"`Brother` is not a valid enum value for path `emergencyContact.relationship`.","path":"emergencyContact.relationship","type":"enum","value":"Brother"},"value":"Brother"}},"level":"error","message":"Create patient failed: Patient validation failed: emergencyContact.relationship: `Brother` is not a valid enum value for path `emergencyContact.relationship`.","service":"medblock-backend","stack":"ValidationError: Patient validation failed: emergencyContact.relationship: `Brother` is not a valid enum value for path `emergencyContact.relationship`.\n    at Document.invalidate (/home/josva/Desktop/MedBlock/node_modules/mongoose/lib/document.js:3352:32)\n    at /home/josva/Desktop/MedBlock/node_modules/mongoose/lib/document.js:3113:17\n    at /home/josva/Desktop/MedBlock/node_modules/mongoose/lib/schemaType.js:1407:9\n    at process.processTicksAndRejections (node:internal/process/task_queues:85:11)","timestamp":"2025-06-26 22:55:11"}
{"environment":"development","ip":"::1","level":"info","message":"POST /api/v1/patients","service":"medblock-backend","timestamp":"2025-06-26 22:56:37","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"POST","resource":"/api/v1/patients","service":"medblock-backend","timestamp":"2025-06-26 22:56:37","userAgent":"curl/8.5.0"}
{"_message":"Patient validation failed","environment":"development","errors":{"emergencyContact.relationship":{"kind":"enum","message":"`Mother` is not a valid enum value for path `emergencyContact.relationship`.","name":"ValidatorError","path":"emergencyContact.relationship","properties":{"enumValues":["spouse","parent","child","sibling","friend","other"],"message":"`Mother` is not a valid enum value for path `emergencyContact.relationship`.","path":"emergencyContact.relationship","type":"enum","value":"Mother"},"value":"Mother"}},"level":"error","message":"Create patient failed: Patient validation failed: emergencyContact.relationship: `Mother` is not a valid enum value for path `emergencyContact.relationship`.","service":"medblock-backend","stack":"ValidationError: Patient validation failed: emergencyContact.relationship: `Mother` is not a valid enum value for path `emergencyContact.relationship`.\n    at Document.invalidate (/home/josva/Desktop/MedBlock/node_modules/mongoose/lib/document.js:3352:32)\n    at /home/josva/Desktop/MedBlock/node_modules/mongoose/lib/document.js:3113:17\n    at /home/josva/Desktop/MedBlock/node_modules/mongoose/lib/schemaType.js:1407:9\n    at process.processTicksAndRejections (node:internal/process/task_queues:85:11)","timestamp":"2025-06-26 22:56:37"}
{"environment":"development","ip":"::1","level":"info","message":"POST /api/v1/patients","service":"medblock-backend","timestamp":"2025-06-26 23:08:26","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"POST","resource":"/api/v1/patients","service":"medblock-backend","timestamp":"2025-06-26 23:08:26","userAgent":"curl/8.5.0"}
{"action":"patient_created","environment":"development","level":"info","message":"AUDIT_LOG","patientId":"PT-00123","patientName":"Jane Doe","resource":"patient:PT-00123","service":"medblock-backend","timestamp":"2025-06-26 23:08:27"}
{"environment":"development","level":"error","message":"Create patient failed: patient.getSummary is not a function","service":"medblock-backend","stack":"TypeError: patient.getSummary is not a function\n    at /home/josva/Desktop/MedBlock/src/routes/patients.js:208:26\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-06-26 23:08:27"}
{"environment":"development","level":"info","message":"--- Logger test from server.js ---","service":"medblock-backend","timestamp":"2025-06-26 23:22:23"}
{"environment":"development","level":"info","message":"✅ MongoDB connected successfully","service":"medblock-backend","timestamp":"2025-06-26 23:22:24"}
{"environment":"development","level":"info","message":"Database connected successfully","service":"medblock-backend","timestamp":"2025-06-26 23:22:24"}
{"environment":"development","level":"info","message":"Server running on port 3000 in development mode","service":"medblock-backend","timestamp":"2025-06-26 23:22:24"}
{"environment":"development","level":"info","message":"Health check available at http://localhost:3000/health","service":"medblock-backend","timestamp":"2025-06-26 23:22:24"}
{"environment":"development","level":"info","message":"API documentation available at http://localhost:3000/api/v1","service":"medblock-backend","timestamp":"2025-06-26 23:22:24"}
{"environment":"development","level":"info","message":"--- Logger test from server.js ---","service":"medblock-backend","timestamp":"2025-06-26 23:22:42"}
{"environment":"development","level":"info","message":"✅ MongoDB connected successfully","service":"medblock-backend","timestamp":"2025-06-26 23:22:42"}
{"environment":"development","level":"info","message":"Database connected successfully","service":"medblock-backend","timestamp":"2025-06-26 23:22:42"}
{"environment":"development","level":"info","message":"Server running on port 3000 in development mode","service":"medblock-backend","timestamp":"2025-06-26 23:22:42"}
{"environment":"development","level":"info","message":"Health check available at http://localhost:3000/health","service":"medblock-backend","timestamp":"2025-06-26 23:22:42"}
{"environment":"development","level":"info","message":"API documentation available at http://localhost:3000/api/v1","service":"medblock-backend","timestamp":"2025-06-26 23:22:42"}
{"environment":"development","ip":"::1","level":"info","message":"GET /api/v1/health","service":"medblock-backend","timestamp":"2025-06-26 23:22:57","userAgent":"curl/8.5.0"}
{"environment":"development","level":"info","message":"--- Logger test from server.js ---","service":"medblock-backend","timestamp":"2025-06-26 23:22:57"}
{"environment":"development","level":"info","message":"✅ MongoDB connected successfully","service":"medblock-backend","timestamp":"2025-06-26 23:22:58"}
{"environment":"development","ip":"::1","level":"info","message":"POST /api/v1/auth/login","service":"medblock-backend","timestamp":"2025-06-26 23:23:04","userAgent":"curl/8.5.0"}
{"environment":"development","level":"error","message":"Authentication failed: Invalid email or password","service":"medblock-backend","stack":"Error: Invalid email or password\n    at userSchema.statics.authenticate (/home/josva/Desktop/MedBlock/src/models/User.js:439:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async /home/josva/Desktop/MedBlock/src/routes/auth.js:144:18","timestamp":"2025-06-26 23:23:04"}
{"environment":"development","level":"error","message":"Login failed: Invalid email or password","service":"medblock-backend","stack":"Error: Invalid email or password\n    at userSchema.statics.authenticate (/home/josva/Desktop/MedBlock/src/models/User.js:439:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async /home/josva/Desktop/MedBlock/src/routes/auth.js:144:18","timestamp":"2025-06-26 23:23:04"}
{"environment":"development","ip":"::1","level":"info","message":"POST /api/v1/auth/login","service":"medblock-backend","timestamp":"2025-06-26 23:23:09","userAgent":"curl/8.5.0"}
{"environment":"development","level":"error","message":"Authentication failed: Invalid email or password","service":"medblock-backend","stack":"Error: Invalid email or password\n    at userSchema.statics.authenticate (/home/josva/Desktop/MedBlock/src/models/User.js:439:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async /home/josva/Desktop/MedBlock/src/routes/auth.js:144:18","timestamp":"2025-06-26 23:23:09"}
{"environment":"development","level":"error","message":"Login failed: Invalid email or password","service":"medblock-backend","stack":"Error: Invalid email or password\n    at userSchema.statics.authenticate (/home/josva/Desktop/MedBlock/src/models/User.js:439:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async /home/josva/Desktop/MedBlock/src/routes/auth.js:144:18","timestamp":"2025-06-26 23:23:09"}
{"environment":"development","ip":"::1","level":"info","message":"POST /api/v1/auth/register","service":"medblock-backend","timestamp":"2025-06-26 23:23:15","userAgent":"curl/8.5.0"}
{"environment":"development","ip":"::1","level":"info","message":"POST /api/v1/auth/register","service":"medblock-backend","timestamp":"2025-06-26 23:23:21","userAgent":"curl/8.5.0"}
{"_message":"User validation failed","environment":"development","errors":{"address.city":{"kind":"required","message":"Path `address.city` is required.","name":"ValidatorError","path":"address.city","properties":{"message":"Path `address.city` is required.","path":"address.city","type":"required"}},"address.county":{"kind":"required","message":"Path `address.county` is required.","name":"ValidatorError","path":"address.county","properties":{"message":"Path `address.county` is required.","path":"address.county","type":"required"}},"address.street":{"kind":"required","message":"Path `address.street` is required.","name":"ValidatorError","path":"address.street","properties":{"message":"Path `address.street` is required.","path":"address.street","type":"required"}},"address.subCounty":{"kind":"required","message":"Path `address.subCounty` is required.","name":"ValidatorError","path":"address.subCounty","properties":{"message":"Path `address.subCounty` is required.","path":"address.subCounty","type":"required"}}},"level":"error","message":"Registration failed: User validation failed: address.subCounty: Path `address.subCounty` is required., address.county: Path `address.county` is required., address.city: Path `address.city` is required., address.street: Path `address.street` is required.","service":"medblock-backend","stack":"ValidationError: User validation failed: address.subCounty: Path `address.subCounty` is required., address.county: Path `address.county` is required., address.city: Path `address.city` is required., address.street: Path `address.street` is required.\n    at Document.invalidate (/home/josva/Desktop/MedBlock/node_modules/mongoose/lib/document.js:3352:32)\n    at /home/josva/Desktop/MedBlock/node_modules/mongoose/lib/document.js:3113:17\n    at /home/josva/Desktop/MedBlock/node_modules/mongoose/lib/schemaType.js:1407:9\n    at process.processTicksAndRejections (node:internal/process/task_queues:85:11)","timestamp":"2025-06-26 23:23:21"}
{"environment":"development","ip":"::1","level":"info","message":"POST /api/v1/auth/register","service":"medblock-backend","timestamp":"2025-06-26 23:23:24","userAgent":"curl/8.5.0"}
{"code":11000,"environment":"development","errorLabelSet":{},"errorResponse":{"code":11000,"errmsg":"E11000 duplicate key error collection: medblock.users index: userId_1 dup key: { userId: null }","index":0,"keyPattern":{"userId":1},"keyValue":{"userId":null}},"index":0,"keyPattern":{"userId":1},"keyValue":{"userId":null},"level":"error","message":"Registration failed: E11000 duplicate key error collection: medblock.users index: userId_1 dup key: { userId: null }","service":"medblock-backend","stack":"MongoServerError: E11000 duplicate key error collection: medblock.users index: userId_1 dup key: { userId: null }\n    at InsertOneOperation.execute (/home/josva/Desktop/MedBlock/node_modules/mongodb/lib/operations/insert.js:51:19)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async tryOperation (/home/josva/Desktop/MedBlock/node_modules/mongodb/lib/operations/execute_operation.js:207:20)\n    at async executeOperation (/home/josva/Desktop/MedBlock/node_modules/mongodb/lib/operations/execute_operation.js:75:16)\n    at async Collection.insertOne (/home/josva/Desktop/MedBlock/node_modules/mongodb/lib/collection.js:157:16)","timestamp":"2025-06-26 23:23:25"}
{"environment":"development","level":"info","message":"--- Logger test from server.js ---","service":"medblock-backend","timestamp":"2025-06-26 23:23:48"}
{"environment":"development","level":"info","message":"✅ MongoDB connected successfully","service":"medblock-backend","timestamp":"2025-06-26 23:23:48"}
{"environment":"development","level":"info","message":"Database connected successfully","service":"medblock-backend","timestamp":"2025-06-26 23:23:48"}
{"environment":"development","level":"info","message":"Server running on port 3000 in development mode","service":"medblock-backend","timestamp":"2025-06-26 23:23:48"}
{"environment":"development","level":"info","message":"Health check available at http://localhost:3000/health","service":"medblock-backend","timestamp":"2025-06-26 23:23:48"}
{"environment":"development","level":"info","message":"API documentation available at http://localhost:3000/api/v1","service":"medblock-backend","timestamp":"2025-06-26 23:23:48"}
{"environment":"development","ip":"::1","level":"info","message":"POST /api/v1/auth/register","service":"medblock-backend","timestamp":"2025-06-26 23:23:52","userAgent":"curl/8.5.0"}
{"code":11000,"environment":"development","errorLabelSet":{},"errorResponse":{"code":11000,"errmsg":"E11000 duplicate key error collection: medblock.users index: userId_1 dup key: { userId: null }","index":0,"keyPattern":{"userId":1},"keyValue":{"userId":null}},"index":0,"keyPattern":{"userId":1},"keyValue":{"userId":null},"level":"error","message":"Registration failed: E11000 duplicate key error collection: medblock.users index: userId_1 dup key: { userId: null }","service":"medblock-backend","stack":"MongoServerError: E11000 duplicate key error collection: medblock.users index: userId_1 dup key: { userId: null }\n    at InsertOneOperation.execute (/home/josva/Desktop/MedBlock/node_modules/mongodb/lib/operations/insert.js:51:19)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async tryOperation (/home/josva/Desktop/MedBlock/node_modules/mongodb/lib/operations/execute_operation.js:207:20)\n    at async executeOperation (/home/josva/Desktop/MedBlock/node_modules/mongodb/lib/operations/execute_operation.js:75:16)\n    at async Collection.insertOne (/home/josva/Desktop/MedBlock/node_modules/mongodb/lib/collection.js:157:16)","timestamp":"2025-06-26 23:23:53"}
{"environment":"development","ip":"::1","level":"info","message":"POST /api/v1/patients","service":"medblock-backend","timestamp":"2025-06-26 23:25:00","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"POST","resource":"/api/v1/patients","service":"medblock-backend","timestamp":"2025-06-26 23:25:00","userAgent":"curl/8.5.0"}
{"environment":"development","ip":"::1","level":"info","message":"POST /api/v1/patients","service":"medblock-backend","timestamp":"2025-06-26 23:25:30","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"POST","resource":"/api/v1/patients","service":"medblock-backend","timestamp":"2025-06-26 23:25:30","userAgent":"curl/8.5.0"}
{"environment":"development","ip":"::1","level":"info","message":"GET /api/v1/patients","service":"medblock-backend","timestamp":"2025-06-26 23:29:21","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"GET","resource":"/api/v1/patients","service":"medblock-backend","timestamp":"2025-06-26 23:29:21","userAgent":"curl/8.5.0"}
{"action":"patients_listed","count":1,"environment":"development","level":"info","limit":20,"message":"AUDIT_LOG","page":1,"resource":"patients","service":"medblock-backend","timestamp":"2025-06-26 23:29:21"}
{"environment":"development","ip":"::1","level":"info","message":"GET /api/v1/patients?phoneNumber=0712345678","service":"medblock-backend","timestamp":"2025-06-26 23:30:06","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"GET","resource":"/api/v1/patients?phoneNumber=0712345678","service":"medblock-backend","timestamp":"2025-06-26 23:30:06","userAgent":"curl/8.5.0"}
{"action":"patients_listed","count":1,"environment":"development","level":"info","limit":20,"message":"AUDIT_LOG","page":1,"resource":"patients","service":"medblock-backend","timestamp":"2025-06-26 23:30:06"}
{"environment":"development","level":"info","message":"--- Logger test from server.js ---","service":"medblock-backend","timestamp":"2025-06-26 23:42:21"}
{"environment":"development","level":"info","message":"✅ MongoDB connected successfully","service":"medblock-backend","timestamp":"2025-06-26 23:42:21"}
{"environment":"development","level":"info","message":"Database connected successfully","service":"medblock-backend","timestamp":"2025-06-26 23:42:21"}
{"environment":"development","level":"info","message":"Server running on port 3000 in development mode","service":"medblock-backend","timestamp":"2025-06-26 23:42:21"}
{"environment":"development","level":"info","message":"Health check available at http://localhost:3000/health","service":"medblock-backend","timestamp":"2025-06-26 23:42:21"}
{"environment":"development","level":"info","message":"API documentation available at http://localhost:3000/api/v1","service":"medblock-backend","timestamp":"2025-06-26 23:42:21"}
{"environment":"development","level":"info","message":"--- Logger test from server.js ---","service":"medblock-backend","timestamp":"2025-06-26 23:42:28"}
{"environment":"development","level":"info","message":"✅ MongoDB connected successfully","service":"medblock-backend","timestamp":"2025-06-26 23:42:28"}
{"environment":"development","level":"info","message":"Database connected successfully","service":"medblock-backend","timestamp":"2025-06-26 23:42:28"}
{"environment":"development","level":"info","message":"Server running on port 3000 in development mode","service":"medblock-backend","timestamp":"2025-06-26 23:42:28"}
{"environment":"development","level":"info","message":"Health check available at http://localhost:3000/health","service":"medblock-backend","timestamp":"2025-06-26 23:42:28"}
{"environment":"development","level":"info","message":"API documentation available at http://localhost:3000/api/v1","service":"medblock-backend","timestamp":"2025-06-26 23:42:28"}
{"environment":"development","level":"info","message":"--- Logger test from server.js ---","service":"medblock-backend","timestamp":"2025-06-26 23:42:35"}
{"environment":"development","level":"info","message":"✅ MongoDB connected successfully","service":"medblock-backend","timestamp":"2025-06-26 23:42:36"}
{"environment":"development","level":"info","message":"Database connected successfully","service":"medblock-backend","timestamp":"2025-06-26 23:42:36"}
{"environment":"development","level":"info","message":"Server running on port 3000 in development mode","service":"medblock-backend","timestamp":"2025-06-26 23:42:36"}
{"environment":"development","level":"info","message":"Health check available at http://localhost:3000/health","service":"medblock-backend","timestamp":"2025-06-26 23:42:36"}
{"environment":"development","level":"info","message":"API documentation available at http://localhost:3000/api/v1","service":"medblock-backend","timestamp":"2025-06-26 23:42:36"}
{"environment":"development","ip":"::1","level":"info","message":"POST /api/v1/auth/register","service":"medblock-backend","timestamp":"2025-06-26 23:42:37","userAgent":"curl/8.5.0"}
{"action":"user_registered","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","resource":"auth","service":"medblock-backend","timestamp":"2025-06-26 23:42:38","userAgent":"curl/8.5.0","userId":"685db0bdb5642849727fe6fb"}
{"environment":"development","level":"info","message":"--- Logger test from server.js ---","service":"medblock-backend","timestamp":"2025-06-26 23:42:55"}
{"environment":"development","level":"info","message":"✅ MongoDB connected successfully","service":"medblock-backend","timestamp":"2025-06-26 23:42:55"}
{"environment":"development","level":"info","message":"Database connected successfully","service":"medblock-backend","timestamp":"2025-06-26 23:42:55"}
{"environment":"development","level":"info","message":"Server running on port 3000 in development mode","service":"medblock-backend","timestamp":"2025-06-26 23:42:55"}
{"environment":"development","level":"info","message":"Health check available at http://localhost:3000/health","service":"medblock-backend","timestamp":"2025-06-26 23:42:55"}
{"environment":"development","level":"info","message":"API documentation available at http://localhost:3000/api/v1","service":"medblock-backend","timestamp":"2025-06-26 23:42:55"}
{"environment":"development","level":"info","message":"--- Logger test from server.js ---","service":"medblock-backend","timestamp":"2025-06-26 23:43:04"}
{"environment":"development","level":"info","message":"✅ MongoDB connected successfully","service":"medblock-backend","timestamp":"2025-06-26 23:43:05"}
{"environment":"development","level":"info","message":"Database connected successfully","service":"medblock-backend","timestamp":"2025-06-26 23:43:05"}
{"environment":"development","level":"info","message":"Server running on port 3000 in development mode","service":"medblock-backend","timestamp":"2025-06-26 23:43:05"}
{"environment":"development","level":"info","message":"Health check available at http://localhost:3000/health","service":"medblock-backend","timestamp":"2025-06-26 23:43:05"}
{"environment":"development","level":"info","message":"API documentation available at http://localhost:3000/api/v1","service":"medblock-backend","timestamp":"2025-06-26 23:43:05"}
{"environment":"development","ip":"::1","level":"info","message":"POST /api/v1/auth/login","service":"medblock-backend","timestamp":"2025-06-26 23:43:09","userAgent":"curl/8.5.0"}
{"action":"user_login","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","resource":"auth","service":"medblock-backend","timestamp":"2025-06-26 23:43:10","userAgent":"curl/8.5.0","userId":"685db0bdb5642849727fe6fb"}
{"environment":"development","ip":"::1","level":"info","message":"POST /api/v1/patients","service":"medblock-backend","timestamp":"2025-06-26 23:43:16","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"POST","resource":"/api/v1/patients","service":"medblock-backend","timestamp":"2025-06-26 23:43:16","userAgent":"curl/8.5.0","userId":"685db0bdb5642849727fe6fb"}
{"environment":"development","ip":"::1","level":"info","message":"POST /api/v1/patients","service":"medblock-backend","timestamp":"2025-06-26 23:43:22","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"POST","resource":"/api/v1/patients","service":"medblock-backend","timestamp":"2025-06-26 23:43:22","userAgent":"curl/8.5.0","userId":"685db0bdb5642849727fe6fb"}
{"environment":"development","ip":"::1","level":"info","message":"GET /api/v1/patients","service":"medblock-backend","timestamp":"2025-06-26 23:43:29","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"GET","resource":"/api/v1/patients","service":"medblock-backend","timestamp":"2025-06-26 23:43:29","userAgent":"curl/8.5.0","userId":"685db0bdb5642849727fe6fb"}
{"action":"patients_listed","count":1,"environment":"development","level":"info","limit":20,"message":"AUDIT_LOG","page":1,"resource":"patients","service":"medblock-backend","timestamp":"2025-06-26 23:43:29","userId":"685db0bdb5642849727fe6fb"}
{"environment":"development","ip":"::1","level":"info","message":"GET /api/v1/patients/PT-00123","service":"medblock-backend","timestamp":"2025-06-26 23:43:34","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"GET","resource":"/api/v1/patients/PT-00123","service":"medblock-backend","timestamp":"2025-06-26 23:43:34","userAgent":"curl/8.5.0","userId":"685db0bdb5642849727fe6fb"}
{"environment":"development","kind":"ObjectId","level":"error","message":"Get patient failed: Cast to ObjectId failed for value \"PT-00123\" (type string) at path \"_id\" for model \"Patient\"","path":"_id","reason":{},"service":"medblock-backend","stack":"CastError: Cast to ObjectId failed for value \"PT-00123\" (type string) at path \"_id\" for model \"Patient\"\n    at SchemaObjectId.cast (/home/josva/Desktop/MedBlock/node_modules/mongoose/lib/schema/objectId.js:251:11)\n    at SchemaType.applySetters (/home/josva/Desktop/MedBlock/node_modules/mongoose/lib/schemaType.js:1255:12)\n    at SchemaType.castForQuery (/home/josva/Desktop/MedBlock/node_modules/mongoose/lib/schemaType.js:1673:17)\n    at cast (/home/josva/Desktop/MedBlock/node_modules/mongoose/lib/cast.js:390:32)\n    at cast (/home/josva/Desktop/MedBlock/node_modules/mongoose/lib/cast.js:76:20)\n    at Query.cast (/home/josva/Desktop/MedBlock/node_modules/mongoose/lib/query.js:5055:12)\n    at Query._castConditions (/home/josva/Desktop/MedBlock/node_modules/mongoose/lib/query.js:2351:10)\n    at model.Query._findOne (/home/josva/Desktop/MedBlock/node_modules/mongoose/lib/query.js:2674:8)\n    at model.Query.exec (/home/josva/Desktop/MedBlock/node_modules/mongoose/lib/query.js:4604:80)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","stringValue":"\"PT-00123\"","timestamp":"2025-06-26 23:43:34","value":"PT-00123","valueType":"string"}
{"environment":"development","ip":"::1","level":"info","message":"GET /api/v1/patients/685db0bdb5642849727fe6fb","service":"medblock-backend","timestamp":"2025-06-26 23:43:41","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"GET","resource":"/api/v1/patients/685db0bdb5642849727fe6fb","service":"medblock-backend","timestamp":"2025-06-26 23:43:41","userAgent":"curl/8.5.0","userId":"685db0bdb5642849727fe6fb"}
{"environment":"development","level":"info","message":"--- Logger test from server.js ---","service":"medblock-backend","timestamp":"2025-06-26 23:44:31"}
{"environment":"development","level":"info","message":"✅ MongoDB connected successfully","service":"medblock-backend","timestamp":"2025-06-26 23:44:31"}
{"environment":"development","level":"info","message":"Database connected successfully","service":"medblock-backend","timestamp":"2025-06-26 23:44:31"}
{"environment":"development","level":"info","message":"Server running on port 3000 in development mode","service":"medblock-backend","timestamp":"2025-06-26 23:44:31"}
{"environment":"development","level":"info","message":"Health check available at http://localhost:3000/health","service":"medblock-backend","timestamp":"2025-06-26 23:44:31"}
{"environment":"development","level":"info","message":"API documentation available at http://localhost:3000/api/v1","service":"medblock-backend","timestamp":"2025-06-26 23:44:31"}
{"environment":"development","ip":"::1","level":"info","message":"GET /api/v1/patients/PT-00123","service":"medblock-backend","timestamp":"2025-06-26 23:44:37","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"GET","resource":"/api/v1/patients/PT-00123","service":"medblock-backend","timestamp":"2025-06-26 23:44:37","userAgent":"curl/8.5.0","userId":"685db0bdb5642849727fe6fb"}
{"environment":"development","kind":"ObjectId","level":"error","message":"Get patient failed: Cast to ObjectId failed for value \"PT-00123\" (type string) at path \"_id\" for model \"Patient\"","path":"_id","reason":{},"service":"medblock-backend","stack":"CastError: Cast to ObjectId failed for value \"PT-00123\" (type string) at path \"_id\" for model \"Patient\"\n    at SchemaObjectId.cast (/home/josva/Desktop/MedBlock/node_modules/mongoose/lib/schema/objectId.js:251:11)\n    at SchemaType.applySetters (/home/josva/Desktop/MedBlock/node_modules/mongoose/lib/schemaType.js:1255:12)\n    at SchemaType.castForQuery (/home/josva/Desktop/MedBlock/node_modules/mongoose/lib/schemaType.js:1673:17)\n    at cast (/home/josva/Desktop/MedBlock/node_modules/mongoose/lib/cast.js:390:32)\n    at cast (/home/josva/Desktop/MedBlock/node_modules/mongoose/lib/cast.js:76:20)\n    at Query.cast (/home/josva/Desktop/MedBlock/node_modules/mongoose/lib/query.js:5055:12)\n    at Query._castConditions (/home/josva/Desktop/MedBlock/node_modules/mongoose/lib/query.js:2351:10)\n    at model.Query._findOne (/home/josva/Desktop/MedBlock/node_modules/mongoose/lib/query.js:2674:8)\n    at model.Query.exec (/home/josva/Desktop/MedBlock/node_modules/mongoose/lib/query.js:4604:80)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","stringValue":"\"PT-00123\"","timestamp":"2025-06-26 23:44:37","value":"PT-00123","valueType":"string"}
{"environment":"development","level":"info","message":"--- Logger test from server.js ---","service":"medblock-backend","timestamp":"2025-06-26 23:45:06"}
{"environment":"development","level":"info","message":"✅ MongoDB connected successfully","service":"medblock-backend","timestamp":"2025-06-26 23:45:06"}
{"environment":"development","level":"info","message":"Database connected successfully","service":"medblock-backend","timestamp":"2025-06-26 23:45:06"}
{"environment":"development","level":"info","message":"Server running on port 3000 in development mode","service":"medblock-backend","timestamp":"2025-06-26 23:45:06"}
{"environment":"development","level":"info","message":"Health check available at http://localhost:3000/health","service":"medblock-backend","timestamp":"2025-06-26 23:45:06"}
{"environment":"development","level":"info","message":"API documentation available at http://localhost:3000/api/v1","service":"medblock-backend","timestamp":"2025-06-26 23:45:06"}
{"environment":"development","level":"info","message":"--- Logger test from server.js ---","service":"medblock-backend","timestamp":"2025-06-26 23:45:20"}
{"environment":"development","level":"info","message":"✅ MongoDB connected successfully","service":"medblock-backend","timestamp":"2025-06-26 23:45:20"}
{"environment":"development","level":"info","message":"Database connected successfully","service":"medblock-backend","timestamp":"2025-06-26 23:45:20"}
{"environment":"development","level":"info","message":"Server running on port 3000 in development mode","service":"medblock-backend","timestamp":"2025-06-26 23:45:20"}
{"environment":"development","level":"info","message":"Health check available at http://localhost:3000/health","service":"medblock-backend","timestamp":"2025-06-26 23:45:20"}
{"environment":"development","level":"info","message":"API documentation available at http://localhost:3000/api/v1","service":"medblock-backend","timestamp":"2025-06-26 23:45:20"}
{"environment":"development","ip":"::1","level":"info","message":"GET /api/v1/patients/PT-00123","service":"medblock-backend","timestamp":"2025-06-26 23:45:25","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"GET","resource":"/api/v1/patients/PT-00123","service":"medblock-backend","timestamp":"2025-06-26 23:45:25","userAgent":"curl/8.5.0","userId":"685db0bdb5642849727fe6fb"}
{"environment":"development","kind":"ObjectId","level":"error","message":"Get patient failed: Cast to ObjectId failed for value \"PT-00123\" (type string) at path \"_id\" for model \"Patient\"","path":"_id","reason":{},"service":"medblock-backend","stack":"CastError: Cast to ObjectId failed for value \"PT-00123\" (type string) at path \"_id\" for model \"Patient\"\n    at SchemaObjectId.cast (/home/josva/Desktop/MedBlock/node_modules/mongoose/lib/schema/objectId.js:251:11)\n    at SchemaType.applySetters (/home/josva/Desktop/MedBlock/node_modules/mongoose/lib/schemaType.js:1255:12)\n    at SchemaType.castForQuery (/home/josva/Desktop/MedBlock/node_modules/mongoose/lib/schemaType.js:1673:17)\n    at cast (/home/josva/Desktop/MedBlock/node_modules/mongoose/lib/cast.js:390:32)\n    at cast (/home/josva/Desktop/MedBlock/node_modules/mongoose/lib/cast.js:76:20)\n    at Query.cast (/home/josva/Desktop/MedBlock/node_modules/mongoose/lib/query.js:5055:12)\n    at Query._castConditions (/home/josva/Desktop/MedBlock/node_modules/mongoose/lib/query.js:2351:10)\n    at model.Query._findOne (/home/josva/Desktop/MedBlock/node_modules/mongoose/lib/query.js:2674:8)\n    at model.Query.exec (/home/josva/Desktop/MedBlock/node_modules/mongoose/lib/query.js:4604:80)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","stringValue":"\"PT-00123\"","timestamp":"2025-06-26 23:45:25","value":"PT-00123","valueType":"string"}
{"environment":"development","level":"info","message":"--- Logger test from server.js ---","service":"medblock-backend","timestamp":"2025-06-26 23:45:36"}
{"environment":"development","level":"info","message":"✅ MongoDB connected successfully","service":"medblock-backend","timestamp":"2025-06-26 23:45:37"}
{"environment":"development","level":"info","message":"Database connected successfully","service":"medblock-backend","timestamp":"2025-06-26 23:45:37"}
{"environment":"development","level":"info","message":"Server running on port 3000 in development mode","service":"medblock-backend","timestamp":"2025-06-26 23:45:37"}
{"environment":"development","level":"info","message":"Health check available at http://localhost:3000/health","service":"medblock-backend","timestamp":"2025-06-26 23:45:37"}
{"environment":"development","level":"info","message":"API documentation available at http://localhost:3000/api/v1","service":"medblock-backend","timestamp":"2025-06-26 23:45:37"}
{"environment":"development","level":"info","message":"--- Logger test from server.js ---","service":"medblock-backend","timestamp":"2025-06-26 23:45:56"}
{"environment":"development","level":"info","message":"✅ MongoDB connected successfully","service":"medblock-backend","timestamp":"2025-06-26 23:45:56"}
{"environment":"development","level":"info","message":"Database connected successfully","service":"medblock-backend","timestamp":"2025-06-26 23:45:56"}
{"environment":"development","level":"info","message":"Server running on port 3000 in development mode","service":"medblock-backend","timestamp":"2025-06-26 23:45:56"}
{"environment":"development","level":"info","message":"Health check available at http://localhost:3000/health","service":"medblock-backend","timestamp":"2025-06-26 23:45:56"}
{"environment":"development","level":"info","message":"API documentation available at http://localhost:3000/api/v1","service":"medblock-backend","timestamp":"2025-06-26 23:45:56"}
{"environment":"development","ip":"::1","level":"info","message":"GET /api/v1/patients/PT-00123","service":"medblock-backend","timestamp":"2025-06-26 23:50:21","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"GET","resource":"/api/v1/patients/PT-00123","service":"medblock-backend","timestamp":"2025-06-26 23:50:21","userAgent":"curl/8.5.0","userId":"685da1f425549ec1ae4d9eab"}
{"environment":"development","kind":"ObjectId","level":"error","message":"Get patient failed: Cast to ObjectId failed for value \"PT-00123\" (type string) at path \"_id\" for model \"Patient\"","path":"_id","reason":{},"service":"medblock-backend","stack":"CastError: Cast to ObjectId failed for value \"PT-00123\" (type string) at path \"_id\" for model \"Patient\"\n    at SchemaObjectId.cast (/home/josva/Desktop/MedBlock/node_modules/mongoose/lib/schema/objectId.js:251:11)\n    at SchemaType.applySetters (/home/josva/Desktop/MedBlock/node_modules/mongoose/lib/schemaType.js:1255:12)\n    at SchemaType.castForQuery (/home/josva/Desktop/MedBlock/node_modules/mongoose/lib/schemaType.js:1673:17)\n    at cast (/home/josva/Desktop/MedBlock/node_modules/mongoose/lib/cast.js:390:32)\n    at cast (/home/josva/Desktop/MedBlock/node_modules/mongoose/lib/cast.js:76:20)\n    at Query.cast (/home/josva/Desktop/MedBlock/node_modules/mongoose/lib/query.js:5055:12)\n    at Query._castConditions (/home/josva/Desktop/MedBlock/node_modules/mongoose/lib/query.js:2351:10)\n    at model.Query._findOne (/home/josva/Desktop/MedBlock/node_modules/mongoose/lib/query.js:2674:8)\n    at model.Query.exec (/home/josva/Desktop/MedBlock/node_modules/mongoose/lib/query.js:4604:80)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","stringValue":"\"PT-00123\"","timestamp":"2025-06-26 23:50:21","value":"PT-00123","valueType":"string"}
{"environment":"development","ip":"::1","level":"info","message":"GET /api/v1/patients","service":"medblock-backend","timestamp":"2025-06-26 23:51:58","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"GET","resource":"/api/v1/patients","service":"medblock-backend","timestamp":"2025-06-26 23:51:58","userAgent":"curl/8.5.0","userId":"685da1f425549ec1ae4d9eab"}
{"action":"patients_listed","count":1,"environment":"development","level":"info","limit":20,"message":"AUDIT_LOG","page":1,"resource":"patients","service":"medblock-backend","timestamp":"2025-06-26 23:51:58","userId":"685da1f425549ec1ae4d9eab"}
{"environment":"development","ip":"::1","level":"info","message":"GET /api/v1/patients","service":"medblock-backend","timestamp":"2025-06-26 23:53:35","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"GET","resource":"/api/v1/patients","service":"medblock-backend","timestamp":"2025-06-26 23:53:35","userAgent":"curl/8.5.0","userId":"685da1f425549ec1ae4d9eab"}
{"action":"patients_listed","count":1,"environment":"development","level":"info","limit":20,"message":"AUDIT_LOG","page":1,"resource":"patients","service":"medblock-backend","timestamp":"2025-06-26 23:53:35","userId":"685da1f425549ec1ae4d9eab"}
{"environment":"development","level":"info","message":"--- Logger test from server.js ---","service":"medblock-backend","timestamp":"2025-06-27 00:10:49"}
{"environment":"development","level":"info","message":"✅ MongoDB connected successfully","service":"medblock-backend","timestamp":"2025-06-27 00:10:50"}
{"environment":"development","level":"info","message":"Database connected successfully","service":"medblock-backend","timestamp":"2025-06-27 00:10:50"}
{"environment":"development","level":"info","message":"Server running on port 3000 in development mode","service":"medblock-backend","timestamp":"2025-06-27 00:10:50"}
{"environment":"development","level":"info","message":"Health check available at http://localhost:3000/health","service":"medblock-backend","timestamp":"2025-06-27 00:10:50"}
{"environment":"development","level":"info","message":"API documentation available at http://localhost:3000/api/v1","service":"medblock-backend","timestamp":"2025-06-27 00:10:50"}
{"environment":"development","level":"info","message":"--- Logger test from server.js ---","service":"medblock-backend","timestamp":"2025-06-27 00:10:58"}
{"environment":"development","level":"info","message":"✅ MongoDB connected successfully","service":"medblock-backend","timestamp":"2025-06-27 00:10:59"}
{"environment":"development","level":"info","message":"Database connected successfully","service":"medblock-backend","timestamp":"2025-06-27 00:10:59"}
{"environment":"development","level":"info","message":"Server running on port 3000 in development mode","service":"medblock-backend","timestamp":"2025-06-27 00:10:59"}
{"environment":"development","level":"info","message":"Health check available at http://localhost:3000/health","service":"medblock-backend","timestamp":"2025-06-27 00:10:59"}
{"environment":"development","level":"info","message":"API documentation available at http://localhost:3000/api/v1","service":"medblock-backend","timestamp":"2025-06-27 00:10:59"}
{"environment":"development","level":"info","message":"--- Logger test from server.js ---","service":"medblock-backend","timestamp":"2025-06-27 00:11:08"}
{"environment":"development","level":"info","message":"✅ MongoDB connected successfully","service":"medblock-backend","timestamp":"2025-06-27 00:11:08"}
{"environment":"development","level":"info","message":"Database connected successfully","service":"medblock-backend","timestamp":"2025-06-27 00:11:08"}
{"environment":"development","level":"info","message":"Server running on port 3000 in development mode","service":"medblock-backend","timestamp":"2025-06-27 00:11:08"}
{"environment":"development","level":"info","message":"Health check available at http://localhost:3000/health","service":"medblock-backend","timestamp":"2025-06-27 00:11:08"}
{"environment":"development","level":"info","message":"API documentation available at http://localhost:3000/api/v1","service":"medblock-backend","timestamp":"2025-06-27 00:11:08"}
{"environment":"development","level":"info","message":"--- Logger test from server.js ---","service":"medblock-backend","timestamp":"2025-06-27 00:11:19"}
{"environment":"development","level":"info","message":"✅ MongoDB connected successfully","service":"medblock-backend","timestamp":"2025-06-27 00:11:19"}
{"environment":"development","level":"info","message":"Database connected successfully","service":"medblock-backend","timestamp":"2025-06-27 00:11:19"}
{"environment":"development","level":"info","message":"Server running on port 3000 in development mode","service":"medblock-backend","timestamp":"2025-06-27 00:11:19"}
{"environment":"development","level":"info","message":"Health check available at http://localhost:3000/health","service":"medblock-backend","timestamp":"2025-06-27 00:11:19"}
{"environment":"development","level":"info","message":"API documentation available at http://localhost:3000/api/v1","service":"medblock-backend","timestamp":"2025-06-27 00:11:19"}
{"environment":"development","level":"info","message":"--- Logger test from server.js ---","service":"medblock-backend","timestamp":"2025-06-27 00:11:33"}
{"environment":"development","level":"info","message":"✅ MongoDB connected successfully","service":"medblock-backend","timestamp":"2025-06-27 00:11:33"}
{"environment":"development","level":"info","message":"Database connected successfully","service":"medblock-backend","timestamp":"2025-06-27 00:11:33"}
{"environment":"development","level":"info","message":"Server running on port 3000 in development mode","service":"medblock-backend","timestamp":"2025-06-27 00:11:33"}
{"environment":"development","level":"info","message":"Health check available at http://localhost:3000/health","service":"medblock-backend","timestamp":"2025-06-27 00:11:33"}
{"environment":"development","level":"info","message":"API documentation available at http://localhost:3000/api/v1","service":"medblock-backend","timestamp":"2025-06-27 00:11:33"}
{"environment":"development","ip":"::1","level":"info","message":"GET /api/v1/patients","service":"medblock-backend","timestamp":"2025-06-27 00:16:47","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"GET","resource":"/api/v1/patients","service":"medblock-backend","timestamp":"2025-06-27 00:16:47","userAgent":"curl/8.5.0","userId":"685da1f425549ec1ae4d9eab"}
{"action":"patients_listed","count":1,"environment":"development","level":"info","limit":20,"message":"AUDIT_LOG","page":1,"resource":"patients","service":"medblock-backend","timestamp":"2025-06-27 00:16:47","userId":"685da1f425549ec1ae4d9eab"}
{"environment":"development","ip":"::1","level":"info","message":"GET /api/v1/patients/658da1f425549ec1ae4d9eab","service":"medblock-backend","timestamp":"2025-06-27 00:18:16","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"GET","resource":"/api/v1/patients/658da1f425549ec1ae4d9eab","service":"medblock-backend","timestamp":"2025-06-27 00:18:16","userAgent":"curl/8.5.0","userId":"685da1f425549ec1ae4d9eab"}
{"environment":"development","ip":"::1","level":"info","message":"DELETE /api/v1/patients/658da1f425549ec1ae4d9eab","service":"medblock-backend","timestamp":"2025-06-27 00:19:08","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"DELETE","resource":"/api/v1/patients/658da1f425549ec1ae4d9eab","service":"medblock-backend","timestamp":"2025-06-27 00:19:08","userAgent":"curl/8.5.0","userId":"685da1f425549ec1ae4d9eab"}
{"environment":"development","ip":"::1","level":"info","message":"GET /api/v1/patients","service":"medblock-backend","timestamp":"2025-06-27 00:19:44","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"GET","resource":"/api/v1/patients","service":"medblock-backend","timestamp":"2025-06-27 00:19:44","userAgent":"curl/8.5.0","userId":"685da1f425549ec1ae4d9eab"}
{"action":"patients_listed","count":1,"environment":"development","level":"info","limit":20,"message":"AUDIT_LOG","page":1,"resource":"patients","service":"medblock-backend","timestamp":"2025-06-27 00:19:44","userId":"685da1f425549ec1ae4d9eab"}
{"environment":"development","ip":"::1","level":"info","message":"GET /api/v1/patients/685da8ba25549ec1ae4d9eba","service":"medblock-backend","timestamp":"2025-06-27 00:21:34","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"GET","resource":"/api/v1/patients/685da8ba25549ec1ae4d9eba","service":"medblock-backend","timestamp":"2025-06-27 00:21:34","userAgent":"curl/8.5.0","userId":"685da1f425549ec1ae4d9eab"}
{"action":"patient_viewed","environment":"development","level":"info","message":"AUDIT_LOG","patientId":"PT-00123","resource":"patient:PT-00123","service":"medblock-backend","timestamp":"2025-06-27 00:21:34","userId":"685da1f425549ec1ae4d9eab"}
{"environment":"development","ip":"::1","level":"info","message":"POST /api/v1/patients","service":"medblock-backend","timestamp":"2025-06-27 00:26:14","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"POST","resource":"/api/v1/patients","service":"medblock-backend","timestamp":"2025-06-27 00:26:14","userAgent":"curl/8.5.0","userId":"685da1f425549ec1ae4d9eab"}
{"environment":"development","ip":"::1","level":"info","message":"PATCH /api/v1/patients/685da8ba25549ec1ae4d9eba","service":"medblock-backend","timestamp":"2025-06-27 00:27:15","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"PATCH","resource":"/api/v1/patients/685da8ba25549ec1ae4d9eba","service":"medblock-backend","timestamp":"2025-06-27 00:27:15","userAgent":"curl/8.5.0","userId":"685da1f425549ec1ae4d9eab"}
{"environment":"development","ip":"::1","level":"info","message":"DELETE /api/v1/patients/685da8ba25549ec1ae4d9eba","service":"medblock-backend","timestamp":"2025-06-27 00:27:52","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"DELETE","resource":"/api/v1/patients/685da8ba25549ec1ae4d9eba","service":"medblock-backend","timestamp":"2025-06-27 00:27:52","userAgent":"curl/8.5.0","userId":"685da1f425549ec1ae4d9eab"}
{"action":"patient_deleted","environment":"development","level":"info","message":"AUDIT_LOG","patientId":"PT-00123","patientName":"Jane Doe","resource":"patient:PT-00123","service":"medblock-backend","timestamp":"2025-06-27 00:27:52","userId":"685da1f425549ec1ae4d9eab"}
{"environment":"development","ip":"::1","level":"info","message":"GET /api/v1/patients/685da8ba25549ec1ae4d9eba","service":"medblock-backend","timestamp":"2025-06-27 00:28:26","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"GET","resource":"/api/v1/patients/685da8ba25549ec1ae4d9eba","service":"medblock-backend","timestamp":"2025-06-27 00:28:26","userAgent":"curl/8.5.0","userId":"685da1f425549ec1ae4d9eab"}
{"action":"patient_viewed","environment":"development","level":"info","message":"AUDIT_LOG","patientId":"PT-00123","resource":"patient:PT-00123","service":"medblock-backend","timestamp":"2025-06-27 00:28:26","userId":"685da1f425549ec1ae4d9eab"}
{"environment":"development","level":"info","message":"--- Logger test from server.js ---","service":"medblock-backend","timestamp":"2025-06-27 00:37:22"}
{"environment":"development","level":"info","message":"✅ MongoDB connected successfully","service":"medblock-backend","timestamp":"2025-06-27 00:37:22"}
{"environment":"development","level":"info","message":"Database connected successfully","service":"medblock-backend","timestamp":"2025-06-27 00:37:22"}
{"environment":"development","level":"info","message":"Server running on port 3000 in development mode","service":"medblock-backend","timestamp":"2025-06-27 00:37:22"}
{"environment":"development","level":"info","message":"Health check available at http://localhost:3000/health","service":"medblock-backend","timestamp":"2025-06-27 00:37:22"}
{"environment":"development","level":"info","message":"API documentation available at http://localhost:3000/api/v1","service":"medblock-backend","timestamp":"2025-06-27 00:37:22"}
{"environment":"development","level":"info","message":"--- Logger test from server.js ---","service":"medblock-backend","timestamp":"2025-06-27 00:37:41"}
{"environment":"development","level":"info","message":"✅ MongoDB connected successfully","service":"medblock-backend","timestamp":"2025-06-27 00:37:42"}
{"environment":"development","level":"info","message":"Database connected successfully","service":"medblock-backend","timestamp":"2025-06-27 00:37:42"}
{"environment":"development","level":"info","message":"Server running on port 3000 in development mode","service":"medblock-backend","timestamp":"2025-06-27 00:37:42"}
{"environment":"development","level":"info","message":"Health check available at http://localhost:3000/health","service":"medblock-backend","timestamp":"2025-06-27 00:37:42"}
{"environment":"development","level":"info","message":"API documentation available at http://localhost:3000/api/v1","service":"medblock-backend","timestamp":"2025-06-27 00:37:42"}
{"environment":"development","level":"info","message":"--- Logger test from server.js ---","service":"medblock-backend","timestamp":"2025-06-27 00:37:59"}
{"environment":"development","level":"info","message":"✅ MongoDB connected successfully","service":"medblock-backend","timestamp":"2025-06-27 00:38:00"}
{"environment":"development","level":"info","message":"Database connected successfully","service":"medblock-backend","timestamp":"2025-06-27 00:38:00"}
{"environment":"development","level":"info","message":"Server running on port 3000 in development mode","service":"medblock-backend","timestamp":"2025-06-27 00:38:00"}
{"environment":"development","level":"info","message":"Health check available at http://localhost:3000/health","service":"medblock-backend","timestamp":"2025-06-27 00:38:00"}
{"environment":"development","level":"info","message":"API documentation available at http://localhost:3000/api/v1","service":"medblock-backend","timestamp":"2025-06-27 00:38:00"}
{"environment":"development","level":"info","message":"--- Logger test from server.js ---","service":"medblock-backend","timestamp":"2025-06-27 00:38:14"}
{"environment":"development","level":"info","message":"✅ MongoDB connected successfully","service":"medblock-backend","timestamp":"2025-06-27 00:38:14"}
{"environment":"development","level":"info","message":"Database connected successfully","service":"medblock-backend","timestamp":"2025-06-27 00:38:14"}
{"environment":"development","level":"info","message":"Server running on port 3000 in development mode","service":"medblock-backend","timestamp":"2025-06-27 00:38:14"}
{"environment":"development","level":"info","message":"Health check available at http://localhost:3000/health","service":"medblock-backend","timestamp":"2025-06-27 00:38:14"}
{"environment":"development","level":"info","message":"API documentation available at http://localhost:3000/api/v1","service":"medblock-backend","timestamp":"2025-06-27 00:38:14"}
{"environment":"development","level":"info","message":"--- Logger test from server.js ---","service":"medblock-backend","timestamp":"2025-06-27 00:38:29"}
{"environment":"development","level":"info","message":"✅ MongoDB connected successfully","service":"medblock-backend","timestamp":"2025-06-27 00:38:30"}
{"environment":"development","level":"info","message":"Database connected successfully","service":"medblock-backend","timestamp":"2025-06-27 00:38:30"}
{"environment":"development","level":"info","message":"Server running on port 3000 in development mode","service":"medblock-backend","timestamp":"2025-06-27 00:38:30"}
{"environment":"development","level":"info","message":"Health check available at http://localhost:3000/health","service":"medblock-backend","timestamp":"2025-06-27 00:38:30"}
{"environment":"development","level":"info","message":"API documentation available at http://localhost:3000/api/v1","service":"medblock-backend","timestamp":"2025-06-27 00:38:30"}
{"environment":"development","level":"info","message":"--- Logger test from server.js ---","service":"medblock-backend","timestamp":"2025-06-27 00:38:42"}
{"environment":"development","level":"info","message":"✅ MongoDB connected successfully","service":"medblock-backend","timestamp":"2025-06-27 00:38:42"}
{"environment":"development","level":"info","message":"Database connected successfully","service":"medblock-backend","timestamp":"2025-06-27 00:38:42"}
{"environment":"development","level":"info","message":"Server running on port 3000 in development mode","service":"medblock-backend","timestamp":"2025-06-27 00:38:42"}
{"environment":"development","level":"info","message":"Health check available at http://localhost:3000/health","service":"medblock-backend","timestamp":"2025-06-27 00:38:42"}
{"environment":"development","level":"info","message":"API documentation available at http://localhost:3000/api/v1","service":"medblock-backend","timestamp":"2025-06-27 00:38:42"}
{"environment":"development","level":"info","message":"--- Logger test from server.js ---","service":"medblock-backend","timestamp":"2025-06-27 00:38:51"}
{"environment":"development","level":"info","message":"✅ MongoDB connected successfully","service":"medblock-backend","timestamp":"2025-06-27 00:38:51"}
{"environment":"development","level":"info","message":"Database connected successfully","service":"medblock-backend","timestamp":"2025-06-27 00:38:51"}
{"environment":"development","level":"info","message":"Server running on port 3000 in development mode","service":"medblock-backend","timestamp":"2025-06-27 00:38:51"}
{"environment":"development","level":"info","message":"Health check available at http://localhost:3000/health","service":"medblock-backend","timestamp":"2025-06-27 00:38:51"}
{"environment":"development","level":"info","message":"API documentation available at http://localhost:3000/api/v1","service":"medblock-backend","timestamp":"2025-06-27 00:38:51"}
{"environment":"development","ip":"::1","level":"info","message":"POST /api/v1/patients","service":"medblock-backend","timestamp":"2025-06-27 00:44:10","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"POST","resource":"/api/v1/patients","service":"medblock-backend","timestamp":"2025-06-27 00:44:10","userAgent":"curl/8.5.0","userId":"685da1f425549ec1ae4d9eab"}
{"environment":"development","ip":"::1","level":"info","message":"POST /api/v1/patients","service":"medblock-backend","timestamp":"2025-06-27 00:45:39","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"POST","resource":"/api/v1/patients","service":"medblock-backend","timestamp":"2025-06-27 00:45:39","userAgent":"curl/8.5.0","userId":"685da1f425549ec1ae4d9eab"}
{"environment":"development","ip":"::1","level":"info","message":"GET /api/v1/patients","service":"medblock-backend","timestamp":"2025-06-27 00:47:25","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"GET","resource":"/api/v1/patients","service":"medblock-backend","timestamp":"2025-06-27 00:47:25","userAgent":"curl/8.5.0","userId":"685da1f425549ec1ae4d9eab"}
{"action":"patients_listed","count":1,"environment":"development","level":"info","limit":20,"message":"AUDIT_LOG","page":1,"resource":"patients","service":"medblock-backend","timestamp":"2025-06-27 00:47:25","userId":"685da1f425549ec1ae4d9eab"}
{"environment":"development","ip":"::1","level":"info","message":"PATCH /api/v1/patients/685da8ba25549ec1ae4d9eba","service":"medblock-backend","timestamp":"2025-06-27 00:48:35","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"PATCH","resource":"/api/v1/patients/685da8ba25549ec1ae4d9eba","service":"medblock-backend","timestamp":"2025-06-27 00:48:35","userAgent":"curl/8.5.0","userId":"685da1f425549ec1ae4d9eab"}
{"action":"patient_updated","environment":"development","level":"info","message":"AUDIT_LOG","patientId":"PT-00123","patientName":"Jane Doe","resource":"patient:PT-00123","service":"medblock-backend","timestamp":"2025-06-27 00:48:35","userId":"685da1f425549ec1ae4d9eab"}
{"environment":"development","ip":"::1","level":"info","message":"DELETE /api/v1/patients/685da8ba25549ec1ae4d9eba","service":"medblock-backend","timestamp":"2025-06-27 00:50:01","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"DELETE","resource":"/api/v1/patients/685da8ba25549ec1ae4d9eba","service":"medblock-backend","timestamp":"2025-06-27 00:50:01","userAgent":"curl/8.5.0","userId":"685da1f425549ec1ae4d9eab"}
{"action":"patient_deleted","environment":"development","level":"info","message":"AUDIT_LOG","patientId":"PT-00123","patientName":"Jane Doe","resource":"patient:PT-00123","service":"medblock-backend","timestamp":"2025-06-27 00:50:01","userId":"685da1f425549ec1ae4d9eab"}
{"environment":"development","ip":"::1","level":"info","message":"POST /api/v1/patients","service":"medblock-backend","timestamp":"2025-06-27 00:56:34","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"POST","resource":"/api/v1/patients","service":"medblock-backend","timestamp":"2025-06-27 00:56:34","userAgent":"curl/8.5.0","userId":"685da1f425549ec1ae4d9eab"}
{"environment":"development","ip":"::1","level":"info","message":"POST /api/v1/patients","service":"medblock-backend","timestamp":"2025-06-27 00:59:34","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"POST","resource":"/api/v1/patients","service":"medblock-backend","timestamp":"2025-06-27 00:59:34","userAgent":"curl/8.5.0","userId":"685da1f425549ec1ae4d9eab"}
{"environment":"development","ip":"::1","level":"info","message":"POST /api/v1/patients","service":"medblock-backend","timestamp":"2025-06-27 01:00:29","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"POST","resource":"/api/v1/patients","service":"medblock-backend","timestamp":"2025-06-27 01:00:29","userAgent":"curl/8.5.0","userId":"685da1f425549ec1ae4d9eab"}
{"environment":"development","ip":"::1","level":"info","message":"POST /api/v1/patients","service":"medblock-backend","timestamp":"2025-06-27 01:00:43","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"POST","resource":"/api/v1/patients","service":"medblock-backend","timestamp":"2025-06-27 01:00:43","userAgent":"curl/8.5.0","userId":"685da1f425549ec1ae4d9eab"}
{"environment":"development","ip":"::1","level":"info","message":"POST /api/v1/auth/login","service":"medblock-backend","timestamp":"2025-06-27 01:08:18","userAgent":"curl/8.5.0"}
{"action":"user_login","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","resource":"auth","service":"medblock-backend","timestamp":"2025-06-27 01:08:18","userAgent":"curl/8.5.0","userId":"685da1f425549ec1ae4d9eab"}
{"environment":"development","ip":"::1","level":"info","message":"POST /api/v1/patients","service":"medblock-backend","timestamp":"2025-06-27 01:10:17","userAgent":"curl/8.5.0"}
{"environment":"development","level":"info","message":"--- Logger test from server.js ---","service":"medblock-backend","timestamp":"2025-06-27 01:10:37"}
{"environment":"development","level":"info","message":"✅ MongoDB connected successfully","service":"medblock-backend","timestamp":"2025-06-27 01:10:37"}
{"environment":"development","level":"info","message":"Database connected successfully","service":"medblock-backend","timestamp":"2025-06-27 01:10:37"}
{"environment":"development","level":"info","message":"Server running on port 3000 in development mode","service":"medblock-backend","timestamp":"2025-06-27 01:10:37"}
{"environment":"development","level":"info","message":"Health check available at http://localhost:3000/health","service":"medblock-backend","timestamp":"2025-06-27 01:10:37"}
{"environment":"development","level":"info","message":"API documentation available at http://localhost:3000/api/v1","service":"medblock-backend","timestamp":"2025-06-27 01:10:37"}
{"environment":"development","ip":"::1","level":"info","message":"POST /api/v1/patients","service":"medblock-backend","timestamp":"2025-06-27 01:10:44","userAgent":"curl/8.5.0"}
{"environment":"development","level":"info","message":"--- Logger test from server.js ---","service":"medblock-backend","timestamp":"2025-06-27 01:10:52"}
{"environment":"development","level":"info","message":"✅ MongoDB connected successfully","service":"medblock-backend","timestamp":"2025-06-27 01:10:53"}
{"environment":"development","level":"info","message":"Database connected successfully","service":"medblock-backend","timestamp":"2025-06-27 01:10:53"}
{"environment":"development","level":"info","message":"Server running on port 3000 in development mode","service":"medblock-backend","timestamp":"2025-06-27 01:10:53"}
{"environment":"development","level":"info","message":"Health check available at http://localhost:3000/health","service":"medblock-backend","timestamp":"2025-06-27 01:10:53"}
{"environment":"development","level":"info","message":"API documentation available at http://localhost:3000/api/v1","service":"medblock-backend","timestamp":"2025-06-27 01:10:53"}
{"environment":"development","ip":"::1","level":"info","message":"POST /api/v1/patients","service":"medblock-backend","timestamp":"2025-06-27 01:12:01","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"POST","resource":"/api/v1/patients","service":"medblock-backend","timestamp":"2025-06-27 01:12:01","userAgent":"curl/8.5.0","userId":"685da1f425549ec1ae4d9eab"}
{"environment":"development","ip":"::1","level":"info","message":"POST /api/v1/patients","service":"medblock-backend","timestamp":"2025-06-27 01:14:43","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"POST","resource":"/api/v1/patients","service":"medblock-backend","timestamp":"2025-06-27 01:14:43","userAgent":"curl/8.5.0","userId":"685da1f425549ec1ae4d9eab"}
{"_message":"Patient validation failed","environment":"development","errors":{"address.city":{"kind":"required","message":"Path `address.city` is required.","name":"ValidatorError","path":"address.city","properties":{"message":"Path `address.city` is required.","path":"address.city","type":"required"}},"address.street":{"kind":"required","message":"Path `address.street` is required.","name":"ValidatorError","path":"address.street","properties":{"message":"Path `address.street` is required.","path":"address.street","type":"required"}},"emergencyContact.phoneNumber":{"kind":"required","message":"Path `emergencyContact.phoneNumber` is required.","name":"ValidatorError","path":"emergencyContact.phoneNumber","properties":{"message":"Path `emergencyContact.phoneNumber` is required.","path":"emergencyContact.phoneNumber","type":"required"}},"emergencyContact.relationship":{"kind":"enum","message":"`wife` is not a valid enum value for path `emergencyContact.relationship`.","name":"ValidatorError","path":"emergencyContact.relationship","properties":{"enumValues":["spouse","parent","child","sibling","friend","other"],"message":"`wife` is not a valid enum value for path `emergencyContact.relationship`.","path":"emergencyContact.relationship","type":"enum","value":"wife"},"value":"wife"},"patientId":{"kind":"required","message":"Path `patientId` is required.","name":"ValidatorError","path":"patientId","properties":{"message":"Path `patientId` is required.","path":"patientId","type":"required"}}},"level":"error","message":"Create patient failed: Patient validation failed: emergencyContact.phoneNumber: Path `emergencyContact.phoneNumber` is required., emergencyContact.relationship: `wife` is not a valid enum value for path `emergencyContact.relationship`., address.city: Path `address.city` is required., address.street: Path `address.street` is required., patientId: Path `patientId` is required.","service":"medblock-backend","stack":"ValidationError: Patient validation failed: emergencyContact.phoneNumber: Path `emergencyContact.phoneNumber` is required., emergencyContact.relationship: `wife` is not a valid enum value for path `emergencyContact.relationship`., address.city: Path `address.city` is required., address.street: Path `address.street` is required., patientId: Path `patientId` is required.\n    at Document.invalidate (/home/josva/Desktop/MedBlock/node_modules/mongoose/lib/document.js:3352:32)\n    at /home/josva/Desktop/MedBlock/node_modules/mongoose/lib/document.js:3113:17\n    at /home/josva/Desktop/MedBlock/node_modules/mongoose/lib/schemaType.js:1407:9\n    at process.processTicksAndRejections (node:internal/process/task_queues:85:11)","timestamp":"2025-06-27 01:14:43"}
{"environment":"development","ip":"::1","level":"info","message":"POST /api/v1/patients","service":"medblock-backend","timestamp":"2025-06-27 01:18:33","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"POST","resource":"/api/v1/patients","service":"medblock-backend","timestamp":"2025-06-27 01:18:33","userAgent":"curl/8.5.0","userId":"685da1f425549ec1ae4d9eab"}
{"action":"patient_created","environment":"development","level":"info","message":"AUDIT_LOG","patientId":"P-0001","patientName":"James Otieno","resource":"patient:P-0001","service":"medblock-backend","timestamp":"2025-06-27 01:18:33","userId":"685da1f425549ec1ae4d9eab"}
{"environment":"development","ip":"::1","level":"info","message":"POST /api/v1/patients","service":"medblock-backend","timestamp":"2025-06-27 01:19:18","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"POST","resource":"/api/v1/patients","service":"medblock-backend","timestamp":"2025-06-27 01:19:18","userAgent":"curl/8.5.0","userId":"685da1f425549ec1ae4d9eab"}
{"action":"patient_created","environment":"development","level":"info","message":"AUDIT_LOG","patientId":"P-0002","patientName":"Grace Mwende","resource":"patient:P-0002","service":"medblock-backend","timestamp":"2025-06-27 01:19:18","userId":"685da1f425549ec1ae4d9eab"}
{"environment":"development","ip":"::1","level":"info","message":"POST /api/v1/patients","service":"medblock-backend","timestamp":"2025-06-27 01:19:33","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"POST","resource":"/api/v1/patients","service":"medblock-backend","timestamp":"2025-06-27 01:19:33","userAgent":"curl/8.5.0","userId":"685da1f425549ec1ae4d9eab"}
{"action":"patient_created","environment":"development","level":"info","message":"AUDIT_LOG","patientId":"P-0003","patientName":"Brian Njoroge","resource":"patient:P-0003","service":"medblock-backend","timestamp":"2025-06-27 01:19:33","userId":"685da1f425549ec1ae4d9eab"}
{"environment":"development","ip":"::1","level":"info","message":"POST /api/v1/patients","service":"medblock-backend","timestamp":"2025-06-27 01:19:49","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"POST","resource":"/api/v1/patients","service":"medblock-backend","timestamp":"2025-06-27 01:19:49","userAgent":"curl/8.5.0","userId":"685da1f425549ec1ae4d9eab"}
{"action":"patient_created","environment":"development","level":"info","message":"AUDIT_LOG","patientId":"P-0004","patientName":"Amina Yusuf","resource":"patient:P-0004","service":"medblock-backend","timestamp":"2025-06-27 01:19:49","userId":"685da1f425549ec1ae4d9eab"}
{"environment":"development","ip":"::1","level":"info","message":"POST /api/v1/patients","service":"medblock-backend","timestamp":"2025-06-27 01:20:04","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"POST","resource":"/api/v1/patients","service":"medblock-backend","timestamp":"2025-06-27 01:20:04","userAgent":"curl/8.5.0","userId":"685da1f425549ec1ae4d9eab"}
{"action":"patient_created","environment":"development","level":"info","message":"AUDIT_LOG","patientId":"P-0005","patientName":"Kelvin Kiprotich","resource":"patient:P-0005","service":"medblock-backend","timestamp":"2025-06-27 01:20:04","userId":"685da1f425549ec1ae4d9eab"}
{"environment":"development","ip":"::1","level":"info","message":"GET /api/v1/patients","service":"medblock-backend","timestamp":"2025-06-27 01:21:45","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"GET","resource":"/api/v1/patients","service":"medblock-backend","timestamp":"2025-06-27 01:21:45","userAgent":"curl/8.5.0","userId":"685da1f425549ec1ae4d9eab"}
{"action":"patients_listed","count":6,"environment":"development","level":"info","limit":20,"message":"AUDIT_LOG","page":1,"resource":"patients","service":"medblock-backend","timestamp":"2025-06-27 01:21:46","userId":"685da1f425549ec1ae4d9eab"}
{"environment":"development","ip":"::1","level":"info","message":"GET /api/v1/patients/685dc7399aaaebdbf35da64b","service":"medblock-backend","timestamp":"2025-06-27 01:22:53","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"GET","resource":"/api/v1/patients/685dc7399aaaebdbf35da64b","service":"medblock-backend","timestamp":"2025-06-27 01:22:53","userAgent":"curl/8.5.0","userId":"685da1f425549ec1ae4d9eab"}
{"action":"patient_viewed","environment":"development","level":"info","message":"AUDIT_LOG","patientId":"P-0001","resource":"patient:P-0001","service":"medblock-backend","timestamp":"2025-06-27 01:22:53","userId":"685da1f425549ec1ae4d9eab"}
{"environment":"development","ip":"::1","level":"info","message":"PATCH /api/v1/patients/685dc7399aaaebdbf35da64b","service":"medblock-backend","timestamp":"2025-06-27 01:23:43","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"PATCH","resource":"/api/v1/patients/685dc7399aaaebdbf35da64b","service":"medblock-backend","timestamp":"2025-06-27 01:23:43","userAgent":"curl/8.5.0","userId":"685da1f425549ec1ae4d9eab"}
{"action":"patient_updated","environment":"development","level":"info","message":"AUDIT_LOG","patientId":"P-0001","patientName":"James Otieno","resource":"patient:P-0001","service":"medblock-backend","timestamp":"2025-06-27 01:23:43","userId":"685da1f425549ec1ae4d9eab"}
{"environment":"development","ip":"::1","level":"info","message":"DELETE /api/v1/patients/685dc7399aaaebdbf35da64b","service":"medblock-backend","timestamp":"2025-06-27 01:25:42","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"DELETE","resource":"/api/v1/patients/685dc7399aaaebdbf35da64b","service":"medblock-backend","timestamp":"2025-06-27 01:25:42","userAgent":"curl/8.5.0","userId":"685da1f425549ec1ae4d9eab"}
{"action":"patient_deleted","environment":"development","level":"info","message":"AUDIT_LOG","patientId":"P-0001","patientName":"James Otieno","resource":"patient:P-0001","service":"medblock-backend","timestamp":"2025-06-27 01:25:42","userId":"685da1f425549ec1ae4d9eab"}
{"environment":"development","ip":"::1","level":"info","message":"GET /api/v1/patients/685dc7399aaaebdbf35da64b","service":"medblock-backend","timestamp":"2025-06-27 01:31:08","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"GET","resource":"/api/v1/patients/685dc7399aaaebdbf35da64b","service":"medblock-backend","timestamp":"2025-06-27 01:31:08","userAgent":"curl/8.5.0","userId":"685da1f425549ec1ae4d9eab"}
{"action":"patient_viewed","environment":"development","level":"info","message":"AUDIT_LOG","patientId":"P-0001","resource":"patient:P-0001","service":"medblock-backend","timestamp":"2025-06-27 01:31:08","userId":"685da1f425549ec1ae4d9eab"}
{"environment":"development","ip":"::1","level":"info","message":"DELETE /api/v1/patients/685dc7399aaaebdbf35da64b","service":"medblock-backend","timestamp":"2025-06-27 01:31:39","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"DELETE","resource":"/api/v1/patients/685dc7399aaaebdbf35da64b","service":"medblock-backend","timestamp":"2025-06-27 01:31:39","userAgent":"curl/8.5.0","userId":"685da1f425549ec1ae4d9eab"}
{"action":"patient_deleted","environment":"development","level":"info","message":"AUDIT_LOG","patientId":"P-0001","patientName":"James Otieno","resource":"patient:P-0001","service":"medblock-backend","timestamp":"2025-06-27 01:31:39","userId":"685da1f425549ec1ae4d9eab"}
{"environment":"development","ip":"::1","level":"info","message":"DELETE /api/v1/patients/invalid-id-format","service":"medblock-backend","timestamp":"2025-06-27 01:32:24","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"DELETE","resource":"/api/v1/patients/invalid-id-format","service":"medblock-backend","timestamp":"2025-06-27 01:32:24","userAgent":"curl/8.5.0","userId":"685da1f425549ec1ae4d9eab"}
{"environment":"development","kind":"ObjectId","level":"error","message":"Delete patient failed: Cast to ObjectId failed for value \"invalid-id-format\" (type string) at path \"_id\" for model \"Patient\"","path":"_id","reason":{},"service":"medblock-backend","stack":"CastError: Cast to ObjectId failed for value \"invalid-id-format\" (type string) at path \"_id\" for model \"Patient\"\n    at SchemaObjectId.cast (/home/josva/Desktop/MedBlock/node_modules/mongoose/lib/schema/objectId.js:251:11)\n    at SchemaType.applySetters (/home/josva/Desktop/MedBlock/node_modules/mongoose/lib/schemaType.js:1255:12)\n    at SchemaType.castForQuery (/home/josva/Desktop/MedBlock/node_modules/mongoose/lib/schemaType.js:1673:17)\n    at cast (/home/josva/Desktop/MedBlock/node_modules/mongoose/lib/cast.js:390:32)\n    at cast (/home/josva/Desktop/MedBlock/node_modules/mongoose/lib/cast.js:76:20)\n    at Query.cast (/home/josva/Desktop/MedBlock/node_modules/mongoose/lib/query.js:5055:12)\n    at Query._castConditions (/home/josva/Desktop/MedBlock/node_modules/mongoose/lib/query.js:2351:10)\n    at model.Query._findOne (/home/josva/Desktop/MedBlock/node_modules/mongoose/lib/query.js:2674:8)\n    at model.Query.exec (/home/josva/Desktop/MedBlock/node_modules/mongoose/lib/query.js:4604:80)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","stringValue":"\"invalid-id-format\"","timestamp":"2025-06-27 01:32:24","value":"invalid-id-format","valueType":"string"}
{"environment":"development","ip":"::1","level":"info","message":"DELETE /api/v1/patients/685dc7399aaaebdbf35da64b","service":"medblock-backend","timestamp":"2025-06-27 01:32:52","userAgent":"curl/8.5.0"}
{"environment":"development","level":"error","message":"Authentication error: logger.security is not a function","service":"medblock-backend","stack":"TypeError: logger.security is not a function\n    at authenticateToken (/home/josva/Desktop/MedBlock/src/middleware/auth.js:14:14)\n    at Layer.handle [as handle_request] (/home/josva/Desktop/MedBlock/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/home/josva/Desktop/MedBlock/node_modules/express/lib/router/index.js:328:13)\n    at /home/josva/Desktop/MedBlock/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/home/josva/Desktop/MedBlock/node_modules/express/lib/router/index.js:346:12)\n    at next (/home/josva/Desktop/MedBlock/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/home/josva/Desktop/MedBlock/node_modules/express/lib/router/index.js:175:3)\n    at router (/home/josva/Desktop/MedBlock/node_modules/express/lib/router/index.js:47:12)\n    at Layer.handle [as handle_request] (/home/josva/Desktop/MedBlock/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/home/josva/Desktop/MedBlock/node_modules/express/lib/router/index.js:328:13)","timestamp":"2025-06-27 01:32:52"}
{"environment":"development","ip":"::1","level":"info","message":"GET /api/v1/patients","service":"medblock-backend","timestamp":"2025-06-27 01:39:43","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"GET","resource":"/api/v1/patients","service":"medblock-backend","timestamp":"2025-06-27 01:39:43","userAgent":"curl/8.5.0","userId":"685da1f425549ec1ae4d9eab"}
{"action":"patients_listed","count":6,"environment":"development","level":"info","limit":20,"message":"AUDIT_LOG","page":1,"resource":"patients","service":"medblock-backend","timestamp":"2025-06-27 01:39:43","userId":"685da1f425549ec1ae4d9eab"}
{"environment":"development","ip":"::1","level":"info","message":"DELETE /api/v1/patients/685dc7399aaaebdbf35da64b","service":"medblock-backend","timestamp":"2025-06-27 01:39:58","userAgent":"curl/8.5.0"}
{"environment":"development","level":"error","message":"Authentication error: logger.security is not a function","service":"medblock-backend","stack":"TypeError: logger.security is not a function\n    at authenticateToken (/home/josva/Desktop/MedBlock/src/middleware/auth.js:14:14)\n    at Layer.handle [as handle_request] (/home/josva/Desktop/MedBlock/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/home/josva/Desktop/MedBlock/node_modules/express/lib/router/index.js:328:13)\n    at /home/josva/Desktop/MedBlock/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/home/josva/Desktop/MedBlock/node_modules/express/lib/router/index.js:346:12)\n    at next (/home/josva/Desktop/MedBlock/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/home/josva/Desktop/MedBlock/node_modules/express/lib/router/index.js:175:3)\n    at router (/home/josva/Desktop/MedBlock/node_modules/express/lib/router/index.js:47:12)\n    at Layer.handle [as handle_request] (/home/josva/Desktop/MedBlock/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/home/josva/Desktop/MedBlock/node_modules/express/lib/router/index.js:328:13)","timestamp":"2025-06-27 01:39:58"}
{"environment":"development","ip":"::1","level":"info","message":"GET /api/v1/patients","service":"medblock-backend","timestamp":"2025-06-27 01:40:55","userAgent":"curl/8.5.0"}
{"environment":"development","level":"info","message":"--- Logger test from server.js ---","service":"medblock-backend","timestamp":"2025-06-27 01:41:05"}
{"environment":"development","level":"info","message":"✅ MongoDB connected successfully","service":"medblock-backend","timestamp":"2025-06-27 01:41:05"}
{"environment":"development","level":"info","message":"Database connected successfully","service":"medblock-backend","timestamp":"2025-06-27 01:41:05"}
{"environment":"development","level":"info","message":"Server running on port 3000 in development mode","service":"medblock-backend","timestamp":"2025-06-27 01:41:05"}
{"environment":"development","level":"info","message":"Health check available at http://localhost:3000/health","service":"medblock-backend","timestamp":"2025-06-27 01:41:05"}
{"environment":"development","level":"info","message":"API documentation available at http://localhost:3000/api/v1","service":"medblock-backend","timestamp":"2025-06-27 01:41:05"}
{"environment":"development","ip":"::1","level":"info","message":"GET /api/v1/patients","service":"medblock-backend","timestamp":"2025-06-27 01:41:20","userAgent":"curl/8.5.0"}
{"environment":"development","level":"info","message":"--- Logger test from server.js ---","service":"medblock-backend","timestamp":"2025-06-27 01:48:12"}
{"environment":"development","level":"info","message":"✅ MongoDB connected successfully","service":"medblock-backend","timestamp":"2025-06-27 01:48:12"}
{"environment":"development","level":"info","message":"Database connected successfully","service":"medblock-backend","timestamp":"2025-06-27 01:48:12"}
{"environment":"development","level":"info","message":"Server running on port 3000 in development mode","service":"medblock-backend","timestamp":"2025-06-27 01:48:12"}
{"environment":"development","level":"info","message":"Health check available at http://localhost:3000/health","service":"medblock-backend","timestamp":"2025-06-27 01:48:12"}
{"environment":"development","level":"info","message":"API documentation available at http://localhost:3000/api/v1","service":"medblock-backend","timestamp":"2025-06-27 01:48:12"}
{"environment":"development","ip":"::1","level":"info","message":"DELETE /api/v1/patients/685dc7399aaaebdbf35da64b","service":"medblock-backend","timestamp":"2025-06-27 01:48:22","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"DELETE","resource":"/api/v1/patients/685dc7399aaaebdbf35da64b","service":"medblock-backend","timestamp":"2025-06-27 01:48:22","userAgent":"curl/8.5.0","userId":"685da1f425549ec1ae4d9eab"}
{"action":"patient_deleted","environment":"development","level":"info","message":"AUDIT_LOG","patientId":"P-0001","patientName":"James Otieno","resource":"patient:P-0001","service":"medblock-backend","timestamp":"2025-06-27 01:48:22","userId":"685da1f425549ec1ae4d9eab"}
{"environment":"development","ip":"::1","level":"info","message":"DELETE /api/v1/patients/invalid-id","service":"medblock-backend","timestamp":"2025-06-27 01:50:55","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"DELETE","resource":"/api/v1/patients/invalid-id","service":"medblock-backend","timestamp":"2025-06-27 01:50:55","userAgent":"curl/8.5.0","userId":"685da1f425549ec1ae4d9eab"}
{"environment":"development","kind":"ObjectId","level":"error","message":"Delete patient failed: Cast to ObjectId failed for value \"invalid-id\" (type string) at path \"_id\" for model \"Patient\"","path":"_id","reason":{},"service":"medblock-backend","stack":"CastError: Cast to ObjectId failed for value \"invalid-id\" (type string) at path \"_id\" for model \"Patient\"\n    at SchemaObjectId.cast (/home/josva/Desktop/MedBlock/node_modules/mongoose/lib/schema/objectId.js:251:11)\n    at SchemaType.applySetters (/home/josva/Desktop/MedBlock/node_modules/mongoose/lib/schemaType.js:1255:12)\n    at SchemaType.castForQuery (/home/josva/Desktop/MedBlock/node_modules/mongoose/lib/schemaType.js:1673:17)\n    at cast (/home/josva/Desktop/MedBlock/node_modules/mongoose/lib/cast.js:390:32)\n    at cast (/home/josva/Desktop/MedBlock/node_modules/mongoose/lib/cast.js:76:20)\n    at Query.cast (/home/josva/Desktop/MedBlock/node_modules/mongoose/lib/query.js:5055:12)\n    at Query._castConditions (/home/josva/Desktop/MedBlock/node_modules/mongoose/lib/query.js:2351:10)\n    at model.Query._findOne (/home/josva/Desktop/MedBlock/node_modules/mongoose/lib/query.js:2674:8)\n    at model.Query.exec (/home/josva/Desktop/MedBlock/node_modules/mongoose/lib/query.js:4604:80)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","stringValue":"\"invalid-id\"","timestamp":"2025-06-27 01:50:55","value":"invalid-id","valueType":"string"}
{"environment":"development","ip":"::1","level":"info","message":"DELETE /api/v1/patients/000000000000000000000000","service":"medblock-backend","timestamp":"2025-06-27 01:51:36","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"DELETE","resource":"/api/v1/patients/000000000000000000000000","service":"medblock-backend","timestamp":"2025-06-27 01:51:36","userAgent":"curl/8.5.0","userId":"685da1f425549ec1ae4d9eab"}
{"environment":"development","ip":"::1","level":"info","message":"DELETE /api/v1/patients/685dc7399aaaebdbf35da64b","service":"medblock-backend","timestamp":"2025-06-27 01:51:54","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"DELETE","resource":"/api/v1/patients/685dc7399aaaebdbf35da64b","service":"medblock-backend","timestamp":"2025-06-27 01:51:54","userAgent":"curl/8.5.0","userId":"685da1f425549ec1ae4d9eab"}
{"action":"patient_deleted","environment":"development","level":"info","message":"AUDIT_LOG","patientId":"P-0001","patientName":"James Otieno","resource":"patient:P-0001","service":"medblock-backend","timestamp":"2025-06-27 01:51:54","userId":"685da1f425549ec1ae4d9eab"}
{"environment":"development","ip":"::1","level":"info","message":"DELETE /api/v1/patients/685dc7759aaaebdbf35da653","service":"medblock-backend","timestamp":"2025-06-27 01:52:26","userAgent":"curl/8.5.0"}
{"environment":"development","level":"error","message":"Authentication error: logger.security is not a function","service":"medblock-backend","stack":"TypeError: logger.security is not a function\n    at authenticateToken (/home/josva/Desktop/MedBlock/src/middleware/auth.js:14:14)\n    at Layer.handle [as handle_request] (/home/josva/Desktop/MedBlock/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/home/josva/Desktop/MedBlock/node_modules/express/lib/router/index.js:328:13)\n    at /home/josva/Desktop/MedBlock/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/home/josva/Desktop/MedBlock/node_modules/express/lib/router/index.js:346:12)\n    at next (/home/josva/Desktop/MedBlock/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/home/josva/Desktop/MedBlock/node_modules/express/lib/router/index.js:175:3)\n    at router (/home/josva/Desktop/MedBlock/node_modules/express/lib/router/index.js:47:12)\n    at Layer.handle [as handle_request] (/home/josva/Desktop/MedBlock/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/home/josva/Desktop/MedBlock/node_modules/express/lib/router/index.js:328:13)","timestamp":"2025-06-27 01:52:26"}
{"environment":"development","ip":"::1","level":"info","message":"GET /api/v1/patients/685dc7399aaaebdbf35da64b","service":"medblock-backend","timestamp":"2025-06-27 01:57:03","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"GET","resource":"/api/v1/patients/685dc7399aaaebdbf35da64b","service":"medblock-backend","timestamp":"2025-06-27 01:57:03","userAgent":"curl/8.5.0","userId":"685da1f425549ec1ae4d9eab"}
{"action":"patient_viewed","environment":"development","level":"info","message":"AUDIT_LOG","patientId":"P-0001","resource":"patient:P-0001","service":"medblock-backend","timestamp":"2025-06-27 01:57:03","userId":"685da1f425549ec1ae4d9eab"}
{"environment":"development","ip":"::1","level":"info","message":"DELETE /api/v1/patients/685dc7759aaaebdbf35da653","service":"medblock-backend","timestamp":"2025-06-27 01:59:48","userAgent":"curl/8.5.0"}
{"environment":"development","level":"info","message":"--- Logger test from server.js ---","service":"medblock-backend","timestamp":"2025-06-27 02:04:01"}
{"environment":"development","level":"info","message":"✅ MongoDB connected successfully","service":"medblock-backend","timestamp":"2025-06-27 02:04:01"}
{"environment":"development","level":"info","message":"Database connected successfully","service":"medblock-backend","timestamp":"2025-06-27 02:04:01"}
{"environment":"development","level":"info","message":"Server running on port 3000 in development mode","service":"medblock-backend","timestamp":"2025-06-27 02:04:01"}
{"environment":"development","level":"info","message":"Health check available at http://localhost:3000/health","service":"medblock-backend","timestamp":"2025-06-27 02:04:01"}
{"environment":"development","level":"info","message":"API documentation available at http://localhost:3000/api/v1","service":"medblock-backend","timestamp":"2025-06-27 02:04:01"}
{"environment":"development","ip":"::1","level":"info","message":"DELETE /api/v1/patients/bulk","service":"medblock-backend","timestamp":"2025-06-27 02:04:09","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"DELETE","resource":"/api/v1/patients/bulk","service":"medblock-backend","timestamp":"2025-06-27 02:04:09","userAgent":"curl/8.5.0","userId":"685da1f425549ec1ae4d9eab"}
{"environment":"development","kind":"ObjectId","level":"error","message":"Delete patient failed: Cast to ObjectId failed for value \"bulk\" (type string) at path \"_id\" for model \"Patient\"","path":"_id","reason":{},"service":"medblock-backend","stack":"CastError: Cast to ObjectId failed for value \"bulk\" (type string) at path \"_id\" for model \"Patient\"\n    at SchemaObjectId.cast (/home/josva/Desktop/MedBlock/node_modules/mongoose/lib/schema/objectId.js:251:11)\n    at SchemaType.applySetters (/home/josva/Desktop/MedBlock/node_modules/mongoose/lib/schemaType.js:1255:12)\n    at SchemaType.castForQuery (/home/josva/Desktop/MedBlock/node_modules/mongoose/lib/schemaType.js:1673:17)\n    at cast (/home/josva/Desktop/MedBlock/node_modules/mongoose/lib/cast.js:390:32)\n    at cast (/home/josva/Desktop/MedBlock/node_modules/mongoose/lib/cast.js:76:20)\n    at Query.cast (/home/josva/Desktop/MedBlock/node_modules/mongoose/lib/query.js:5055:12)\n    at Query._castConditions (/home/josva/Desktop/MedBlock/node_modules/mongoose/lib/query.js:2351:10)\n    at model.Query._findOne (/home/josva/Desktop/MedBlock/node_modules/mongoose/lib/query.js:2674:8)\n    at model.Query.exec (/home/josva/Desktop/MedBlock/node_modules/mongoose/lib/query.js:4604:80)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","stringValue":"\"bulk\"","timestamp":"2025-06-27 02:04:09","value":"bulk","valueType":"string"}
{"environment":"development","level":"info","message":"--- Logger test from server.js ---","service":"medblock-backend","timestamp":"2025-06-27 02:13:41"}
{"environment":"development","level":"info","message":"✅ MongoDB connected successfully","service":"medblock-backend","timestamp":"2025-06-27 02:13:42"}
{"environment":"development","level":"info","message":"Database connected successfully","service":"medblock-backend","timestamp":"2025-06-27 02:13:42"}
{"environment":"development","level":"info","message":"Server running on port 3000 in development mode","service":"medblock-backend","timestamp":"2025-06-27 02:13:42"}
{"environment":"development","level":"info","message":"Health check available at http://localhost:3000/health","service":"medblock-backend","timestamp":"2025-06-27 02:13:42"}
{"environment":"development","level":"info","message":"API documentation available at http://localhost:3000/api/v1","service":"medblock-backend","timestamp":"2025-06-27 02:13:42"}
{"environment":"development","level":"info","message":"--- Logger test from server.js ---","service":"medblock-backend","timestamp":"2025-06-27 02:14:21"}
{"environment":"development","level":"info","message":"✅ MongoDB connected successfully","service":"medblock-backend","timestamp":"2025-06-27 02:14:21"}
{"environment":"development","level":"info","message":"Database connected successfully","service":"medblock-backend","timestamp":"2025-06-27 02:14:21"}
{"environment":"development","level":"info","message":"Server running on port 3000 in development mode","service":"medblock-backend","timestamp":"2025-06-27 02:14:21"}
{"environment":"development","level":"info","message":"Health check available at http://localhost:3000/health","service":"medblock-backend","timestamp":"2025-06-27 02:14:21"}
{"environment":"development","level":"info","message":"API documentation available at http://localhost:3000/api/v1","service":"medblock-backend","timestamp":"2025-06-27 02:14:21"}
{"environment":"development","ip":"::1","level":"info","message":"DELETE /api/v1/patients/invalid-id","service":"medblock-backend","timestamp":"2025-06-27 02:19:54","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"DELETE","resource":"/api/v1/patients/invalid-id","service":"medblock-backend","timestamp":"2025-06-27 02:19:54","userAgent":"curl/8.5.0","userId":"685da1f425549ec1ae4d9eab"}
{"environment":"development","kind":"ObjectId","level":"error","message":"Delete patient failed: Cast to ObjectId failed for value \"invalid-id\" (type string) at path \"_id\" for model \"Patient\"","path":"_id","reason":{},"service":"medblock-backend","stack":"CastError: Cast to ObjectId failed for value \"invalid-id\" (type string) at path \"_id\" for model \"Patient\"\n    at SchemaObjectId.cast (/home/josva/Desktop/MedBlock/node_modules/mongoose/lib/schema/objectId.js:251:11)\n    at SchemaType.applySetters (/home/josva/Desktop/MedBlock/node_modules/mongoose/lib/schemaType.js:1255:12)\n    at SchemaType.castForQuery (/home/josva/Desktop/MedBlock/node_modules/mongoose/lib/schemaType.js:1673:17)\n    at cast (/home/josva/Desktop/MedBlock/node_modules/mongoose/lib/cast.js:390:32)\n    at cast (/home/josva/Desktop/MedBlock/node_modules/mongoose/lib/cast.js:76:20)\n    at Query.cast (/home/josva/Desktop/MedBlock/node_modules/mongoose/lib/query.js:5055:12)\n    at Query._castConditions (/home/josva/Desktop/MedBlock/node_modules/mongoose/lib/query.js:2351:10)\n    at model.Query._findOne (/home/josva/Desktop/MedBlock/node_modules/mongoose/lib/query.js:2674:8)\n    at model.Query.exec (/home/josva/Desktop/MedBlock/node_modules/mongoose/lib/query.js:4604:80)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","stringValue":"\"invalid-id\"","timestamp":"2025-06-27 02:19:54","value":"invalid-id","valueType":"string"}
{"environment":"development","level":"info","message":"--- Logger test from server.js ---","service":"medblock-backend","timestamp":"2025-06-27 02:26:10"}
{"environment":"development","level":"info","message":"✅ MongoDB connected successfully","service":"medblock-backend","timestamp":"2025-06-27 02:26:10"}
{"environment":"development","level":"info","message":"Database connected successfully","service":"medblock-backend","timestamp":"2025-06-27 02:26:10"}
{"environment":"development","level":"info","message":"Server running on port 3000 in development mode","service":"medblock-backend","timestamp":"2025-06-27 02:26:10"}
{"environment":"development","level":"info","message":"Health check available at http://localhost:3000/health","service":"medblock-backend","timestamp":"2025-06-27 02:26:10"}
{"environment":"development","level":"info","message":"API documentation available at http://localhost:3000/api/v1","service":"medblock-backend","timestamp":"2025-06-27 02:26:10"}
{"environment":"development","level":"info","message":"--- Logger test from server.js ---","service":"medblock-backend","timestamp":"2025-06-27 02:26:35"}
{"environment":"development","level":"info","message":"✅ MongoDB connected successfully","service":"medblock-backend","timestamp":"2025-06-27 02:26:35"}
{"environment":"development","level":"info","message":"Database connected successfully","service":"medblock-backend","timestamp":"2025-06-27 02:26:35"}
{"environment":"development","level":"info","message":"Server running on port 3000 in development mode","service":"medblock-backend","timestamp":"2025-06-27 02:26:35"}
{"environment":"development","level":"info","message":"Health check available at http://localhost:3000/health","service":"medblock-backend","timestamp":"2025-06-27 02:26:35"}
{"environment":"development","level":"info","message":"API documentation available at http://localhost:3000/api/v1","service":"medblock-backend","timestamp":"2025-06-27 02:26:35"}
{"environment":"development","level":"info","message":"--- Logger test from server.js ---","service":"medblock-backend","timestamp":"2025-06-27 02:26:57"}
{"environment":"development","level":"info","message":"✅ MongoDB connected successfully","service":"medblock-backend","timestamp":"2025-06-27 02:26:57"}
{"environment":"development","level":"info","message":"Database connected successfully","service":"medblock-backend","timestamp":"2025-06-27 02:26:57"}
{"environment":"development","level":"info","message":"Server running on port 3000 in development mode","service":"medblock-backend","timestamp":"2025-06-27 02:26:57"}
{"environment":"development","level":"info","message":"Health check available at http://localhost:3000/health","service":"medblock-backend","timestamp":"2025-06-27 02:26:57"}
{"environment":"development","level":"info","message":"API documentation available at http://localhost:3000/api/v1","service":"medblock-backend","timestamp":"2025-06-27 02:26:57"}
{"environment":"development","level":"info","message":"--- Logger test from server.js ---","service":"medblock-backend","timestamp":"2025-06-27 02:27:22"}
{"environment":"development","level":"info","message":"✅ MongoDB connected successfully","service":"medblock-backend","timestamp":"2025-06-27 02:27:23"}
{"environment":"development","level":"info","message":"Database connected successfully","service":"medblock-backend","timestamp":"2025-06-27 02:27:23"}
{"environment":"development","level":"info","message":"Server running on port 3000 in development mode","service":"medblock-backend","timestamp":"2025-06-27 02:27:23"}
{"environment":"development","level":"info","message":"Health check available at http://localhost:3000/health","service":"medblock-backend","timestamp":"2025-06-27 02:27:23"}
{"environment":"development","level":"info","message":"API documentation available at http://localhost:3000/api/v1","service":"medblock-backend","timestamp":"2025-06-27 02:27:23"}
{"environment":"development","level":"info","message":"--- Logger test from server.js ---","service":"medblock-backend","timestamp":"2025-06-27 02:27:46"}
{"environment":"development","level":"info","message":"✅ MongoDB connected successfully","service":"medblock-backend","timestamp":"2025-06-27 02:27:47"}
{"environment":"development","level":"info","message":"Database connected successfully","service":"medblock-backend","timestamp":"2025-06-27 02:27:47"}
{"environment":"development","level":"info","message":"Server running on port 3000 in development mode","service":"medblock-backend","timestamp":"2025-06-27 02:27:47"}
{"environment":"development","level":"info","message":"Health check available at http://localhost:3000/health","service":"medblock-backend","timestamp":"2025-06-27 02:27:47"}
{"environment":"development","level":"info","message":"API documentation available at http://localhost:3000/api/v1","service":"medblock-backend","timestamp":"2025-06-27 02:27:47"}
{"environment":"development","level":"info","message":"--- Logger test from server.js ---","service":"medblock-backend","timestamp":"2025-06-27 02:28:07"}
{"environment":"development","level":"info","message":"✅ MongoDB connected successfully","service":"medblock-backend","timestamp":"2025-06-27 02:28:07"}
{"environment":"development","level":"info","message":"Database connected successfully","service":"medblock-backend","timestamp":"2025-06-27 02:28:07"}
{"environment":"development","level":"info","message":"Server running on port 3000 in development mode","service":"medblock-backend","timestamp":"2025-06-27 02:28:07"}
{"environment":"development","level":"info","message":"Health check available at http://localhost:3000/health","service":"medblock-backend","timestamp":"2025-06-27 02:28:07"}
{"environment":"development","level":"info","message":"API documentation available at http://localhost:3000/api/v1","service":"medblock-backend","timestamp":"2025-06-27 02:28:07"}
{"environment":"development","level":"info","message":"--- Logger test from server.js ---","service":"medblock-backend","timestamp":"2025-06-27 02:28:23"}
{"environment":"development","level":"info","message":"✅ MongoDB connected successfully","service":"medblock-backend","timestamp":"2025-06-27 02:28:23"}
{"environment":"development","level":"info","message":"Database connected successfully","service":"medblock-backend","timestamp":"2025-06-27 02:28:23"}
{"environment":"development","level":"info","message":"Server running on port 3000 in development mode","service":"medblock-backend","timestamp":"2025-06-27 02:28:23"}
{"environment":"development","level":"info","message":"Health check available at http://localhost:3000/health","service":"medblock-backend","timestamp":"2025-06-27 02:28:23"}
{"environment":"development","level":"info","message":"API documentation available at http://localhost:3000/api/v1","service":"medblock-backend","timestamp":"2025-06-27 02:28:23"}
{"environment":"development","ip":"::1","level":"info","message":"DELETE /api/v1/patients/invalid-id","service":"medblock-backend","timestamp":"2025-06-27 03:19:21","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"DELETE","resource":"/api/v1/patients/invalid-id","service":"medblock-backend","timestamp":"2025-06-27 03:19:21","userAgent":"curl/8.5.0","userId":"685da1f425549ec1ae4d9eab"}
{"environment":"development","level":"warn","message":"Invalid ObjectId format received for patient deletion: invalid-id","service":"medblock-backend","timestamp":"2025-06-27 03:19:21","userId":"685da1f425549ec1ae4d9eab"}
{"environment":"development","ip":"::1","level":"info","message":"DELETE /api/v1/patients/000000000000000000000000","service":"medblock-backend","timestamp":"2025-06-27 03:21:29","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"DELETE","resource":"/api/v1/patients/000000000000000000000000","service":"medblock-backend","timestamp":"2025-06-27 03:21:29","userAgent":"curl/8.5.0","userId":"685da1f425549ec1ae4d9eab"}
{"environment":"development","level":"warn","message":"Attempt to delete non-existent patient with ID: 000000000000000000000000","service":"medblock-backend","timestamp":"2025-06-27 03:21:29","userId":"685da1f425549ec1ae4d9eab"}
{"environment":"development","ip":"::1","level":"info","message":"DELETE /api/v1/patients/bulk","service":"medblock-backend","timestamp":"2025-06-27 03:24:06","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"DELETE","resource":"/api/v1/patients/bulk","service":"medblock-backend","timestamp":"2025-06-27 03:24:06","userAgent":"curl/8.5.0","userId":"685da1f425549ec1ae4d9eab"}
{"action":"bulk_patient_deactivated","deactivatedCount":1,"environment":"development","invalidIdCount":1,"invalidIds":["invalid-id-format"],"level":"info","message":"AUDIT_LOG","notFoundCount":1,"resource":"count:1","service":"medblock-backend","timestamp":"2025-06-27 03:24:06","userId":"685da1f425549ec1ae4d9eab"}
{"environment":"development","ip":"::1","level":"info","message":"GET /api/v1/patients/685dc7399aaaebdbf35da64b","service":"medblock-backend","timestamp":"2025-06-27 03:26:41","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"GET","resource":"/api/v1/patients/685dc7399aaaebdbf35da64b","service":"medblock-backend","timestamp":"2025-06-27 03:26:41","userAgent":"curl/8.5.0","userId":"685da1f425549ec1ae4d9eab"}
{"environment":"development","ip":"::1","level":"info","message":"PUT /api/v1/patients/685dc7399aaaebdbf35da64b","service":"medblock-backend","timestamp":"2025-06-27 03:36:13","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"PUT","resource":"/api/v1/patients/685dc7399aaaebdbf35da64b","service":"medblock-backend","timestamp":"2025-06-27 03:36:13","userAgent":"curl/8.5.0","userId":"685da1f425549ec1ae4d9eab"}
{"environment":"development","ip":"::1","level":"info","message":"PATCH /api/v1/patients/685dc7399aaaebdbf35da64b","service":"medblock-backend","timestamp":"2025-06-27 03:37:52","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"PATCH","resource":"/api/v1/patients/685dc7399aaaebdbf35da64b","service":"medblock-backend","timestamp":"2025-06-27 03:37:52","userAgent":"curl/8.5.0","userId":"685da1f425549ec1ae4d9eab"}
{"action":"patient_partially_updated","environment":"development","level":"info","message":"AUDIT_LOG","patientId":"P-0001","resource":"patient:P-0001","service":"medblock-backend","timestamp":"2025-06-27 03:37:52","updatedFields":["email","age"],"userId":"685da1f425549ec1ae4d9eab"}
{"environment":"development","ip":"::1","level":"info","message":"POST /api/v1/patients/685dc7399aaaebdbf35da64b/vital-signs","service":"medblock-backend","timestamp":"2025-06-27 03:39:13","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"POST","resource":"/api/v1/patients/685dc7399aaaebdbf35da64b/vital-signs","service":"medblock-backend","timestamp":"2025-06-27 03:39:13","userAgent":"curl/8.5.0","userId":"685da1f425549ec1ae4d9eab"}
{"environment":"development","ip":"::1","level":"info","message":"POST /api/v1/patients/685dc7399aaaebdbf35da64b/vital-signs","service":"medblock-backend","timestamp":"2025-06-27 03:40:29","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"POST","resource":"/api/v1/patients/685dc7399aaaebdbf35da64b/vital-signs","service":"medblock-backend","timestamp":"2025-06-27 03:40:29","userAgent":"curl/8.5.0","userId":"685da1f425549ec1ae4d9eab"}
{"environment":"development","ip":"::1","level":"info","message":"POST /api/v1/patients/685dc7399aaaebdbf35da64b/vital-signs","service":"medblock-backend","timestamp":"2025-06-27 03:42:09","userAgent":"curl/8.5.0"}
{"environment":"development","level":"info","message":"--- Logger test from server.js ---","service":"medblock-backend","timestamp":"2025-06-27 03:44:02"}
{"environment":"development","level":"info","message":"✅ MongoDB connected successfully","service":"medblock-backend","timestamp":"2025-06-27 03:44:02"}
{"environment":"development","level":"info","message":"Database connected successfully","service":"medblock-backend","timestamp":"2025-06-27 03:44:02"}
{"environment":"development","level":"info","message":"Server running on port 3000 in development mode","service":"medblock-backend","timestamp":"2025-06-27 03:44:02"}
{"environment":"development","level":"info","message":"Health check available at http://localhost:3000/health","service":"medblock-backend","timestamp":"2025-06-27 03:44:02"}
{"environment":"development","level":"info","message":"API documentation available at http://localhost:3000/api/v1","service":"medblock-backend","timestamp":"2025-06-27 03:44:02"}
{"environment":"development","ip":"::1","level":"info","message":"GET /api/v1/patients/685dc7399aaaebdbf35da64b/vital-signs","service":"medblock-backend","timestamp":"2025-06-27 03:47:57","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"GET","resource":"/api/v1/patients/685dc7399aaaebdbf35da64b/vital-signs","service":"medblock-backend","timestamp":"2025-06-27 03:47:57","userAgent":"curl/8.5.0","userId":"685da1f425549ec1ae4d9eab"}
{"environment":"development","ip":"::1","level":"info","message":"POST /api/v1/patients/685dc7399aaaebdbf35da64b/allergies","service":"medblock-backend","timestamp":"2025-06-27 03:50:12","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"POST","resource":"/api/v1/patients/685dc7399aaaebdbf35da64b/allergies","service":"medblock-backend","timestamp":"2025-06-27 03:50:12","userAgent":"curl/8.5.0","userId":"685da1f425549ec1ae4d9eab"}
{"environment":"development","ip":"::1","level":"info","message":"POST /api/v1/patients/685dc7399aaaebdbf35da64b/allergies","service":"medblock-backend","timestamp":"2025-06-27 03:51:56","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"POST","resource":"/api/v1/patients/685dc7399aaaebdbf35da64b/allergies","service":"medblock-backend","timestamp":"2025-06-27 03:51:56","userAgent":"curl/8.5.0","userId":"685da1f425549ec1ae4d9eab"}
{"action":"allergy_added","allergy":{"allergen":"Penicillin","reaction":"Rash and hives","recordedAt":"2025-06-26T14:00:00Z","severity":"moderate"},"environment":"development","level":"info","message":"AUDIT_LOG","patientId":"P-0001","resource":"patient:P-0001","service":"medblock-backend","timestamp":"2025-06-27 03:51:56","userId":"685da1f425549ec1ae4d9eab"}
{"environment":"development","ip":"::1","level":"info","message":"GET /api/v1/patients/685dc7399aaaebdbf35da64b/allergies","service":"medblock-backend","timestamp":"2025-06-27 03:52:37","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"GET","resource":"/api/v1/patients/685dc7399aaaebdbf35da64b/allergies","service":"medblock-backend","timestamp":"2025-06-27 03:52:37","userAgent":"curl/8.5.0","userId":"685da1f425549ec1ae4d9eab"}
{"environment":"development","ip":"::1","level":"info","message":"POST /api/v1/patients/685dc7399aaaebdbf35da64b/allergies","service":"medblock-backend","timestamp":"2025-06-27 03:55:21","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"POST","resource":"/api/v1/patients/685dc7399aaaebdbf35da64b/allergies","service":"medblock-backend","timestamp":"2025-06-27 03:55:21","userAgent":"curl/8.5.0","userId":"685da1f425549ec1ae4d9eab"}
{"action":"allergy_added","allergy":{"allergen":"Peanuts","reaction":"Anaphylaxis","recordedAt":"2025-06-26T16:00:00Z","severity":"severe"},"environment":"development","level":"info","message":"AUDIT_LOG","patientId":"P-0001","resource":"patient:P-0001","service":"medblock-backend","timestamp":"2025-06-27 03:55:21","userId":"685da1f425549ec1ae4d9eab"}
{"environment":"development","ip":"::1","level":"info","message":"POST /api/v1/patients/685dc7399aaaebdbf35da64b/allergies","service":"medblock-backend","timestamp":"2025-06-27 03:55:53","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"POST","resource":"/api/v1/patients/685dc7399aaaebdbf35da64b/allergies","service":"medblock-backend","timestamp":"2025-06-27 03:55:53","userAgent":"curl/8.5.0","userId":"685da1f425549ec1ae4d9eab"}
{"action":"allergy_added","allergy":{"allergen":"Dust Mites","reaction":"Sneezing and watery eyes","recordedAt":"2025-06-26T17:00:00Z","severity":"mild"},"environment":"development","level":"info","message":"AUDIT_LOG","patientId":"P-0001","resource":"patient:P-0001","service":"medblock-backend","timestamp":"2025-06-27 03:55:53","userId":"685da1f425549ec1ae4d9eab"}
{"environment":"development","ip":"::1","level":"info","message":"POST /api/v1/patients/685dc7399aaaebdbf35da64b/allergies","service":"medblock-backend","timestamp":"2025-06-27 04:02:48","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"POST","resource":"/api/v1/patients/685dc7399aaaebdbf35da64b/allergies","service":"medblock-backend","timestamp":"2025-06-27 04:02:48","userAgent":"curl/8.5.0","userId":"685da1f425549ec1ae4d9eab"}
{"action":"allergy_added","allergy":{"allergen":"Shellfish","diagnosedDate":"2025-06-27T01:10:00Z","reaction":"Swelling and breathing difficulty","severity":"severe"},"environment":"development","level":"info","message":"AUDIT_LOG","patientId":"P-0001","resource":"patient:P-0001","service":"medblock-backend","timestamp":"2025-06-27 04:02:48","userId":"685da1f425549ec1ae4d9eab"}
{"environment":"development","ip":"::1","level":"info","message":"GET /api/v1/patients/685dc7399aaaebdbf35da64b/allergies","service":"medblock-backend","timestamp":"2025-06-27 04:11:25","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"GET","resource":"/api/v1/patients/685dc7399aaaebdbf35da64b/allergies","service":"medblock-backend","timestamp":"2025-06-27 04:11:25","userAgent":"curl/8.5.0","userId":"685da1f425549ec1ae4d9eab"}
{"environment":"development","ip":"::1","level":"info","message":"GET /api/v1/patients/685dc7399aaaebdbf35da64b/allergies","service":"medblock-backend","timestamp":"2025-06-27 04:11:46","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"GET","resource":"/api/v1/patients/685dc7399aaaebdbf35da64b/allergies","service":"medblock-backend","timestamp":"2025-06-27 04:11:46","userAgent":"curl/8.5.0","userId":"685da1f425549ec1ae4d9eab"}
{"environment":"development","ip":"::1","level":"info","message":"DELETE /api/v1/patients/685dc7399aaaebdbf35da64b/allergies/685deb2ca824db4598194366","service":"medblock-backend","timestamp":"2025-06-27 04:12:25","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"DELETE","resource":"/api/v1/patients/685dc7399aaaebdbf35da64b/allergies/685deb2ca824db4598194366","service":"medblock-backend","timestamp":"2025-06-27 04:12:25","userAgent":"curl/8.5.0","userId":"685da1f425549ec1ae4d9eab"}
{"environment":"development","ip":"::1","level":"info","message":"GET /api/v1/patients/685dc7399aaaebdbf35da64b/allergies","service":"medblock-backend","timestamp":"2025-06-27 04:16:04","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"GET","resource":"/api/v1/patients/685dc7399aaaebdbf35da64b/allergies","service":"medblock-backend","timestamp":"2025-06-27 04:16:04","userAgent":"curl/8.5.0","userId":"685da1f425549ec1ae4d9eab"}
{"environment":"development","ip":"::1","level":"info","message":"DELETE /api/v1/patients/685dc7399aaaebdbf35da64b/allergies/685deb2ca824db4598194366","service":"medblock-backend","timestamp":"2025-06-27 04:16:21","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"DELETE","resource":"/api/v1/patients/685dc7399aaaebdbf35da64b/allergies/685deb2ca824db4598194366","service":"medblock-backend","timestamp":"2025-06-27 04:16:21","userAgent":"curl/8.5.0","userId":"685da1f425549ec1ae4d9eab"}
{"environment":"development","level":"info","message":"--- Logger test from server.js ---","service":"medblock-backend","timestamp":"2025-06-27 04:27:26"}
{"environment":"development","level":"info","message":"✅ MongoDB connected successfully","service":"medblock-backend","timestamp":"2025-06-27 04:27:26"}
{"environment":"development","level":"info","message":"Database connected successfully","service":"medblock-backend","timestamp":"2025-06-27 04:27:26"}
{"environment":"development","level":"info","message":"Server running on port 3000 in development mode","service":"medblock-backend","timestamp":"2025-06-27 04:27:26"}
{"environment":"development","level":"info","message":"Health check available at http://localhost:3000/health","service":"medblock-backend","timestamp":"2025-06-27 04:27:26"}
{"environment":"development","level":"info","message":"API documentation available at http://localhost:3000/api/v1","service":"medblock-backend","timestamp":"2025-06-27 04:27:26"}
{"environment":"development","level":"info","message":"--- Logger test from server.js ---","service":"medblock-backend","timestamp":"2025-06-27 04:27:53"}
{"environment":"development","level":"info","message":"✅ MongoDB connected successfully","service":"medblock-backend","timestamp":"2025-06-27 04:27:54"}
{"environment":"development","level":"info","message":"Database connected successfully","service":"medblock-backend","timestamp":"2025-06-27 04:27:54"}
{"environment":"development","level":"info","message":"Server running on port 3000 in development mode","service":"medblock-backend","timestamp":"2025-06-27 04:27:54"}
{"environment":"development","level":"info","message":"Health check available at http://localhost:3000/health","service":"medblock-backend","timestamp":"2025-06-27 04:27:54"}
{"environment":"development","level":"info","message":"API documentation available at http://localhost:3000/api/v1","service":"medblock-backend","timestamp":"2025-06-27 04:27:54"}
{"environment":"development","level":"info","message":"--- Logger test from server.js ---","service":"medblock-backend","timestamp":"2025-06-27 04:28:17"}
{"environment":"development","level":"info","message":"✅ MongoDB connected successfully","service":"medblock-backend","timestamp":"2025-06-27 04:28:18"}
{"environment":"development","level":"info","message":"Database connected successfully","service":"medblock-backend","timestamp":"2025-06-27 04:28:18"}
{"environment":"development","level":"info","message":"Server running on port 3000 in development mode","service":"medblock-backend","timestamp":"2025-06-27 04:28:18"}
{"environment":"development","level":"info","message":"Health check available at http://localhost:3000/health","service":"medblock-backend","timestamp":"2025-06-27 04:28:18"}
{"environment":"development","level":"info","message":"API documentation available at http://localhost:3000/api/v1","service":"medblock-backend","timestamp":"2025-06-27 04:28:18"}
{"environment":"development","ip":"::1","level":"info","message":"GET /api/v1/patients/685dc7399aaaebdbf35da64b/allergies","service":"medblock-backend","timestamp":"2025-06-27 04:42:52","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"GET","resource":"/api/v1/patients/685dc7399aaaebdbf35da64b/allergies","service":"medblock-backend","timestamp":"2025-06-27 04:42:52","userAgent":"curl/8.5.0","userId":"685da1f425549ec1ae4d9eab"}
{"environment":"development","ip":"::1","level":"info","message":"PATCH /api/v1/patients/685dc7399aaaebdbf35da64b/allergies/685deb2ca824db4598194366","service":"medblock-backend","timestamp":"2025-06-27 04:43:05","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"PATCH","resource":"/api/v1/patients/685dc7399aaaebdbf35da64b/allergies/685deb2ca824db4598194366","service":"medblock-backend","timestamp":"2025-06-27 04:43:05","userAgent":"curl/8.5.0","userId":"685da1f425549ec1ae4d9eab"}
{"action":"allergy_updated","allergyId":"685deb2ca824db4598194366","environment":"development","level":"info","message":"AUDIT_LOG","patientId":"P-0001","resource":"patient:P-0001","service":"medblock-backend","timestamp":"2025-06-27 04:43:05","updatedFields":["severity","reaction"],"userId":"685da1f425549ec1ae4d9eab"}
{"environment":"development","ip":"::1","level":"info","message":"DELETE /api/v1/patients/685dc7399aaaebdbf35da64b/allergies/685deb2ca824db4598194366","service":"medblock-backend","timestamp":"2025-06-27 04:43:32","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"DELETE","resource":"/api/v1/patients/685dc7399aaaebdbf35da64b/allergies/685deb2ca824db4598194366","service":"medblock-backend","timestamp":"2025-06-27 04:43:32","userAgent":"curl/8.5.0","userId":"685da1f425549ec1ae4d9eab"}
{"action":"allergy_deleted","allergyId":"685deb2ca824db4598194366","environment":"development","level":"info","message":"AUDIT_LOG","patientId":"P-0001","resource":"patient:P-0001","service":"medblock-backend","timestamp":"2025-06-27 04:43:32","userId":"685da1f425549ec1ae4d9eab"}
{"environment":"development","ip":"::1","level":"info","message":"POST /api/v1/patients/685dc7399aaaebdbf35da64b/medications","service":"medblock-backend","timestamp":"2025-06-27 04:51:03","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"POST","resource":"/api/v1/patients/685dc7399aaaebdbf35da64b/medications","service":"medblock-backend","timestamp":"2025-06-27 04:51:03","userAgent":"curl/8.5.0","userId":"685da1f425549ec1ae4d9eab"}
{"environment":"development","ip":"::1","level":"info","message":"GET /api/v1/patients/685dc7399aaaebdbf35da64b/medications","service":"medblock-backend","timestamp":"2025-06-27 04:51:22","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"GET","resource":"/api/v1/patients/685dc7399aaaebdbf35da64b/medications","service":"medblock-backend","timestamp":"2025-06-27 04:51:22","userAgent":"curl/8.5.0","userId":"685da1f425549ec1ae4d9eab"}
{"environment":"development","ip":"::1","level":"info","message":"POST /api/patients","service":"medblock-backend","timestamp":"2025-06-27 05:02:20","userAgent":"curl/8.5.0"}
{"environment":"development","level":"info","message":"SIGINT received, shutting down gracefully","service":"medblock-backend","timestamp":"2025-06-27 05:12:07"}
{"environment":"development","level":"info","message":"--- Logger test from server.js ---","service":"medblock-backend","timestamp":"2025-06-27 16:12:52"}
{"environment":"development","level":"info","message":"✅ MongoDB connected successfully","service":"medblock-backend","timestamp":"2025-06-27 16:12:52"}
{"environment":"development","level":"info","message":"Database connected successfully","service":"medblock-backend","timestamp":"2025-06-27 16:12:52"}
{"environment":"development","level":"info","message":"Server running on port 3000 in development mode","service":"medblock-backend","timestamp":"2025-06-27 16:12:52"}
{"environment":"development","level":"info","message":"Health check available at http://localhost:3000/health","service":"medblock-backend","timestamp":"2025-06-27 16:12:52"}
{"environment":"development","level":"info","message":"API documentation available at http://localhost:3000/api/v1","service":"medblock-backend","timestamp":"2025-06-27 16:12:52"}
{"environment":"development","ip":"::1","level":"info","message":"GET /api/admins","service":"medblock-backend","timestamp":"2025-06-27 16:13:56","userAgent":"curl/8.5.0"}
{"environment":"development","ip":"::1","level":"info","message":"GET /api/users","service":"medblock-backend","timestamp":"2025-06-27 16:14:12","userAgent":"curl/8.5.0"}
{"environment":"development","ip":"::1","level":"info","message":"GET /api/admin/admins","service":"medblock-backend","timestamp":"2025-06-27 16:58:52","userAgent":"curl/8.5.0"}
{"environment":"development","ip":"::1","level":"info","message":"GET /api/admin/users","service":"medblock-backend","timestamp":"2025-06-27 16:59:11","userAgent":"curl/8.5.0"}
{"environment":"development","ip":"::1","level":"info","message":"DELETE /api/admin/delete/USER_ID_HERE","service":"medblock-backend","timestamp":"2025-06-27 16:59:33","userAgent":"curl/8.5.0"}
{"environment":"development","ip":"::1","level":"info","message":"GET /api/admin/admins","service":"medblock-backend","timestamp":"2025-06-27 17:23:28","userAgent":"curl/8.5.0"}
{"environment":"development","ip":"::1","level":"info","message":"GET /api/v1/admins","service":"medblock-backend","timestamp":"2025-06-27 17:26:43","userAgent":"curl/8.5.0"}
{"environment":"development","ip":"::1","level":"info","message":"GET /api/v1/users","service":"medblock-backend","timestamp":"2025-06-27 17:27:13","userAgent":"curl/8.5.0"}
{"environment":"development","level":"info","message":"--- Logger test from server.js ---","service":"medblock-backend","timestamp":"2025-06-27 17:37:42"}
{"environment":"development","level":"info","message":"✅ MongoDB connected successfully","service":"medblock-backend","timestamp":"2025-06-27 17:37:42"}
{"environment":"development","level":"info","message":"Database connected successfully","service":"medblock-backend","timestamp":"2025-06-27 17:37:42"}
{"environment":"development","level":"info","message":"Server running on port 3000 in development mode","service":"medblock-backend","timestamp":"2025-06-27 17:37:42"}
{"environment":"development","level":"info","message":"Health check available at http://localhost:3000/health","service":"medblock-backend","timestamp":"2025-06-27 17:37:42"}
{"environment":"development","level":"info","message":"API documentation available at http://localhost:3000/api/v1","service":"medblock-backend","timestamp":"2025-06-27 17:37:42"}
{"environment":"development","ip":"::1","level":"info","message":"GET /api/v1/admin/admins","service":"medblock-backend","timestamp":"2025-06-27 18:13:29","userAgent":"curl/8.5.0"}
{"environment":"development","error":"jwt must be provided","level":"error","message":"SECURITY_EVENT: Token verification failed.","service":"medblock-backend","timestamp":"2025-06-27 18:13:29"}
{"environment":"development","ip":"::1","level":"info","message":"GET /api/v1/admin/admins","service":"medblock-backend","timestamp":"2025-06-27 18:16:18","userAgent":"curl/8.5.0"}
{"environment":"development","error":"invalid signature","level":"error","message":"SECURITY_EVENT: Token verification failed.","service":"medblock-backend","timestamp":"2025-06-27 18:16:18"}
{"environment":"development","level":"info","message":"SIGINT received, shutting down gracefully","service":"medblock-backend","timestamp":"2025-06-27 18:46:42"}
{"environment":"development","level":"info","message":"--- Logger test from server.js ---","service":"medblock-backend","timestamp":"2025-06-27 18:46:46"}
{"environment":"development","level":"info","message":"✅ MongoDB connected successfully","service":"medblock-backend","timestamp":"2025-06-27 18:46:46"}
{"environment":"development","level":"info","message":"Database connected successfully","service":"medblock-backend","timestamp":"2025-06-27 18:46:46"}
{"environment":"development","level":"info","message":"Server running on port 3000 in development mode","service":"medblock-backend","timestamp":"2025-06-27 18:46:46"}
{"environment":"development","level":"info","message":"Health check available at http://localhost:3000/health","service":"medblock-backend","timestamp":"2025-06-27 18:46:46"}
{"environment":"development","level":"info","message":"API documentation available at http://localhost:3000/api/v1","service":"medblock-backend","timestamp":"2025-06-27 18:46:46"}
{"environment":"development","ip":"::1","level":"info","message":"GET /api/v1/admin/admins","service":"medblock-backend","timestamp":"2025-06-27 18:46:59","userAgent":"curl/8.5.0"}
{"environment":"development","error":"invalid signature","level":"error","message":"SECURITY_EVENT: Token verification failed.","name":"JsonWebTokenError","service":"medblock-backend","timestamp":"2025-06-27 18:46:59","tokenProvided":true}
{"environment":"development","ip":"::1","level":"info","message":"GET /api/v1/users","service":"medblock-backend","timestamp":"2025-06-27 18:48:24","userAgent":"curl/8.5.0"}
{"environment":"development","level":"info","message":"--- Logger test from server.js ---","service":"medblock-backend","timestamp":"2025-06-27 18:48:43"}
{"environment":"development","level":"info","message":"✅ MongoDB connected successfully","service":"medblock-backend","timestamp":"2025-06-27 18:48:44"}
{"environment":"development","level":"info","message":"Database connected successfully","service":"medblock-backend","timestamp":"2025-06-27 18:48:44"}
{"environment":"development","level":"info","message":"Server running on port 3000 in development mode","service":"medblock-backend","timestamp":"2025-06-27 18:48:44"}
{"environment":"development","level":"info","message":"Health check available at http://localhost:3000/health","service":"medblock-backend","timestamp":"2025-06-27 18:48:44"}
{"environment":"development","level":"info","message":"API documentation available at http://localhost:3000/api/v1","service":"medblock-backend","timestamp":"2025-06-27 18:48:44"}
{"environment":"development","ip":"::1","level":"info","message":"GET /api/v1/users","service":"medblock-backend","timestamp":"2025-06-27 18:48:52","userAgent":"curl/8.5.0"}
{"environment":"development","level":"info","message":"--- Logger test from server.js ---","service":"medblock-backend","timestamp":"2025-06-27 18:50:08"}
{"environment":"development","level":"info","message":"✅ MongoDB connected successfully","service":"medblock-backend","timestamp":"2025-06-27 18:50:08"}
{"environment":"development","level":"info","message":"Database connected successfully","service":"medblock-backend","timestamp":"2025-06-27 18:50:08"}
{"environment":"development","level":"info","message":"Server running on port 3000 in development mode","service":"medblock-backend","timestamp":"2025-06-27 18:50:08"}
{"environment":"development","level":"info","message":"Health check available at http://localhost:3000/health","service":"medblock-backend","timestamp":"2025-06-27 18:50:08"}
{"environment":"development","level":"info","message":"API documentation available at http://localhost:3000/api/v1","service":"medblock-backend","timestamp":"2025-06-27 18:50:08"}
{"environment":"development","ip":"::1","level":"info","message":"GET /api/v1/users/me","service":"medblock-backend","timestamp":"2025-06-27 18:50:15","userAgent":"curl/8.5.0"}
{"environment":"development","level":"info","message":"--- Logger test from server.js ---","service":"medblock-backend","timestamp":"2025-06-27 18:50:21"}
{"environment":"development","level":"info","message":"✅ MongoDB connected successfully","service":"medblock-backend","timestamp":"2025-06-27 18:50:21"}
{"environment":"development","level":"info","message":"Database connected successfully","service":"medblock-backend","timestamp":"2025-06-27 18:50:21"}
{"environment":"development","level":"info","message":"Server running on port 3000 in development mode","service":"medblock-backend","timestamp":"2025-06-27 18:50:21"}
{"environment":"development","level":"info","message":"Health check available at http://localhost:3000/health","service":"medblock-backend","timestamp":"2025-06-27 18:50:21"}
{"environment":"development","level":"info","message":"API documentation available at http://localhost:3000/api/v1","service":"medblock-backend","timestamp":"2025-06-27 18:50:21"}
{"environment":"development","ip":"::1","level":"info","message":"GET /api/v1/users/me","service":"medblock-backend","timestamp":"2025-06-27 18:50:31","userAgent":"curl/8.5.0"}
{"environment":"development","level":"info","message":"--- Logger test from server.js ---","service":"medblock-backend","timestamp":"2025-06-27 18:52:19"}
{"environment":"development","level":"info","message":"✅ MongoDB connected successfully","service":"medblock-backend","timestamp":"2025-06-27 18:52:19"}
{"environment":"development","level":"info","message":"Database connected successfully","service":"medblock-backend","timestamp":"2025-06-27 18:52:19"}
{"environment":"development","level":"info","message":"Server running on port 3000 in development mode","service":"medblock-backend","timestamp":"2025-06-27 18:52:19"}
{"environment":"development","level":"info","message":"Health check available at http://localhost:3000/health","service":"medblock-backend","timestamp":"2025-06-27 18:52:19"}
{"environment":"development","level":"info","message":"API documentation available at http://localhost:3000/api/v1","service":"medblock-backend","timestamp":"2025-06-27 18:52:19"}
{"environment":"development","ip":"::1","level":"info","message":"DELETE /api/v1/admin/users/65b9a8c7d4e3f2b1a0c9d8e7","service":"medblock-backend","timestamp":"2025-06-27 18:52:26","userAgent":"curl/8.5.0"}
{"environment":"development","error":"invalid signature","level":"error","message":"SECURITY_EVENT: Token verification failed.","name":"JsonWebTokenError","service":"medblock-backend","timestamp":"2025-06-27 18:52:26","tokenProvided":true}
{"environment":"development","level":"info","message":"SIGINT received, shutting down gracefully","service":"medblock-backend","timestamp":"2025-06-27 19:03:20"}
{"environment":"development","level":"info","message":"--- Logger test from server.js ---","service":"medblock-backend","timestamp":"2025-06-27 19:03:22"}
{"environment":"development","level":"info","message":"✅ MongoDB connected successfully","service":"medblock-backend","timestamp":"2025-06-27 19:03:23"}
{"environment":"development","level":"info","message":"Database connected successfully","service":"medblock-backend","timestamp":"2025-06-27 19:03:23"}
{"environment":"development","level":"info","message":"Server running on port 3000 in development mode","service":"medblock-backend","timestamp":"2025-06-27 19:03:23"}
{"environment":"development","level":"info","message":"Health check available at http://localhost:3000/health","service":"medblock-backend","timestamp":"2025-06-27 19:03:23"}
{"environment":"development","level":"info","message":"API documentation available at http://localhost:3000/api/v1","service":"medblock-backend","timestamp":"2025-06-27 19:03:23"}
{"environment":"development","ip":"::1","level":"info","message":"DELETE /api/v1/admin/users/65b9a8c7d4e3f2b1a0c9d8e7","service":"medblock-backend","timestamp":"2025-06-27 19:03:28","userAgent":"curl/8.5.0"}
{"environment":"development","error":"invalid signature","level":"error","message":"SECURITY_EVENT: Token verification failed.","name":"JsonWebTokenError","service":"medblock-backend","timestamp":"2025-06-27 19:03:28","tokenProvided":true}
{"environment":"development","level":"info","message":"SIGINT received, shutting down gracefully","service":"medblock-backend","timestamp":"2025-06-27 19:50:43"}
{"environment":"development","level":"info","message":"--- Logger test from server.js ---","service":"medblock-backend","timestamp":"2025-06-27 19:51:05"}
{"environment":"development","level":"info","message":"✅ MongoDB connected successfully","service":"medblock-backend","timestamp":"2025-06-27 19:51:05"}
{"environment":"development","level":"info","message":"Database connected successfully","service":"medblock-backend","timestamp":"2025-06-27 19:51:05"}
{"environment":"development","level":"info","message":"Server running on port 3000 in development mode","service":"medblock-backend","timestamp":"2025-06-27 19:51:05"}
{"environment":"development","level":"info","message":"Health check available at http://localhost:3000/health","service":"medblock-backend","timestamp":"2025-06-27 19:51:05"}
{"environment":"development","level":"info","message":"API documentation available at http://localhost:3000/api/v1","service":"medblock-backend","timestamp":"2025-06-27 19:51:05"}
{"environment":"development","ip":"::1","level":"info","message":"GET /api/v1/users/me","service":"medblock-backend","timestamp":"2025-06-27 19:51:33","userAgent":"curl/8.5.0"}
{"environment":"development","error":"invalid signature","event":"invalid_token_format","ip":"::1","level":"warn","message":"SECURITY_EVENT","path":"/api/v1/users/me","service":"medblock-backend","timestamp":"2025-06-27 19:51:33","userAgent":"curl/8.5.0","userId":"N/A"}
{"environment":"development","level":"info","message":"SIGINT received, shutting down gracefully","service":"medblock-backend","timestamp":"2025-06-27 21:39:45"}
{"environment":"development","level":"info","message":"--- Logger test from server.js ---","service":"medblock-backend","timestamp":"2025-06-27 21:39:56"}
{"environment":"development","level":"info","message":"✅ MongoDB connected successfully","service":"medblock-backend","timestamp":"2025-06-27 21:39:56"}
{"environment":"development","level":"info","message":"Database connected successfully","service":"medblock-backend","timestamp":"2025-06-27 21:39:56"}
{"environment":"development","level":"info","message":"Server running on port 3000 in development mode","service":"medblock-backend","timestamp":"2025-06-27 21:39:56"}
{"environment":"development","level":"info","message":"Health check available at http://localhost:3000/health","service":"medblock-backend","timestamp":"2025-06-27 21:39:56"}
{"environment":"development","level":"info","message":"API documentation available at http://localhost:3000/api/v1","service":"medblock-backend","timestamp":"2025-06-27 21:39:56"}
{"environment":"development","level":"info","message":"SIGINT received, shutting down gracefully","service":"medblock-backend","timestamp":"2025-06-27 21:41:24"}
{"environment":"development","level":"info","message":"--- Logger test from server.js ---","service":"medblock-backend","timestamp":"2025-06-27 21:42:37"}
{"environment":"development","level":"info","message":"✅ MongoDB connected successfully","service":"medblock-backend","timestamp":"2025-06-27 21:42:37"}
{"environment":"development","level":"info","message":"Database connected successfully","service":"medblock-backend","timestamp":"2025-06-27 21:42:37"}
{"environment":"development","level":"info","message":"Server running on port 3000 in development mode","service":"medblock-backend","timestamp":"2025-06-27 21:42:37"}
{"environment":"development","level":"info","message":"Health check available at http://localhost:3000/health","service":"medblock-backend","timestamp":"2025-06-27 21:42:37"}
{"environment":"development","level":"info","message":"API documentation available at http://localhost:3000/api/v1","service":"medblock-backend","timestamp":"2025-06-27 21:42:37"}
{"environment":"development","ip":"::1","level":"info","message":"POST /api/v1/auth/register","service":"medblock-backend","timestamp":"2025-06-27 21:47:03","userAgent":"curl/8.5.0"}
{"action":"user_registered","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","resource":"auth","service":"medblock-backend","timestamp":"2025-06-27 21:47:03","userAgent":"curl/8.5.0","userId":"685ee7276d5c4c3dc71afc9c"}
{"environment":"development","ip":"::1","level":"info","message":"POST /api/v1/patients","service":"medblock-backend","timestamp":"2025-06-27 23:15:09","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"POST","resource":"/api/v1/patients","service":"medblock-backend","timestamp":"2025-06-27 23:15:09","userAgent":"curl/8.5.0","userId":"685ee7276d5c4c3dc71afc9c"}
{"environment":"development","ip":"::1","level":"info","message":"POST /api/v1/patients","service":"medblock-backend","timestamp":"2025-06-27 23:17:17","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"POST","resource":"/api/v1/patients","service":"medblock-backend","timestamp":"2025-06-27 23:17:17","userAgent":"curl/8.5.0","userId":"685ee7276d5c4c3dc71afc9c"}
{"action":"patient_created","environment":"development","level":"info","message":"AUDIT_LOG","patientId":"SCejy22eg","patientName":"John Doe","resource":"patient:SCejy22eg","service":"medblock-backend","timestamp":"2025-06-27 23:17:17","userId":"685ee7276d5c4c3dc71afc9c"}
{"environment":"development","ip":"::1","level":"info","message":"POST /api/v1/patients","service":"medblock-backend","timestamp":"2025-06-27 23:17:32","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"POST","resource":"/api/v1/patients","service":"medblock-backend","timestamp":"2025-06-27 23:17:32","userAgent":"curl/8.5.0","userId":"685ee7276d5c4c3dc71afc9c"}
{"action":"patient_created","environment":"development","level":"info","message":"AUDIT_LOG","patientId":"ZGT_tcbwN","patientName":"Aisha Khan","resource":"patient:ZGT_tcbwN","service":"medblock-backend","timestamp":"2025-06-27 23:17:33","userId":"685ee7276d5c4c3dc71afc9c"}
{"environment":"development","ip":"::1","level":"info","message":"POST /api/v1/patients","service":"medblock-backend","timestamp":"2025-06-27 23:17:50","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"POST","resource":"/api/v1/patients","service":"medblock-backend","timestamp":"2025-06-27 23:17:50","userAgent":"curl/8.5.0","userId":"685ee7276d5c4c3dc71afc9c"}
{"action":"patient_created","environment":"development","level":"info","message":"AUDIT_LOG","patientId":"KecA5W12Q","patientName":"David Kimani","resource":"patient:KecA5W12Q","service":"medblock-backend","timestamp":"2025-06-27 23:17:50","userId":"685ee7276d5c4c3dc71afc9c"}
{"environment":"development","ip":"::1","level":"info","message":"POST /api/v1/patients","service":"medblock-backend","timestamp":"2025-06-27 23:18:05","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"POST","resource":"/api/v1/patients","service":"medblock-backend","timestamp":"2025-06-27 23:18:05","userAgent":"curl/8.5.0","userId":"685ee7276d5c4c3dc71afc9c"}
{"environment":"development","ip":"::1","level":"info","message":"POST /api/v1/patients","service":"medblock-backend","timestamp":"2025-06-27 23:18:29","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"POST","resource":"/api/v1/patients","service":"medblock-backend","timestamp":"2025-06-27 23:18:29","userAgent":"curl/8.5.0","userId":"685ee7276d5c4c3dc71afc9c"}
{"action":"patient_created","environment":"development","level":"info","message":"AUDIT_LOG","patientId":"AmQwx2_jj","patientName":"Kevin Mutua","resource":"patient:AmQwx2_jj","service":"medblock-backend","timestamp":"2025-06-27 23:18:29","userId":"685ee7276d5c4c3dc71afc9c"}
{"environment":"development","ip":"::1","level":"info","message":"POST /api/v1/patients","service":"medblock-backend","timestamp":"2025-06-27 23:19:38","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"POST","resource":"/api/v1/patients","service":"medblock-backend","timestamp":"2025-06-27 23:19:38","userAgent":"curl/8.5.0","userId":"685ee7276d5c4c3dc71afc9c"}
{"environment":"development","ip":"::1","level":"info","message":"POST /api/v1/patients","service":"medblock-backend","timestamp":"2025-06-27 23:24:53","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"POST","resource":"/api/v1/patients","service":"medblock-backend","timestamp":"2025-06-27 23:24:53","userAgent":"curl/8.5.0","userId":"685ee7276d5c4c3dc71afc9c"}
{"environment":"development","ip":"::1","level":"info","message":"POST /api/v1/patients","service":"medblock-backend","timestamp":"2025-06-27 23:25:48","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"POST","resource":"/api/v1/patients","service":"medblock-backend","timestamp":"2025-06-27 23:25:48","userAgent":"curl/8.5.0","userId":"685ee7276d5c4c3dc71afc9c"}
{"environment":"development","level":"info","message":"SIGINT received, shutting down gracefully","service":"medblock-backend","timestamp":"2025-06-27 23:35:09"}
{"environment":"development","level":"info","message":"--- Logger test from server.js ---","service":"medblock-backend","timestamp":"2025-06-27 23:35:12"}
{"environment":"development","level":"info","message":"✅ MongoDB connected successfully","service":"medblock-backend","timestamp":"2025-06-27 23:35:13"}
{"environment":"development","level":"info","message":"Database connected successfully","service":"medblock-backend","timestamp":"2025-06-27 23:35:13"}
{"environment":"development","level":"info","message":"Server running on port 3000 in development mode","service":"medblock-backend","timestamp":"2025-06-27 23:35:13"}
{"environment":"development","level":"info","message":"Health check available at http://localhost:3000/health","service":"medblock-backend","timestamp":"2025-06-27 23:35:13"}
{"environment":"development","level":"info","message":"API documentation available at http://localhost:3000/api/v1","service":"medblock-backend","timestamp":"2025-06-27 23:35:13"}
{"environment":"development","ip":"::1","level":"info","message":"POST /api/v1/patients","service":"medblock-backend","timestamp":"2025-06-27 23:36:17","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"POST","resource":"/api/v1/patients","service":"medblock-backend","timestamp":"2025-06-27 23:36:17","userAgent":"curl/8.5.0","userId":"685ee7276d5c4c3dc71afc9c"}
{"action":"patient_created","environment":"development","level":"info","message":"AUDIT_LOG","patientId":"rAnfI5VoQ","patientName":"Sarah Awino","resource":"patient:rAnfI5VoQ","service":"medblock-backend","timestamp":"2025-06-27 23:36:17","userId":"685ee7276d5c4c3dc71afc9c"}
{"environment":"development","ip":"::1","level":"info","message":"POST /api/v1/patients","service":"medblock-backend","timestamp":"2025-06-28 00:35:26","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"POST","resource":"/api/v1/patients","service":"medblock-backend","timestamp":"2025-06-28 00:35:26","userAgent":"curl/8.5.0","userId":"685ee7276d5c4c3dc71afc9c"}
{"environment":"development","ip":"::1","level":"info","message":"GET /api/v1/patients","service":"medblock-backend","timestamp":"2025-06-28 00:46:52","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"GET","resource":"/api/v1/patients","service":"medblock-backend","timestamp":"2025-06-28 00:46:52","userAgent":"curl/8.5.0","userId":"685ee7276d5c4c3dc71afc9c"}
{"action":"patients_listed","count":11,"environment":"development","level":"info","limit":20,"message":"AUDIT_LOG","page":1,"resource":"patients","service":"medblock-backend","timestamp":"2025-06-28 00:46:52","userId":"685ee7276d5c4c3dc71afc9c"}
{"environment":"development","ip":"::1","level":"info","message":"GET /api/v1/patients?page=1&limit=2","service":"medblock-backend","timestamp":"2025-06-28 00:49:30","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"GET","resource":"/api/v1/patients?page=1&limit=2","service":"medblock-backend","timestamp":"2025-06-28 00:49:30","userAgent":"curl/8.5.0","userId":"685ee7276d5c4c3dc71afc9c"}
{"action":"patients_listed","count":2,"environment":"development","level":"info","limit":2,"message":"AUDIT_LOG","page":1,"resource":"patients","service":"medblock-backend","timestamp":"2025-06-28 00:49:30","userId":"685ee7276d5c4c3dc71afc9c"}
{"environment":"development","ip":"::1","level":"info","message":"GET /api/v1/patients?gender=female","service":"medblock-backend","timestamp":"2025-06-28 00:50:02","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"GET","resource":"/api/v1/patients?gender=female","service":"medblock-backend","timestamp":"2025-06-28 00:50:02","userAgent":"curl/8.5.0","userId":"685ee7276d5c4c3dc71afc9c"}
{"action":"patients_listed","count":5,"environment":"development","level":"info","limit":20,"message":"AUDIT_LOG","page":1,"resource":"patients","service":"medblock-backend","timestamp":"2025-06-28 00:50:02","userId":"685ee7276d5c4c3dc71afc9c"}
{"environment":"development","ip":"::1","level":"info","message":"GET /api/v1/patients?county=Nairobi","service":"medblock-backend","timestamp":"2025-06-28 00:51:01","userAgent":"curl/8.5.0"}
{"environment":"development","level":"error","message":"Authentication error: Bad control character in string literal in JSON at position 60 (line 1 column 61)","service":"medblock-backend","stack":"SyntaxError: Bad control character in string literal in JSON at position 60 (line 1 column 61)\n    at JSON.parse (<anonymous>)\n    at Object.jwsDecode [as decode] (/home/josva/Desktop/MedBlock/node_modules/jws/lib/verify-stream.js:71:20)\n    at module.exports (/home/josva/Desktop/MedBlock/node_modules/jsonwebtoken/decode.js:5:21)\n    at module.exports [as verify] (/home/josva/Desktop/MedBlock/node_modules/jsonwebtoken/verify.js:76:20)\n    at authenticateToken (/home/josva/Desktop/MedBlock/src/middleware/auth.js:26:25)\n    at Layer.handle [as handle_request] (/home/josva/Desktop/MedBlock/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/home/josva/Desktop/MedBlock/node_modules/express/lib/router/index.js:328:13)\n    at /home/josva/Desktop/MedBlock/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/home/josva/Desktop/MedBlock/node_modules/express/lib/router/index.js:346:12)\n    at next (/home/josva/Desktop/MedBlock/node_modules/express/lib/router/index.js:280:10)","timestamp":"2025-06-28 00:51:01"}
{"environment":"development","ip":"::1","level":"info","message":"GET /api/v1/patients?county=Nairobi","service":"medblock-backend","timestamp":"2025-06-28 00:51:21","userAgent":"curl/8.5.0"}
{"environment":"development","level":"error","message":"Authentication error: Bad control character in string literal in JSON at position 60 (line 1 column 61)","service":"medblock-backend","stack":"SyntaxError: Bad control character in string literal in JSON at position 60 (line 1 column 61)\n    at JSON.parse (<anonymous>)\n    at Object.jwsDecode [as decode] (/home/josva/Desktop/MedBlock/node_modules/jws/lib/verify-stream.js:71:20)\n    at module.exports (/home/josva/Desktop/MedBlock/node_modules/jsonwebtoken/decode.js:5:21)\n    at module.exports [as verify] (/home/josva/Desktop/MedBlock/node_modules/jsonwebtoken/verify.js:76:20)\n    at authenticateToken (/home/josva/Desktop/MedBlock/src/middleware/auth.js:26:25)\n    at Layer.handle [as handle_request] (/home/josva/Desktop/MedBlock/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/home/josva/Desktop/MedBlock/node_modules/express/lib/router/index.js:328:13)\n    at /home/josva/Desktop/MedBlock/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/home/josva/Desktop/MedBlock/node_modules/express/lib/router/index.js:346:12)\n    at next (/home/josva/Desktop/MedBlock/node_modules/express/lib/router/index.js:280:10)","timestamp":"2025-06-28 00:51:21"}
{"environment":"development","ip":"::1","level":"info","message":"GET /api/v1/patients/statistics/county","service":"medblock-backend","timestamp":"2025-06-28 00:52:10","userAgent":"curl/8.5.0"}
{"environment":"development","level":"error","message":"Authentication error: Bad control character in string literal in JSON at position 60 (line 1 column 61)","service":"medblock-backend","stack":"SyntaxError: Bad control character in string literal in JSON at position 60 (line 1 column 61)\n    at JSON.parse (<anonymous>)\n    at Object.jwsDecode [as decode] (/home/josva/Desktop/MedBlock/node_modules/jws/lib/verify-stream.js:71:20)\n    at module.exports (/home/josva/Desktop/MedBlock/node_modules/jsonwebtoken/decode.js:5:21)\n    at module.exports [as verify] (/home/josva/Desktop/MedBlock/node_modules/jsonwebtoken/verify.js:76:20)\n    at authenticateToken (/home/josva/Desktop/MedBlock/src/middleware/auth.js:26:25)\n    at Layer.handle [as handle_request] (/home/josva/Desktop/MedBlock/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/home/josva/Desktop/MedBlock/node_modules/express/lib/router/index.js:328:13)\n    at /home/josva/Desktop/MedBlock/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/home/josva/Desktop/MedBlock/node_modules/express/lib/router/index.js:346:12)\n    at next (/home/josva/Desktop/MedBlock/node_modules/express/lib/router/index.js:280:10)","timestamp":"2025-06-28 00:52:10"}
{"environment":"development","ip":"::1","level":"info","message":"GET /api/v1/patients/statistics/county","service":"medblock-backend","timestamp":"2025-06-28 00:52:34","userAgent":"curl/8.5.0"}
{"environment":"development","level":"error","message":"Authentication error: Bad control character in string literal in JSON at position 60 (line 1 column 61)","service":"medblock-backend","stack":"SyntaxError: Bad control character in string literal in JSON at position 60 (line 1 column 61)\n    at JSON.parse (<anonymous>)\n    at Object.jwsDecode [as decode] (/home/josva/Desktop/MedBlock/node_modules/jws/lib/verify-stream.js:71:20)\n    at module.exports (/home/josva/Desktop/MedBlock/node_modules/jsonwebtoken/decode.js:5:21)\n    at module.exports [as verify] (/home/josva/Desktop/MedBlock/node_modules/jsonwebtoken/verify.js:76:20)\n    at authenticateToken (/home/josva/Desktop/MedBlock/src/middleware/auth.js:26:25)\n    at Layer.handle [as handle_request] (/home/josva/Desktop/MedBlock/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/home/josva/Desktop/MedBlock/node_modules/express/lib/router/index.js:328:13)\n    at /home/josva/Desktop/MedBlock/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/home/josva/Desktop/MedBlock/node_modules/express/lib/router/index.js:346:12)\n    at next (/home/josva/Desktop/MedBlock/node_modules/express/lib/router/index.js:280:10)","timestamp":"2025-06-28 00:52:34"}
{"environment":"development","ip":"::1","level":"info","message":"GET /api/v1/patients?county=Nairobi","service":"medblock-backend","timestamp":"2025-06-28 00:58:24","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"GET","resource":"/api/v1/patients?county=Nairobi","service":"medblock-backend","timestamp":"2025-06-28 00:58:24","userAgent":"curl/8.5.0","userId":"685ee7276d5c4c3dc71afc9c"}
{"action":"patients_listed","count":3,"environment":"development","level":"info","limit":20,"message":"AUDIT_LOG","page":1,"resource":"patients","service":"medblock-backend","timestamp":"2025-06-28 00:58:24","userId":"685ee7276d5c4c3dc71afc9c"}
{"environment":"development","ip":"::1","level":"info","message":"GET /api/v1/patients/statistics/county","service":"medblock-backend","timestamp":"2025-06-28 00:58:53","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"GET","resource":"/api/v1/patients/statistics/county","service":"medblock-backend","timestamp":"2025-06-28 00:58:53","userAgent":"curl/8.5.0","userId":"685ee7276d5c4c3dc71afc9c"}
{"environment":"development","ip":"::1","level":"info","message":"GET /api/v1/patients/685f00c14ad724ba4e92bfd3","service":"medblock-backend","timestamp":"2025-06-28 01:00:24","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"GET","resource":"/api/v1/patients/685f00c14ad724ba4e92bfd3","service":"medblock-backend","timestamp":"2025-06-28 01:00:24","userAgent":"curl/8.5.0","userId":"685ee7276d5c4c3dc71afc9c"}
{"environment":"development","ip":"::1","level":"info","message":"GET /api/v1/patients/60c7281d2f7b8b0c4a8b4567","service":"medblock-backend","timestamp":"2025-06-28 01:00:39","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"GET","resource":"/api/v1/patients/60c7281d2f7b8b0c4a8b4567","service":"medblock-backend","timestamp":"2025-06-28 01:00:39","userAgent":"curl/8.5.0","userId":"685ee7276d5c4c3dc71afc9c"}
{"environment":"development","level":"warn","message":"Attempt to retrieve non-existent patient with ID: 60c7281d2f7b8b0c4a8b4567","service":"medblock-backend","timestamp":"2025-06-28 01:00:39","userId":"685ee7276d5c4c3dc71afc9c"}
{"environment":"development","ip":"::1","level":"info","message":"GET /api/v1/patients/invalidid123","service":"medblock-backend","timestamp":"2025-06-28 01:00:55","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"GET","resource":"/api/v1/patients/invalidid123","service":"medblock-backend","timestamp":"2025-06-28 01:00:55","userAgent":"curl/8.5.0","userId":"685ee7276d5c4c3dc71afc9c"}
{"environment":"development","level":"warn","message":"Invalid ObjectId format received for patient retrieval: invalidid123","service":"medblock-backend","timestamp":"2025-06-28 01:00:55","userId":"685ee7276d5c4c3dc71afc9c"}
{"environment":"development","ip":"::1","level":"info","message":"PUT /api/v1/patients/685efc4d6d5c4c3dc71afca1","service":"medblock-backend","timestamp":"2025-06-28 01:04:28","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"PUT","resource":"/api/v1/patients/685efc4d6d5c4c3dc71afca1","service":"medblock-backend","timestamp":"2025-06-28 01:04:28","userAgent":"curl/8.5.0","userId":"685ee7276d5c4c3dc71afc9c"}
{"action":"patient_updated","environment":"development","level":"info","message":"AUDIT_LOG","patientId":"SCejy22eg","resource":"patient:SCejy22eg","service":"medblock-backend","timestamp":"2025-06-28 01:04:28","updatedFields":["firstName","lastName","dateOfBirth","gender","nationalId","address","phoneNumber","email","bloodType","allergies","medicalHistory","emergencyContact","insuranceDetails"],"userId":"685ee7276d5c4c3dc71afc9c"}
{"environment":"development","ip":"::1","level":"info","message":"PATCH /api/v1/patients/685efc5d6d5c4c3dc71afca2","service":"medblock-backend","timestamp":"2025-06-28 01:04:50","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"PATCH","resource":"/api/v1/patients/685efc5d6d5c4c3dc71afca2","service":"medblock-backend","timestamp":"2025-06-28 01:04:50","userAgent":"curl/8.5.0","userId":"685ee7276d5c4c3dc71afc9c"}
{"environment":"development","level":"warn","message":"Attempt to partially update non-existent patient with ID: 685efc5d6d5c4c3dc71afca2","service":"medblock-backend","timestamp":"2025-06-28 01:04:50","userId":"685ee7276d5c4c3dc71afc9c"}
{"environment":"development","ip":"::1","level":"info","message":"PUT /api/v1/patients/60c7281d2f7b8b0c4a8b1111","service":"medblock-backend","timestamp":"2025-06-28 01:06:15","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"PUT","resource":"/api/v1/patients/60c7281d2f7b8b0c4a8b1111","service":"medblock-backend","timestamp":"2025-06-28 01:06:15","userAgent":"curl/8.5.0","userId":"685ee7276d5c4c3dc71afc9c"}
{"environment":"development","level":"warn","message":"Attempt to update non-existent patient with ID: 60c7281d2f7b8b0c4a8b1111","service":"medblock-backend","timestamp":"2025-06-28 01:06:15","userId":"685ee7276d5c4c3dc71afc9c"}
{"environment":"development","ip":"::1","level":"info","message":"PUT /api/v1/patients/notanobjectid","service":"medblock-backend","timestamp":"2025-06-28 01:08:04","userAgent":"curl/8.5.0"}
{"environment":"development","error":"invalid signature","event":"invalid_token_format","ip":"::1","level":"warn","message":"SECURITY_EVENT","path":"/api/v1/patients/notanobjectid","service":"medblock-backend","timestamp":"2025-06-28 01:08:04","userAgent":"curl/8.5.0","userId":"N/A"}
{"environment":"development","ip":"::1","level":"info","message":"PUT /api/v1/patients/685efc4d6d5c4c3dc71afca1","service":"medblock-backend","timestamp":"2025-06-28 01:09:29","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"PUT","resource":"/api/v1/patients/685efc4d6d5c4c3dc71afca1","service":"medblock-backend","timestamp":"2025-06-28 01:09:29","userAgent":"curl/8.5.0","userId":"685ee7276d5c4c3dc71afc9c"}
{"environment":"development","ip":"::1","level":"info","message":"GET /api/v1/patients","service":"medblock-backend","timestamp":"2025-06-28 01:11:41","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"GET","resource":"/api/v1/patients","service":"medblock-backend","timestamp":"2025-06-28 01:11:41","userAgent":"curl/8.5.0","userId":"685ee7276d5c4c3dc71afc9c"}
{"action":"patients_listed","count":11,"environment":"development","level":"info","limit":20,"message":"AUDIT_LOG","page":1,"resource":"patients","service":"medblock-backend","timestamp":"2025-06-28 01:11:41","userId":"685ee7276d5c4c3dc71afc9c"}
{"environment":"development","ip":"::1","level":"info","message":"PATCH /api/v1/patients/685efc5c6d5c4c3dc71afca8","service":"medblock-backend","timestamp":"2025-06-28 01:12:36","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"PATCH","resource":"/api/v1/patients/685efc5c6d5c4c3dc71afca8","service":"medblock-backend","timestamp":"2025-06-28 01:12:36","userAgent":"curl/8.5.0","userId":"685ee7276d5c4c3dc71afc9c"}
{"action":"patient_partially_updated","environment":"development","level":"info","message":"AUDIT_LOG","patientId":"ZGT_tcbwN","resource":"patient:ZGT_tcbwN","service":"medblock-backend","timestamp":"2025-06-28 01:12:36","updatedFields":["email","allergies"],"userId":"685ee7276d5c4c3dc71afc9c"}
{"environment":"development","ip":"::1","level":"info","message":"PUT /api/v1/patients/notanobjectid","service":"medblock-backend","timestamp":"2025-06-28 01:13:16","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"PUT","resource":"/api/v1/patients/notanobjectid","service":"medblock-backend","timestamp":"2025-06-28 01:13:16","userAgent":"curl/8.5.0","userId":"685ee7276d5c4c3dc71afc9c"}
{"environment":"development","level":"warn","message":"Invalid ObjectId format received for patient update: notanobjectid","service":"medblock-backend","timestamp":"2025-06-28 01:13:16","userId":"685ee7276d5c4c3dc71afc9c"}
{"environment":"development","ip":"::1","level":"info","message":"DELETE /api/v1/patients/685efc6e6d5c4c3dc71afcaf","service":"medblock-backend","timestamp":"2025-06-28 01:15:03","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"DELETE","resource":"/api/v1/patients/685efc6e6d5c4c3dc71afcaf","service":"medblock-backend","timestamp":"2025-06-28 01:15:03","userAgent":"curl/8.5.0","userId":"685ee7276d5c4c3dc71afc9c"}
{"action":"patient_deleted","environment":"development","level":"info","message":"AUDIT_LOG","patientId":"KecA5W12Q","patientName":"David Kimani","resource":"patient:KecA5W12Q","service":"medblock-backend","timestamp":"2025-06-28 01:15:03","userId":"685ee7276d5c4c3dc71afc9c"}
{"environment":"development","ip":"::1","level":"info","message":"DELETE /api/v1/patients/685dc7949aaaebdbf35da65b","service":"medblock-backend","timestamp":"2025-06-28 01:15:19","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"DELETE","resource":"/api/v1/patients/685dc7949aaaebdbf35da65b","service":"medblock-backend","timestamp":"2025-06-28 01:15:19","userAgent":"curl/8.5.0","userId":"685ee7276d5c4c3dc71afc9c"}
{"action":"patient_deleted","environment":"development","level":"info","message":"AUDIT_LOG","patientId":"P-0005","patientName":"Kelvin Kiprotich","resource":"patient:P-0005","service":"medblock-backend","timestamp":"2025-06-28 01:15:19","userId":"685ee7276d5c4c3dc71afc9c"}
{"environment":"development","ip":"::1","level":"info","message":"DELETE /api/v1/patients/bulk","service":"medblock-backend","timestamp":"2025-06-28 01:15:56","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"DELETE","resource":"/api/v1/patients/bulk","service":"medblock-backend","timestamp":"2025-06-28 01:15:56","userAgent":"curl/8.5.0","userId":"685ee7276d5c4c3dc71afc9c"}
{"action":"bulk_patient_deactivated","deactivatedCount":2,"environment":"development","invalidIdCount":0,"level":"info","message":"AUDIT_LOG","notFoundCount":0,"resource":"count:2","service":"medblock-backend","timestamp":"2025-06-28 01:15:56","userId":"685ee7276d5c4c3dc71afc9c"}
{"environment":"development","ip":"::1","level":"info","message":"DELETE /api/v1/patients/685efc6e6d5c4c3dc71afcaf","service":"medblock-backend","timestamp":"2025-06-28 01:16:50","userAgent":"curl/8.5.0"}
{"environment":"development","error":"invalid token","event":"invalid_token_format","ip":"::1","level":"warn","message":"SECURITY_EVENT","path":"/api/v1/patients/685efc6e6d5c4c3dc71afcaf","service":"medblock-backend","timestamp":"2025-06-28 01:16:50","userAgent":"curl/8.5.0","userId":"N/A"}
{"environment":"development","ip":"::1","level":"info","message":"DELETE /api/v1/patients/60c7281d2f7b8b0c4a8b2222","service":"medblock-backend","timestamp":"2025-06-28 01:17:08","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"DELETE","resource":"/api/v1/patients/60c7281d2f7b8b0c4a8b2222","service":"medblock-backend","timestamp":"2025-06-28 01:17:08","userAgent":"curl/8.5.0","userId":"685ee7276d5c4c3dc71afc9c"}
{"environment":"development","level":"warn","message":"Attempt to delete non-existent patient with ID: 60c7281d2f7b8b0c4a8b2222","service":"medblock-backend","timestamp":"2025-06-28 01:17:08","userId":"685ee7276d5c4c3dc71afc9c"}
{"environment":"development","ip":"::1","level":"info","message":"DELETE /api/v1/patients/definitelynotanid","service":"medblock-backend","timestamp":"2025-06-28 01:21:10","userAgent":"curl/8.5.0"}
{"environment":"development","level":"error","message":"Authentication error: Bad control character in string literal in JSON at position 60 (line 1 column 61)","service":"medblock-backend","stack":"SyntaxError: Bad control character in string literal in JSON at position 60 (line 1 column 61)\n    at JSON.parse (<anonymous>)\n    at Object.jwsDecode [as decode] (/home/josva/Desktop/MedBlock/node_modules/jws/lib/verify-stream.js:71:20)\n    at module.exports (/home/josva/Desktop/MedBlock/node_modules/jsonwebtoken/decode.js:5:21)\n    at module.exports [as verify] (/home/josva/Desktop/MedBlock/node_modules/jsonwebtoken/verify.js:76:20)\n    at authenticateToken (/home/josva/Desktop/MedBlock/src/middleware/auth.js:26:25)\n    at Layer.handle [as handle_request] (/home/josva/Desktop/MedBlock/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/home/josva/Desktop/MedBlock/node_modules/express/lib/router/index.js:328:13)\n    at /home/josva/Desktop/MedBlock/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/home/josva/Desktop/MedBlock/node_modules/express/lib/router/index.js:346:12)\n    at next (/home/josva/Desktop/MedBlock/node_modules/express/lib/router/index.js:280:10)","timestamp":"2025-06-28 01:21:10"}
{"environment":"development","ip":"::1","level":"info","message":"POST /api/v1/patients","service":"medblock-backend","timestamp":"2025-06-28 01:25:10","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"POST","resource":"/api/v1/patients","service":"medblock-backend","timestamp":"2025-06-28 01:25:10","userAgent":"curl/8.5.0","userId":"685ee7276d5c4c3dc71afc9c"}
{"environment":"development","ip":"::1","level":"info","message":"POST /api/v1/patients","service":"medblock-backend","timestamp":"2025-06-28 01:27:03","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"POST","resource":"/api/v1/patients","service":"medblock-backend","timestamp":"2025-06-28 01:27:03","userAgent":"curl/8.5.0","userId":"685ee7276d5c4c3dc71afc9c"}
{"environment":"development","ip":"::1","level":"info","message":"POST /api/v1/patients","service":"medblock-backend","timestamp":"2025-06-28 01:28:27","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"POST","resource":"/api/v1/patients","service":"medblock-backend","timestamp":"2025-06-28 01:28:27","userAgent":"curl/8.5.0","userId":"685ee7276d5c4c3dc71afc9c"}
{"environment":"development","ip":"::1","level":"info","message":"POST /api/v1/patients","service":"medblock-backend","timestamp":"2025-06-28 01:33:35","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"POST","resource":"/api/v1/patients","service":"medblock-backend","timestamp":"2025-06-28 01:33:35","userAgent":"curl/8.5.0","userId":"685ee7276d5c4c3dc71afc9c"}
{"environment":"development","ip":"::1","level":"info","message":"POST /api/v1/patients","service":"medblock-backend","timestamp":"2025-06-28 01:39:49","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"POST","resource":"/api/v1/patients","service":"medblock-backend","timestamp":"2025-06-28 01:39:49","userAgent":"curl/8.5.0","userId":"685ee7276d5c4c3dc71afc9c"}
{"environment":"development","ip":"::1","level":"info","message":"POST /api/v1/patients","service":"medblock-backend","timestamp":"2025-06-28 01:40:13","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"POST","resource":"/api/v1/patients","service":"medblock-backend","timestamp":"2025-06-28 01:40:13","userAgent":"curl/8.5.0","userId":"685ee7276d5c4c3dc71afc9c"}
{"_message":"Patient validation failed","environment":"development","errors":{"dateOfBirth":{"kind":"user defined","message":"Date of birth cannot be in the future","name":"ValidatorError","path":"dateOfBirth","properties":{"message":"Date of birth cannot be in the future","path":"dateOfBirth","type":"user defined","value":"2030-01-01T00:00:00.000Z"},"value":"2030-01-01T00:00:00.000Z"}},"level":"error","message":"Create patient failed: Patient validation failed: dateOfBirth: Date of birth cannot be in the future","service":"medblock-backend","stack":"ValidationError: Patient validation failed: dateOfBirth: Date of birth cannot be in the future\n    at Document.invalidate (/home/josva/Desktop/MedBlock/node_modules/mongoose/lib/document.js:3352:32)\n    at /home/josva/Desktop/MedBlock/node_modules/mongoose/lib/document.js:3113:17\n    at /home/josva/Desktop/MedBlock/node_modules/mongoose/lib/schemaType.js:1407:9\n    at process.processTicksAndRejections (node:internal/process/task_queues:85:11)","timestamp":"2025-06-28 01:40:13"}
{"environment":"development","ip":"::1","level":"info","message":"POST /api/v1/patients/685efc5c6d5c4c3dc71afca8/allergies","service":"medblock-backend","timestamp":"2025-06-28 01:41:21","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"POST","resource":"/api/v1/patients/685efc5c6d5c4c3dc71afca8/allergies","service":"medblock-backend","timestamp":"2025-06-28 01:41:21","userAgent":"curl/8.5.0","userId":"685ee7276d5c4c3dc71afc9c"}
{"environment":"development","ip":"::1","level":"info","message":"POST /api/v1/patients","service":"medblock-backend","timestamp":"2025-06-28 01:41:38","userAgent":"curl/8.5.0"}
{"environment":"development","level":"error","message":"Authentication error: Bad control character in string literal in JSON at position 60 (line 1 column 61)","service":"medblock-backend","stack":"SyntaxError: Bad control character in string literal in JSON at position 60 (line 1 column 61)\n    at JSON.parse (<anonymous>)\n    at Object.jwsDecode [as decode] (/home/josva/Desktop/MedBlock/node_modules/jws/lib/verify-stream.js:71:20)\n    at module.exports (/home/josva/Desktop/MedBlock/node_modules/jsonwebtoken/decode.js:5:21)\n    at module.exports [as verify] (/home/josva/Desktop/MedBlock/node_modules/jsonwebtoken/verify.js:76:20)\n    at authenticateToken (/home/josva/Desktop/MedBlock/src/middleware/auth.js:26:25)\n    at Layer.handle [as handle_request] (/home/josva/Desktop/MedBlock/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/home/josva/Desktop/MedBlock/node_modules/express/lib/router/index.js:328:13)\n    at /home/josva/Desktop/MedBlock/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/home/josva/Desktop/MedBlock/node_modules/express/lib/router/index.js:346:12)\n    at next (/home/josva/Desktop/MedBlock/node_modules/express/lib/router/index.js:280:10)","timestamp":"2025-06-28 01:41:38"}
{"environment":"development","ip":"::1","level":"info","message":"POST /api/v1/patients","service":"medblock-backend","timestamp":"2025-06-28 01:42:02","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"POST","resource":"/api/v1/patients","service":"medblock-backend","timestamp":"2025-06-28 01:42:02","userAgent":"curl/8.5.0","userId":"685ee7276d5c4c3dc71afc9c"}
{"environment":"development","ip":"::1","level":"info","message":"POST /api/v1/patients","service":"medblock-backend","timestamp":"2025-06-28 01:42:18","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"POST","resource":"/api/v1/patients","service":"medblock-backend","timestamp":"2025-06-28 01:42:18","userAgent":"curl/8.5.0","userId":"685ee7276d5c4c3dc71afc9c"}
{"environment":"development","ip":"::1","level":"info","message":"POST /api/v1/patients","service":"medblock-backend","timestamp":"2025-06-28 01:43:45","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"POST","resource":"/api/v1/patients","service":"medblock-backend","timestamp":"2025-06-28 01:43:45","userAgent":"curl/8.5.0","userId":"685ee7276d5c4c3dc71afc9c"}
{"environment":"development","ip":"::1","level":"info","message":"POST /api/v1/auth/login","service":"medblock-backend","timestamp":"2025-06-28 01:45:31","userAgent":"curl/8.5.0"}
{"environment":"development","ip":"::1","level":"info","message":"GET /api/v1/patients?search=\"\":\"2+2\"","service":"medblock-backend","timestamp":"2025-06-28 01:46:42","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"GET","resource":"/api/v1/patients?search=\"\":\"2+2\"","service":"medblock-backend","timestamp":"2025-06-28 01:46:42","userAgent":"curl/8.5.0","userId":"685ee7276d5c4c3dc71afc9c"}
{"action":"patients_listed","count":0,"environment":"development","level":"info","limit":20,"message":"AUDIT_LOG","page":1,"resource":"patients","service":"medblock-backend","timestamp":"2025-06-28 01:46:42","userId":"685ee7276d5c4c3dc71afc9c"}
{"environment":"development","ip":"::1","level":"info","message":"POST /api/v1/patients","service":"medblock-backend","timestamp":"2025-06-28 01:47:51","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"POST","resource":"/api/v1/patients","service":"medblock-backend","timestamp":"2025-06-28 01:47:51","userAgent":"curl/8.5.0","userId":"685ee7276d5c4c3dc71afc9c"}
{"environment":"development","ip":"::1","level":"info","message":"GET /api/v1/patients","service":"medblock-backend","timestamp":"2025-06-28 01:51:40","userAgent":"curl/8.5.0"}
{"environment":"development","event":"missing_token","ip":"::1","level":"warn","message":"SECURITY_EVENT","path":"/api/v1/patients","service":"medblock-backend","timestamp":"2025-06-28 01:51:40","userAgent":"curl/8.5.0","userId":"N/A"}
{"environment":"development","ip":"::1","level":"info","message":"GET /api/v1/patients","service":"medblock-backend","timestamp":"2025-06-28 01:52:00","userAgent":"curl/8.5.0"}
{"environment":"development","error":"jwt malformed","event":"invalid_token_format","ip":"::1","level":"warn","message":"SECURITY_EVENT","path":"/api/v1/patients","service":"medblock-backend","timestamp":"2025-06-28 01:52:00","userAgent":"curl/8.5.0","userId":"N/A"}
{"environment":"development","ip":"::1","level":"info","message":"GET /api/v1/patients","service":"medblock-backend","timestamp":"2025-06-28 01:53:05","userAgent":"curl/8.5.0"}
{"environment":"development","error":"invalid signature","event":"invalid_token_format","ip":"::1","level":"warn","message":"SECURITY_EVENT","path":"/api/v1/patients","service":"medblock-backend","timestamp":"2025-06-28 01:53:05","userAgent":"curl/8.5.0","userId":"N/A"}
{"environment":"development","ip":"::1","level":"info","message":"POST /api/v1/auth/register","service":"medblock-backend","timestamp":"2025-06-28 01:53:46","userAgent":"curl/8.5.0"}
{"action":"user_registered","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","resource":"auth","service":"medblock-backend","timestamp":"2025-06-28 01:53:46","userAgent":"curl/8.5.0","userId":"685f20fa4ad724ba4e92c04c"}
{"environment":"development","ip":"::1","level":"info","message":"GET /api/v1/patients","service":"medblock-backend","timestamp":"2025-06-28 01:55:30","userAgent":"curl/8.5.0"}
{"environment":"development","error":"invalid signature","event":"invalid_token_format","ip":"::1","level":"warn","message":"SECURITY_EVENT","path":"/api/v1/patients","service":"medblock-backend","timestamp":"2025-06-28 01:55:30","userAgent":"curl/8.5.0","userId":"N/A"}
{"environment":"development","ip":"::1","level":"info","message":"DELETE /api/v1/patients/685efc5c6d5c4c3dc71afca8","service":"medblock-backend","timestamp":"2025-06-28 01:56:19","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"DELETE","resource":"/api/v1/patients/685efc5c6d5c4c3dc71afca8","service":"medblock-backend","timestamp":"2025-06-28 01:56:19","userAgent":"curl/8.5.0","userId":"685f20fa4ad724ba4e92c04c"}
{"environment":"development","event":"insufficient_role","ip":"::1","level":"warn","message":"SECURITY_EVENT","method":"DELETE","path":"/api/v1/patients/685efc5c6d5c4c3dc71afca8","requiredRoles":["admin"],"service":"medblock-backend","timestamp":"2025-06-28 01:56:19","userId":"685f20fa4ad724ba4e92c04c","userRole":"doctor"}
{"environment":"development","ip":"::1","level":"info","message":"POST /api/v1/patients/685efc5c6d5c4c3dc71afca8/vital-signs","service":"medblock-backend","timestamp":"2025-06-28 01:57:00","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"POST","resource":"/api/v1/patients/685efc5c6d5c4c3dc71afca8/vital-signs","service":"medblock-backend","timestamp":"2025-06-28 01:57:00","userAgent":"curl/8.5.0","userId":"685f20fa4ad724ba4e92c04c"}
{"action":"vital_signs_added","environment":"development","level":"info","message":"AUDIT_LOG","patientId":"ZGT_tcbwN","resource":"patient:ZGT_tcbwN","service":"medblock-backend","timestamp":"2025-06-28 01:57:00","userId":"685f20fa4ad724ba4e92c04c","vitalSigns":{"bloodPressure":{"diastolic":80,"systolic":120},"height":175,"oxygenSaturation":98,"pulse":72,"respiratoryRate":16,"temperature":36.5,"weight":70.5}}
{"environment":"development","ip":"::1","level":"info","message":"POST /api/v1/auth/login","service":"medblock-backend","timestamp":"2025-06-28 02:05:55","userAgent":"curl/8.5.0"}
{"environment":"development","level":"error","message":"Authentication failed: Invalid email or password","service":"medblock-backend","stack":"Error: Invalid email or password\n    at userSchema.statics.authenticate (/home/josva/Desktop/MedBlock/src/models/User.js:416:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async /home/josva/Desktop/MedBlock/src/routes/auth.js:144:18","timestamp":"2025-06-28 02:05:55"}
{"environment":"development","level":"error","message":"Login failed: Invalid email or password","service":"medblock-backend","stack":"Error: Invalid email or password\n    at userSchema.statics.authenticate (/home/josva/Desktop/MedBlock/src/models/User.js:416:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async /home/josva/Desktop/MedBlock/src/routes/auth.js:144:18","timestamp":"2025-06-28 02:05:55"}
{"environment":"development","ip":"::1","level":"info","message":"POST /api/v1/auth/login","service":"medblock-backend","timestamp":"2025-06-28 02:05:55","userAgent":"curl/8.5.0"}
{"environment":"development","level":"error","message":"Authentication failed: Invalid email or password","service":"medblock-backend","stack":"Error: Invalid email or password\n    at userSchema.statics.authenticate (/home/josva/Desktop/MedBlock/src/models/User.js:416:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async /home/josva/Desktop/MedBlock/src/routes/auth.js:144:18","timestamp":"2025-06-28 02:05:55"}
{"environment":"development","level":"error","message":"Login failed: Invalid email or password","service":"medblock-backend","stack":"Error: Invalid email or password\n    at userSchema.statics.authenticate (/home/josva/Desktop/MedBlock/src/models/User.js:416:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async /home/josva/Desktop/MedBlock/src/routes/auth.js:144:18","timestamp":"2025-06-28 02:05:55"}
{"environment":"development","ip":"::1","level":"info","message":"POST /api/v1/auth/login","service":"medblock-backend","timestamp":"2025-06-28 02:05:55","userAgent":"curl/8.5.0"}
{"environment":"development","level":"error","message":"Authentication failed: Invalid email or password","service":"medblock-backend","stack":"Error: Invalid email or password\n    at userSchema.statics.authenticate (/home/josva/Desktop/MedBlock/src/models/User.js:416:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async /home/josva/Desktop/MedBlock/src/routes/auth.js:144:18","timestamp":"2025-06-28 02:05:55"}
{"environment":"development","level":"error","message":"Login failed: Invalid email or password","service":"medblock-backend","stack":"Error: Invalid email or password\n    at userSchema.statics.authenticate (/home/josva/Desktop/MedBlock/src/models/User.js:416:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async /home/josva/Desktop/MedBlock/src/routes/auth.js:144:18","timestamp":"2025-06-28 02:05:55"}
{"environment":"development","ip":"::1","level":"info","message":"POST /api/v1/auth/login","service":"medblock-backend","timestamp":"2025-06-28 02:05:55","userAgent":"curl/8.5.0"}
{"environment":"development","level":"error","message":"Authentication failed: Invalid email or password","service":"medblock-backend","stack":"Error: Invalid email or password\n    at userSchema.statics.authenticate (/home/josva/Desktop/MedBlock/src/models/User.js:416:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async /home/josva/Desktop/MedBlock/src/routes/auth.js:144:18","timestamp":"2025-06-28 02:05:55"}
{"environment":"development","level":"error","message":"Login failed: Invalid email or password","service":"medblock-backend","stack":"Error: Invalid email or password\n    at userSchema.statics.authenticate (/home/josva/Desktop/MedBlock/src/models/User.js:416:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async /home/josva/Desktop/MedBlock/src/routes/auth.js:144:18","timestamp":"2025-06-28 02:05:55"}
{"environment":"development","ip":"::1","level":"info","message":"POST /api/v1/auth/login","service":"medblock-backend","timestamp":"2025-06-28 02:05:55","userAgent":"curl/8.5.0"}
{"environment":"development","level":"error","message":"Authentication failed: Invalid email or password","service":"medblock-backend","stack":"Error: Invalid email or password\n    at userSchema.statics.authenticate (/home/josva/Desktop/MedBlock/src/models/User.js:416:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async /home/josva/Desktop/MedBlock/src/routes/auth.js:144:18","timestamp":"2025-06-28 02:05:55"}
{"environment":"development","level":"error","message":"Login failed: Invalid email or password","service":"medblock-backend","stack":"Error: Invalid email or password\n    at userSchema.statics.authenticate (/home/josva/Desktop/MedBlock/src/models/User.js:416:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async /home/josva/Desktop/MedBlock/src/routes/auth.js:144:18","timestamp":"2025-06-28 02:05:55"}
{"environment":"development","ip":"::1","level":"info","message":"POST /api/v1/auth/login","service":"medblock-backend","timestamp":"2025-06-28 02:05:55","userAgent":"curl/8.5.0"}
{"environment":"development","event":"auth_rate_limit_exceeded","ip":"::1","level":"warn","message":"SECURITY_EVENT","path":"/api/v1/auth/login","service":"medblock-backend","timestamp":"2025-06-28 02:05:55","userAgent":"curl/8.5.0","userId":"N/A"}
{"environment":"development","ip":"::1","level":"info","message":"POST /api/v1/auth/login","service":"medblock-backend","timestamp":"2025-06-28 02:05:55","userAgent":"curl/8.5.0"}
{"environment":"development","event":"auth_rate_limit_exceeded","ip":"::1","level":"warn","message":"SECURITY_EVENT","path":"/api/v1/auth/login","service":"medblock-backend","timestamp":"2025-06-28 02:05:55","userAgent":"curl/8.5.0","userId":"N/A"}
{"environment":"development","ip":"::1","level":"info","message":"POST /api/v1/auth/login","service":"medblock-backend","timestamp":"2025-06-28 02:05:55","userAgent":"curl/8.5.0"}
{"environment":"development","event":"auth_rate_limit_exceeded","ip":"::1","level":"warn","message":"SECURITY_EVENT","path":"/api/v1/auth/login","service":"medblock-backend","timestamp":"2025-06-28 02:05:55","userAgent":"curl/8.5.0","userId":"N/A"}
{"environment":"development","ip":"::1","level":"info","message":"POST /api/v1/auth/login","service":"medblock-backend","timestamp":"2025-06-28 02:05:55","userAgent":"curl/8.5.0"}
{"environment":"development","event":"auth_rate_limit_exceeded","ip":"::1","level":"warn","message":"SECURITY_EVENT","path":"/api/v1/auth/login","service":"medblock-backend","timestamp":"2025-06-28 02:05:55","userAgent":"curl/8.5.0","userId":"N/A"}
{"environment":"development","ip":"::1","level":"info","message":"POST /api/v1/auth/login","service":"medblock-backend","timestamp":"2025-06-28 02:05:55","userAgent":"curl/8.5.0"}
{"environment":"development","event":"auth_rate_limit_exceeded","ip":"::1","level":"warn","message":"SECURITY_EVENT","path":"/api/v1/auth/login","service":"medblock-backend","timestamp":"2025-06-28 02:05:55","userAgent":"curl/8.5.0","userId":"N/A"}
{"environment":"development","ip":"::1","level":"info","message":"POST /api/v1/auth/login","service":"medblock-backend","timestamp":"2025-06-28 02:05:55","userAgent":"curl/8.5.0"}
{"environment":"development","event":"auth_rate_limit_exceeded","ip":"::1","level":"warn","message":"SECURITY_EVENT","path":"/api/v1/auth/login","service":"medblock-backend","timestamp":"2025-06-28 02:05:55","userAgent":"curl/8.5.0","userId":"N/A"}
{"environment":"development","ip":"::1","level":"info","message":"POST /api/v1/auth/login","service":"medblock-backend","timestamp":"2025-06-28 02:05:55","userAgent":"curl/8.5.0"}
{"environment":"development","event":"auth_rate_limit_exceeded","ip":"::1","level":"warn","message":"SECURITY_EVENT","path":"/api/v1/auth/login","service":"medblock-backend","timestamp":"2025-06-28 02:05:55","userAgent":"curl/8.5.0","userId":"N/A"}
{"environment":"development","ip":"::1","level":"info","message":"POST /api/v1/auth/login","service":"medblock-backend","timestamp":"2025-06-28 02:05:55","userAgent":"curl/8.5.0"}
{"environment":"development","event":"auth_rate_limit_exceeded","ip":"::1","level":"warn","message":"SECURITY_EVENT","path":"/api/v1/auth/login","service":"medblock-backend","timestamp":"2025-06-28 02:05:55","userAgent":"curl/8.5.0","userId":"N/A"}
{"environment":"development","ip":"::1","level":"info","message":"POST /api/v1/auth/login","service":"medblock-backend","timestamp":"2025-06-28 02:05:55","userAgent":"curl/8.5.0"}
{"environment":"development","event":"auth_rate_limit_exceeded","ip":"::1","level":"warn","message":"SECURITY_EVENT","path":"/api/v1/auth/login","service":"medblock-backend","timestamp":"2025-06-28 02:05:55","userAgent":"curl/8.5.0","userId":"N/A"}
{"environment":"development","ip":"::1","level":"info","message":"POST /api/v1/auth/login","service":"medblock-backend","timestamp":"2025-06-28 02:05:56","userAgent":"curl/8.5.0"}
{"environment":"development","event":"auth_rate_limit_exceeded","ip":"::1","level":"warn","message":"SECURITY_EVENT","path":"/api/v1/auth/login","service":"medblock-backend","timestamp":"2025-06-28 02:05:56","userAgent":"curl/8.5.0","userId":"N/A"}
{"environment":"development","ip":"::1","level":"info","message":"POST /api/v1/auth/register","service":"medblock-backend","timestamp":"2025-06-28 02:09:02","userAgent":"curl/8.5.0"}
{"environment":"development","event":"auth_rate_limit_exceeded","ip":"::1","level":"warn","message":"SECURITY_EVENT","path":"/api/v1/auth/register","service":"medblock-backend","timestamp":"2025-06-28 02:09:02","userAgent":"curl/8.5.0","userId":"N/A"}
{"environment":"development","ip":"::1","level":"info","message":"POST /api/v1/auth/register","service":"medblock-backend","timestamp":"2025-06-28 02:09:02","userAgent":"curl/8.5.0"}
{"environment":"development","event":"auth_rate_limit_exceeded","ip":"::1","level":"warn","message":"SECURITY_EVENT","path":"/api/v1/auth/register","service":"medblock-backend","timestamp":"2025-06-28 02:09:02","userAgent":"curl/8.5.0","userId":"N/A"}
{"environment":"development","ip":"::1","level":"info","message":"POST /api/v1/auth/register","service":"medblock-backend","timestamp":"2025-06-28 02:09:02","userAgent":"curl/8.5.0"}
{"environment":"development","event":"auth_rate_limit_exceeded","ip":"::1","level":"warn","message":"SECURITY_EVENT","path":"/api/v1/auth/register","service":"medblock-backend","timestamp":"2025-06-28 02:09:02","userAgent":"curl/8.5.0","userId":"N/A"}
{"environment":"development","ip":"::1","level":"info","message":"POST /api/v1/auth/register","service":"medblock-backend","timestamp":"2025-06-28 02:09:02","userAgent":"curl/8.5.0"}
{"environment":"development","event":"auth_rate_limit_exceeded","ip":"::1","level":"warn","message":"SECURITY_EVENT","path":"/api/v1/auth/register","service":"medblock-backend","timestamp":"2025-06-28 02:09:02","userAgent":"curl/8.5.0","userId":"N/A"}
{"environment":"development","ip":"::1","level":"info","message":"POST /api/v1/auth/register","service":"medblock-backend","timestamp":"2025-06-28 02:09:02","userAgent":"curl/8.5.0"}
{"environment":"development","event":"auth_rate_limit_exceeded","ip":"::1","level":"warn","message":"SECURITY_EVENT","path":"/api/v1/auth/register","service":"medblock-backend","timestamp":"2025-06-28 02:09:02","userAgent":"curl/8.5.0","userId":"N/A"}
{"environment":"development","ip":"::1","level":"info","message":"POST /api/v1/auth/register","service":"medblock-backend","timestamp":"2025-06-28 02:09:02","userAgent":"curl/8.5.0"}
{"environment":"development","event":"auth_rate_limit_exceeded","ip":"::1","level":"warn","message":"SECURITY_EVENT","path":"/api/v1/auth/register","service":"medblock-backend","timestamp":"2025-06-28 02:09:02","userAgent":"curl/8.5.0","userId":"N/A"}
{"environment":"development","ip":"::1","level":"info","message":"POST /api/v1/auth/register","service":"medblock-backend","timestamp":"2025-06-28 02:09:02","userAgent":"curl/8.5.0"}
{"environment":"development","event":"auth_rate_limit_exceeded","ip":"::1","level":"warn","message":"SECURITY_EVENT","path":"/api/v1/auth/register","service":"medblock-backend","timestamp":"2025-06-28 02:09:02","userAgent":"curl/8.5.0","userId":"N/A"}
{"environment":"development","ip":"::1","level":"info","message":"POST /api/v1/auth/register","service":"medblock-backend","timestamp":"2025-06-28 02:09:02","userAgent":"curl/8.5.0"}
{"environment":"development","event":"auth_rate_limit_exceeded","ip":"::1","level":"warn","message":"SECURITY_EVENT","path":"/api/v1/auth/register","service":"medblock-backend","timestamp":"2025-06-28 02:09:02","userAgent":"curl/8.5.0","userId":"N/A"}
{"environment":"development","ip":"::1","level":"info","message":"POST /api/v1/auth/register","service":"medblock-backend","timestamp":"2025-06-28 02:09:02","userAgent":"curl/8.5.0"}
{"environment":"development","event":"auth_rate_limit_exceeded","ip":"::1","level":"warn","message":"SECURITY_EVENT","path":"/api/v1/auth/register","service":"medblock-backend","timestamp":"2025-06-28 02:09:02","userAgent":"curl/8.5.0","userId":"N/A"}
{"environment":"development","ip":"::1","level":"info","message":"POST /api/v1/auth/register","service":"medblock-backend","timestamp":"2025-06-28 02:09:02","userAgent":"curl/8.5.0"}
{"environment":"development","event":"auth_rate_limit_exceeded","ip":"::1","level":"warn","message":"SECURITY_EVENT","path":"/api/v1/auth/register","service":"medblock-backend","timestamp":"2025-06-28 02:09:02","userAgent":"curl/8.5.0","userId":"N/A"}
{"environment":"development","ip":"::1","level":"info","message":"POST /api/v1/auth/register","service":"medblock-backend","timestamp":"2025-06-28 02:09:02","userAgent":"curl/8.5.0"}
{"environment":"development","event":"auth_rate_limit_exceeded","ip":"::1","level":"warn","message":"SECURITY_EVENT","path":"/api/v1/auth/register","service":"medblock-backend","timestamp":"2025-06-28 02:09:02","userAgent":"curl/8.5.0","userId":"N/A"}
{"environment":"development","ip":"::1","level":"info","message":"POST /api/v1/auth/register","service":"medblock-backend","timestamp":"2025-06-28 02:09:02","userAgent":"curl/8.5.0"}
{"environment":"development","event":"auth_rate_limit_exceeded","ip":"::1","level":"warn","message":"SECURITY_EVENT","path":"/api/v1/auth/register","service":"medblock-backend","timestamp":"2025-06-28 02:09:02","userAgent":"curl/8.5.0","userId":"N/A"}
{"environment":"development","ip":"::1","level":"info","message":"POST /api/v1/auth/register","service":"medblock-backend","timestamp":"2025-06-28 02:09:02","userAgent":"curl/8.5.0"}
{"environment":"development","event":"auth_rate_limit_exceeded","ip":"::1","level":"warn","message":"SECURITY_EVENT","path":"/api/v1/auth/register","service":"medblock-backend","timestamp":"2025-06-28 02:09:02","userAgent":"curl/8.5.0","userId":"N/A"}
{"environment":"development","ip":"::1","level":"info","message":"POST /api/v1/auth/register","service":"medblock-backend","timestamp":"2025-06-28 02:09:02","userAgent":"curl/8.5.0"}
{"environment":"development","event":"auth_rate_limit_exceeded","ip":"::1","level":"warn","message":"SECURITY_EVENT","path":"/api/v1/auth/register","service":"medblock-backend","timestamp":"2025-06-28 02:09:02","userAgent":"curl/8.5.0","userId":"N/A"}
{"environment":"development","ip":"::1","level":"info","message":"POST /api/v1/auth/register","service":"medblock-backend","timestamp":"2025-06-28 02:09:02","userAgent":"curl/8.5.0"}
{"environment":"development","event":"auth_rate_limit_exceeded","ip":"::1","level":"warn","message":"SECURITY_EVENT","path":"/api/v1/auth/register","service":"medblock-backend","timestamp":"2025-06-28 02:09:02","userAgent":"curl/8.5.0","userId":"N/A"}
{"environment":"development","ip":"::1","level":"info","message":"PATCH /api/v1/patients/685efc4d6d5c4c3dc71afca1","service":"medblock-backend","timestamp":"2025-06-28 02:24:49","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"PATCH","resource":"/api/v1/patients/685efc4d6d5c4c3dc71afca1","service":"medblock-backend","timestamp":"2025-06-28 02:24:49","userAgent":"curl/8.5.0","userId":"685ee7276d5c4c3dc71afc9c"}
{"_message":"Patient validation failed","environment":"development","errors":{"firstName":{"kind":"string","message":"Cast to string failed for value \"{ '$set': 'NotAString' }\" (type Object) at path \"firstName\"","name":"CastError","path":"firstName","reason":null,"stringValue":"\"{ '$set': 'NotAString' }\"","value":{"$set":"NotAString"},"valueType":"Object"}},"level":"error","message":"Partial update patient failed: Patient validation failed: firstName: Cast to string failed for value \"{ '$set': 'NotAString' }\" (type Object) at path \"firstName\"","service":"medblock-backend","stack":"ValidationError: Patient validation failed: firstName: Cast to string failed for value \"{ '$set': 'NotAString' }\" (type Object) at path \"firstName\"\n    at Document.invalidate (/home/josva/Desktop/MedBlock/node_modules/mongoose/lib/document.js:3352:32)\n    at model.$set (/home/josva/Desktop/MedBlock/node_modules/mongoose/lib/document.js:1480:12)\n    at model.set [as firstName] (/home/josva/Desktop/MedBlock/node_modules/mongoose/lib/helpers/document/compile.js:205:19)\n    at /home/josva/Desktop/MedBlock/src/routes/patients.js:334:22\n    at Array.forEach (<anonymous>)\n    at /home/josva/Desktop/MedBlock/src/routes/patients.js:332:27\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-06-28 02:24:49"}
{"environment":"development","ip":"::1","level":"info","message":"POST /api/v1/patients","service":"medblock-backend","timestamp":"2025-06-28 04:21:01","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"POST","resource":"/api/v1/patients","service":"medblock-backend","timestamp":"2025-06-28 04:21:01","userAgent":"curl/8.5.0","userId":"685ee7276d5c4c3dc71afc9c"}
{"action":"patient_created","environment":"development","level":"info","message":"AUDIT_LOG","patientId":"IjwmPq6fX","patientName":"Audit User","resource":"patient:IjwmPq6fX","service":"medblock-backend","timestamp":"2025-06-28 04:21:01","userId":"685ee7276d5c4c3dc71afc9c"}
{"environment":"development","ip":"::1","level":"info","message":"GET /api/v1/patients/685f437d4ad724ba4e92c05f","service":"medblock-backend","timestamp":"2025-06-28 04:21:51","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"GET","resource":"/api/v1/patients/685f437d4ad724ba4e92c05f","service":"medblock-backend","timestamp":"2025-06-28 04:21:51","userAgent":"curl/8.5.0","userId":"685ee7276d5c4c3dc71afc9c"}
{"environment":"development","ip":"::1","level":"info","message":"PATCH /api/v1/patients/685f437d4ad724ba4e92c05f","service":"medblock-backend","timestamp":"2025-06-28 04:25:04","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"PATCH","resource":"/api/v1/patients/685f437d4ad724ba4e92c05f","service":"medblock-backend","timestamp":"2025-06-28 04:25:04","userAgent":"curl/8.5.0","userId":"685ee7276d5c4c3dc71afc9c"}
{"action":"patient_partially_updated","environment":"development","level":"info","message":"AUDIT_LOG","patientId":"IjwmPq6fX","resource":"patient:IjwmPq6fX","service":"medblock-backend","timestamp":"2025-06-28 04:25:04","updatedFields":["nationalId","firstName"],"userId":"685ee7276d5c4c3dc71afc9c"}
{"environment":"development","level":"info","message":"SIGINT received, shutting down gracefully","service":"medblock-backend","timestamp":"2025-06-28 04:32:15"}
{"environment":"development","level":"info","message":"--- Logger test from server.js ---","service":"medblock-backend","timestamp":"2025-06-28 04:32:18"}
{"environment":"development","level":"info","message":"✅ MongoDB connected successfully","service":"medblock-backend","timestamp":"2025-06-28 04:32:19"}
{"environment":"development","level":"info","message":"Database connected successfully","service":"medblock-backend","timestamp":"2025-06-28 04:32:19"}
{"environment":"development","level":"info","message":"Server running on port 3000 in development mode","service":"medblock-backend","timestamp":"2025-06-28 04:32:19"}
{"environment":"development","level":"info","message":"Health check available at http://localhost:3000/health","service":"medblock-backend","timestamp":"2025-06-28 04:32:19"}
{"environment":"development","level":"info","message":"API documentation available at http://localhost:3000/api/v1","service":"medblock-backend","timestamp":"2025-06-28 04:32:19"}
{"environment":"development","ip":"::1","level":"info","message":"PATCH /api/v1/patients/685f437d4ad724ba4e92c05f","service":"medblock-backend","timestamp":"2025-06-28 04:33:04","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"PATCH","resource":"/api/v1/patients/685f437d4ad724ba4e92c05f","service":"medblock-backend","timestamp":"2025-06-28 04:33:04","userAgent":"curl/8.5.0","userId":"685ee7276d5c4c3dc71afc9c"}
{"action":"patient_partially_updated","environment":"development","level":"info","message":"AUDIT_LOG","patientId":"IjwmPq6fX","resource":"patient:IjwmPq6fX","service":"medblock-backend","timestamp":"2025-06-28 04:33:04","updatedFields":["phoneNumber"],"userId":"685ee7276d5c4c3dc71afc9c"}
{"environment":"development","ip":"::1","level":"info","message":"POST /api/v1/patients","service":"medblock-backend","timestamp":"2025-06-28 04:44:17","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"POST","resource":"/api/v1/patients","service":"medblock-backend","timestamp":"2025-06-28 04:44:17","userAgent":"curl/8.5.0","userId":"685ee7276d5c4c3dc71afc9c"}
{"action":"patient_created","environment":"development","level":"info","message":"AUDIT_LOG","patientId":"w4KTA55qc","patientName":"ReAudit User","resource":"patient:w4KTA55qc","service":"medblock-backend","timestamp":"2025-06-28 04:44:17","userId":"685ee7276d5c4c3dc71afc9c"}
{"environment":"development","ip":"::1","level":"info","message":"GET /api/v1/patients/685f48f118100c8d6ed60498","service":"medblock-backend","timestamp":"2025-06-28 04:45:30","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"GET","resource":"/api/v1/patients/685f48f118100c8d6ed60498","service":"medblock-backend","timestamp":"2025-06-28 04:45:30","userAgent":"curl/8.5.0","userId":"685ee7276d5c4c3dc71afc9c"}
{"environment":"development","ip":"::1","level":"info","message":"PATCH /api/v1/patients/685f48f118100c8d6ed60498","service":"medblock-backend","timestamp":"2025-06-28 04:48:00","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"PATCH","resource":"/api/v1/patients/685f48f118100c8d6ed60498","service":"medblock-backend","timestamp":"2025-06-28 04:48:00","userAgent":"curl/8.5.0","userId":"685ee7276d5c4c3dc71afc9c"}
{"attemptedNationalId":"99999999","currentNationalId":"10000012","environment":"development","level":"warn","message":"SECURITY_EVENT: Attempted to modify immutable nationalId field","patientId":"w4KTA55qc","service":"medblock-backend","timestamp":"2025-06-28 04:48:00","userId":"685ee7276d5c4c3dc71afc9c"}
{"environment":"development","ip":"::1","level":"info","message":"PATCH /api/v1/patients/685f48f118100c8d6ed60498","service":"medblock-backend","timestamp":"2025-06-28 04:51:07","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"PATCH","resource":"/api/v1/patients/685f48f118100c8d6ed60498","service":"medblock-backend","timestamp":"2025-06-28 04:51:07","userAgent":"curl/8.5.0","userId":"685ee7276d5c4c3dc71afc9c"}
{"action":"patient_partially_updated","environment":"development","level":"info","message":"AUDIT_LOG","patientId":"w4KTA55qc","resource":"patient:w4KTA55qc","service":"medblock-backend","timestamp":"2025-06-28 04:51:07","updatedFields":["phoneNumber"],"userId":"685ee7276d5c4c3dc71afc9c"}
{"environment":"development","ip":"::1","level":"info","message":"GET /api/v1/patients/685f48f118100c8d6ed60498","service":"medblock-backend","timestamp":"2025-06-28 04:52:12","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"GET","resource":"/api/v1/patients/685f48f118100c8d6ed60498","service":"medblock-backend","timestamp":"2025-06-28 04:52:12","userAgent":"curl/8.5.0","userId":"685ee7276d5c4c3dc71afc9c"}
{"environment":"development","ip":"::1","level":"info","message":"POST /api/v1/patients","service":"medblock-backend","timestamp":"2025-06-28 04:56:01","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"POST","resource":"/api/v1/patients","service":"medblock-backend","timestamp":"2025-06-28 04:56:01","userAgent":"curl/8.5.0","userId":"685ee7276d5c4c3dc71afc9c"}
{"action":"patient_created","environment":"development","level":"info","message":"AUDIT_LOG","patientId":"SAYrI0GyV","patientName":"Delete Test","resource":"patient:SAYrI0GyV","service":"medblock-backend","timestamp":"2025-06-28 04:56:01","userId":"685ee7276d5c4c3dc71afc9c"}
{"environment":"development","ip":"::1","level":"info","message":"DELETE /api/v1/patients/685f4bb118100c8d6ed604a8","service":"medblock-backend","timestamp":"2025-06-28 04:57:54","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"DELETE","resource":"/api/v1/patients/685f4bb118100c8d6ed604a8","service":"medblock-backend","timestamp":"2025-06-28 04:57:54","userAgent":"curl/8.5.0","userId":"685ee7276d5c4c3dc71afc9c"}
{"action":"patient_deleted","environment":"development","level":"info","message":"AUDIT_LOG","patientId":"SAYrI0GyV","patientName":"Delete Test","resource":"patient:SAYrI0GyV","service":"medblock-backend","timestamp":"2025-06-28 04:57:54","userId":"685ee7276d5c4c3dc71afc9c"}
{"environment":"development","ip":"::1","level":"info","message":"DELETE /api/v1/patients/685f4bb118100c8d6ed604a8","service":"medblock-backend","timestamp":"2025-06-28 04:58:09","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"DELETE","resource":"/api/v1/patients/685f4bb118100c8d6ed604a8","service":"medblock-backend","timestamp":"2025-06-28 04:58:09","userAgent":"curl/8.5.0","userId":"685ee7276d5c4c3dc71afc9c"}
{"environment":"development","level":"warn","message":"Attempt to delete already soft-deleted patient with ID: 685f4bb118100c8d6ed604a8","service":"medblock-backend","timestamp":"2025-06-28 04:58:09","userId":"685ee7276d5c4c3dc71afc9c"}
{"environment":"development","ip":"::1","level":"info","message":"POST /api/v1/patients","service":"medblock-backend","timestamp":"2025-06-28 05:03:35","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"POST","resource":"/api/v1/patients","service":"medblock-backend","timestamp":"2025-06-28 05:03:35","userAgent":"curl/8.5.0","userId":"685ee7276d5c4c3dc71afc9c"}
{"action":"patient_created","environment":"development","level":"info","message":"AUDIT_LOG","patientId":"VrXkim1Cg","patientName":"Linked Record","resource":"patient:VrXkim1Cg","service":"medblock-backend","timestamp":"2025-06-28 05:03:35","userId":"685ee7276d5c4c3dc71afc9c"}
{"environment":"development","ip":"::1","level":"info","message":"POST /api/v1/patients/685f4d7718100c8d6ed604b2/vital-signs","service":"medblock-backend","timestamp":"2025-06-28 05:04:57","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"POST","resource":"/api/v1/patients/685f4d7718100c8d6ed604b2/vital-signs","service":"medblock-backend","timestamp":"2025-06-28 05:04:57","userAgent":"curl/8.5.0","userId":"685f20fa4ad724ba4e92c04c"}
{"action":"vital_signs_added","environment":"development","level":"info","message":"AUDIT_LOG","patientId":"VrXkim1Cg","resource":"patient:VrXkim1Cg","service":"medblock-backend","timestamp":"2025-06-28 05:04:57","userId":"685f20fa4ad724ba4e92c04c","vitalSigns":{"bloodPressure":{"diastolic":80,"systolic":120},"height":175,"oxygenSaturation":98,"pulse":72,"respiratoryRate":16,"temperature":36.5,"weight":70.5}}
{"environment":"development","ip":"::1","level":"info","message":"DELETE /api/v1/patients/685f4d7718100c8d6ed604b2","service":"medblock-backend","timestamp":"2025-06-28 05:06:36","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"DELETE","resource":"/api/v1/patients/685f4d7718100c8d6ed604b2","service":"medblock-backend","timestamp":"2025-06-28 05:06:36","userAgent":"curl/8.5.0","userId":"685ee7276d5c4c3dc71afc9c"}
{"action":"patient_deleted","environment":"development","level":"info","message":"AUDIT_LOG","patientId":"VrXkim1Cg","patientName":"Linked Record","resource":"patient:VrXkim1Cg","service":"medblock-backend","timestamp":"2025-06-28 05:06:36","userId":"685ee7276d5c4c3dc71afc9c"}
{"environment":"development","ip":"::1","level":"info","message":"POST /api/v1/patients","service":"medblock-backend","timestamp":"2025-06-28 05:10:03","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"POST","resource":"/api/v1/patients","service":"medblock-backend","timestamp":"2025-06-28 05:10:03","userAgent":"curl/8.5.0","userId":"685ee7276d5c4c3dc71afc9c"}
{"action":"patient_created","environment":"development","level":"info","message":"AUDIT_LOG","patientId":"Wltq2bZGO","patientName":"Checkin Test","resource":"patient:Wltq2bZGO","service":"medblock-backend","timestamp":"2025-06-28 05:10:03","userId":"685ee7276d5c4c3dc71afc9c"}
{"environment":"development","ip":"::1","level":"info","message":"PATCH /api/v1/patients/685f4efb18100c8d6ed604bf/checkin","service":"medblock-backend","timestamp":"2025-06-28 05:10:43","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"PATCH","resource":"/api/v1/patients/685f4efb18100c8d6ed604bf/checkin","service":"medblock-backend","timestamp":"2025-06-28 05:10:43","userAgent":"curl/8.5.0","userId":"685ee7276d5c4c3dc71afc9c"}
{"environment":"development","level":"info","message":"SIGINT received, shutting down gracefully","service":"medblock-backend","timestamp":"2025-06-28 05:16:36"}
{"environment":"development","level":"info","message":"--- Logger test from server.js ---","service":"medblock-backend","timestamp":"2025-06-28 05:16:39"}
{"environment":"development","level":"info","message":"✅ MongoDB connected successfully","service":"medblock-backend","timestamp":"2025-06-28 05:16:39"}
{"environment":"development","level":"info","message":"Database connected successfully","service":"medblock-backend","timestamp":"2025-06-28 05:16:39"}
{"environment":"development","level":"info","message":"Server running on port 3000 in development mode","service":"medblock-backend","timestamp":"2025-06-28 05:16:39"}
{"environment":"development","level":"info","message":"Health check available at http://localhost:3000/health","service":"medblock-backend","timestamp":"2025-06-28 05:16:39"}
{"environment":"development","level":"info","message":"API documentation available at http://localhost:3000/api/v1","service":"medblock-backend","timestamp":"2025-06-28 05:16:39"}
{"environment":"development","ip":"::1","level":"info","message":"PATCH /api/v1/patients/685f4efb18100c8d6ed604bf/checkin","service":"medblock-backend","timestamp":"2025-06-28 05:17:09","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"PATCH","resource":"/api/v1/patients/685f4efb18100c8d6ed604bf/checkin","service":"medblock-backend","timestamp":"2025-06-28 05:17:09","userAgent":"curl/8.5.0","userId":"685ee7276d5c4c3dc71afc9c"}
{"action":"admitted","checkInStatus":"admitted","environment":"development","level":"info","message":"AUDIT_LOG","patientId":"Wltq2bZGO","resource":"patient:Wltq2bZGO","service":"medblock-backend","timestamp":"2025-06-28 05:17:09","userId":"685ee7276d5c4c3dc71afc9c"}
{"environment":"development","ip":"::1","level":"info","message":"GET /api/v1/patients/685f4efb18100c8d6ed604bf","service":"medblock-backend","timestamp":"2025-06-28 05:18:16","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"GET","resource":"/api/v1/patients/685f4efb18100c8d6ed604bf","service":"medblock-backend","timestamp":"2025-06-28 05:18:16","userAgent":"curl/8.5.0","userId":"685ee7276d5c4c3dc71afc9c"}
{"environment":"development","ip":"::1","level":"info","message":"PATCH /api/v1/patients/685f4efb18100c8d6ed604bf/checkin","service":"medblock-backend","timestamp":"2025-06-28 05:20:31","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"PATCH","resource":"/api/v1/patients/685f4efb18100c8d6ed604bf/checkin","service":"medblock-backend","timestamp":"2025-06-28 05:20:31","userAgent":"curl/8.5.0","userId":"685ee7276d5c4c3dc71afc9c"}
{"environment":"development","ip":"::1","level":"info","message":"PATCH /api/v1/patients/685f4efb18100c8d6ed604bf/checkin","service":"medblock-backend","timestamp":"2025-06-28 05:21:04","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"PATCH","resource":"/api/v1/patients/685f4efb18100c8d6ed604bf/checkin","service":"medblock-backend","timestamp":"2025-06-28 05:21:04","userAgent":"curl/8.5.0","userId":"685ee7276d5c4c3dc71afc9c"}
{"environment":"development","level":"info","message":"SIGINT received, shutting down gracefully","service":"medblock-backend","timestamp":"2025-06-28 05:27:25"}
{"environment":"development","level":"info","message":"--- Logger test from server.js ---","service":"medblock-backend","timestamp":"2025-06-28 05:27:31"}
{"environment":"development","level":"info","message":"✅ MongoDB connected successfully","service":"medblock-backend","timestamp":"2025-06-28 05:27:31"}
{"environment":"development","level":"info","message":"Database connected successfully","service":"medblock-backend","timestamp":"2025-06-28 05:27:31"}
{"environment":"development","level":"info","message":"Server running on port 3000 in development mode","service":"medblock-backend","timestamp":"2025-06-28 05:27:31"}
{"environment":"development","level":"info","message":"Health check available at http://localhost:3000/health","service":"medblock-backend","timestamp":"2025-06-28 05:27:31"}
{"environment":"development","level":"info","message":"API documentation available at http://localhost:3000/api/v1","service":"medblock-backend","timestamp":"2025-06-28 05:27:31"}
{"environment":"development","ip":"::1","level":"info","message":"PATCH /api/v1/patients/685f4efb18100c8d6ed604bf/checkin","service":"medblock-backend","timestamp":"2025-06-28 05:28:02","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"PATCH","resource":"/api/v1/patients/685f4efb18100c8d6ed604bf/checkin","service":"medblock-backend","timestamp":"2025-06-28 05:28:02","userAgent":"curl/8.5.0","userId":"685ee7276d5c4c3dc71afc9c"}
{"action":"discharged","checkInStatus":"discharged","environment":"development","level":"info","message":"AUDIT_LOG","patientId":"Wltq2bZGO","resource":"patient:Wltq2bZGO","service":"medblock-backend","timestamp":"2025-06-28 05:28:02","userId":"685ee7276d5c4c3dc71afc9c"}
{"environment":"development","ip":"::1","level":"info","message":"POST /api/v1/patients/685f4efb18100c8d6ed604bf/vital-signs","service":"medblock-backend","timestamp":"2025-06-28 05:31:40","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"POST","resource":"/api/v1/patients/685f4efb18100c8d6ed604bf/vital-signs","service":"medblock-backend","timestamp":"2025-06-28 05:31:40","userAgent":"curl/8.5.0","userId":"685f20fa4ad724ba4e92c04c"}
{"environment":"development","level":"info","message":"SIGINT received, shutting down gracefully","service":"medblock-backend","timestamp":"2025-06-28 05:39:12"}
{"environment":"development","level":"info","message":"--- Logger test from server.js ---","service":"medblock-backend","timestamp":"2025-06-28 05:39:15"}
{"environment":"development","level":"info","message":"✅ MongoDB connected successfully","service":"medblock-backend","timestamp":"2025-06-28 05:39:16"}
{"environment":"development","level":"info","message":"Database connected successfully","service":"medblock-backend","timestamp":"2025-06-28 05:39:16"}
{"environment":"development","level":"info","message":"Server running on port 3000 in development mode","service":"medblock-backend","timestamp":"2025-06-28 05:39:16"}
{"environment":"development","level":"info","message":"Health check available at http://localhost:3000/health","service":"medblock-backend","timestamp":"2025-06-28 05:39:16"}
{"environment":"development","level":"info","message":"API documentation available at http://localhost:3000/api/v1","service":"medblock-backend","timestamp":"2025-06-28 05:39:16"}
{"environment":"development","ip":"::1","level":"info","message":"POST /api/v1/patients","service":"medblock-backend","timestamp":"2025-06-28 05:39:48","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"POST","resource":"/api/v1/patients","service":"medblock-backend","timestamp":"2025-06-28 05:39:48","userAgent":"curl/8.5.0","userId":"685ee7276d5c4c3dc71afc9c"}
{"environment":"development","ip":"::1","level":"info","message":"POST /api/v1/patients","service":"medblock-backend","timestamp":"2025-06-28 05:41:16","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"POST","resource":"/api/v1/patients","service":"medblock-backend","timestamp":"2025-06-28 05:41:16","userAgent":"curl/8.5.0","userId":"685ee7276d5c4c3dc71afc9c"}
{"environment":"development","ip":"::1","level":"info","message":"POST /api/v1/patients","service":"medblock-backend","timestamp":"2025-06-28 05:42:54","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"POST","resource":"/api/v1/patients","service":"medblock-backend","timestamp":"2025-06-28 05:42:54","userAgent":"curl/8.5.0","userId":"685ee7276d5c4c3dc71afc9c"}
{"environment":"development","level":"info","message":"SIGINT received, shutting down gracefully","service":"medblock-backend","timestamp":"2025-06-28 05:50:40"}
{"environment":"development","level":"info","message":"--- Logger test from server.js ---","service":"medblock-backend","timestamp":"2025-06-28 05:50:44"}
{"environment":"development","level":"info","message":"✅ MongoDB connected successfully","service":"medblock-backend","timestamp":"2025-06-28 05:50:44"}
{"environment":"development","level":"info","message":"Database connected successfully","service":"medblock-backend","timestamp":"2025-06-28 05:50:44"}
{"environment":"development","level":"info","message":"Server running on port 3000 in development mode","service":"medblock-backend","timestamp":"2025-06-28 05:50:44"}
{"environment":"development","level":"info","message":"Health check available at http://localhost:3000/health","service":"medblock-backend","timestamp":"2025-06-28 05:50:44"}
{"environment":"development","level":"info","message":"API documentation available at http://localhost:3000/api/v1","service":"medblock-backend","timestamp":"2025-06-28 05:50:44"}
{"environment":"development","ip":"::1","level":"info","message":"POST /api/v1/patients","service":"medblock-backend","timestamp":"2025-06-28 05:50:50","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"POST","resource":"/api/v1/patients","service":"medblock-backend","timestamp":"2025-06-28 05:50:50","userAgent":"curl/8.5.0","userId":"685ee7276d5c4c3dc71afc9c"}
{"action":"patient_created","environment":"development","level":"info","message":"AUDIT_LOG","patientId":"zqNZ7FQa2","patientName":"LinkedV4 RecordV4","resource":"patient:zqNZ7FQa2","service":"medblock-backend","timestamp":"2025-06-28 05:50:50","userId":"685ee7276d5c4c3dc71afc9c"}
{"environment":"development","ip":"::1","level":"info","message":"POST /api/v1/patients/685f588a504c072b107ea1e8/vital-signs","service":"medblock-backend","timestamp":"2025-06-28 05:51:59","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"POST","resource":"/api/v1/patients/685f588a504c072b107ea1e8/vital-signs","service":"medblock-backend","timestamp":"2025-06-28 05:51:59","userAgent":"curl/8.5.0","userId":"685f20fa4ad724ba4e92c04c"}
{"action":"vital_signs_added","environment":"development","level":"info","message":"AUDIT_LOG","patientId":"zqNZ7FQa2","resource":"patient:zqNZ7FQa2","service":"medblock-backend","timestamp":"2025-06-28 05:51:59","userId":"685f20fa4ad724ba4e92c04c","vitalSigns":{"bloodPressure":{"diastolic":80,"systolic":120},"height":175,"oxygenSaturation":98,"pulse":72,"respiratoryRate":16,"temperature":36.5,"weight":70.5}}
{"environment":"development","ip":"::1","level":"info","message":"DELETE /api/v1/patients/685f588a504c072b107ea1e8","service":"medblock-backend","timestamp":"2025-06-28 05:52:59","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"DELETE","resource":"/api/v1/patients/685f588a504c072b107ea1e8","service":"medblock-backend","timestamp":"2025-06-28 05:52:59","userAgent":"curl/8.5.0","userId":"685ee7276d5c4c3dc71afc9c"}
{"environment":"development","level":"warn","linkedRecords":[{"count":1,"message":"Patient has vital signs records","type":"vital_signs"}],"message":"Attempt to delete patient with linked active records: 685f588a504c072b107ea1e8","service":"medblock-backend","timestamp":"2025-06-28 05:52:59","userId":"685ee7276d5c4c3dc71afc9c"}
{"environment":"development","level":"warn","message":"⚠️ MongoDB disconnected","service":"medblock-backend","timestamp":"2025-06-28 06:09:00"}
{"environment":"development","level":"info","message":"--- Logger test from server.js ---","service":"medblock-backend","timestamp":"2025-06-29 15:46:11"}
{"environment":"development","level":"info","message":"✅ MongoDB connected successfully","service":"medblock-backend","timestamp":"2025-06-29 15:46:12"}
{"environment":"development","level":"info","message":"Database connected successfully","service":"medblock-backend","timestamp":"2025-06-29 15:46:12"}
{"environment":"development","level":"info","message":"Server running on port 3000 in development mode","service":"medblock-backend","timestamp":"2025-06-29 15:46:12"}
{"environment":"development","level":"info","message":"Health check available at http://localhost:3000/health","service":"medblock-backend","timestamp":"2025-06-29 15:46:12"}
{"environment":"development","level":"info","message":"API documentation available at http://localhost:3000/api/v1","service":"medblock-backend","timestamp":"2025-06-29 15:46:12"}
{"environment":"development","ip":"::1","level":"info","message":"GET /api/v1/users","service":"medblock-backend","timestamp":"2025-06-29 15:49:44","userAgent":"curl/8.5.0"}
{"environment":"development","event":"expired_token","ip":"::1","level":"warn","message":"SECURITY_EVENT","path":"/api/v1/users","service":"medblock-backend","timestamp":"2025-06-29 15:49:44","userAgent":"curl/8.5.0","userId":"N/A"}
{"environment":"development","ip":"::1","level":"info","message":"POST /api/v1/auth/forgot-password","service":"medblock-backend","timestamp":"2025-06-29 15:56:16","userAgent":"curl/8.5.0"}
{"email":"josvaranking369@gmail.com","environment":"development","level":"info","message":"Password reset requested","resetToken":"647c07d9011c49579f5af2e57764219930eeb64c58367c5084984dafecbce2bc","service":"medblock-backend","timestamp":"2025-06-29 15:56:16","userId":"685ee7276d5c4c3dc71afc9c"}
{"action":"password_reset_requested","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","resource":"auth","service":"medblock-backend","timestamp":"2025-06-29 15:56:16","userAgent":"curl/8.5.0","userId":"685ee7276d5c4c3dc71afc9c"}
{"environment":"development","ip":"::1","level":"info","message":"POST /api/v1/auth/reset-password","service":"medblock-backend","timestamp":"2025-06-29 16:11:01","userAgent":"curl/8.5.0"}
{"action":"password_reset_completed","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","resource":"auth","service":"medblock-backend","timestamp":"2025-06-29 16:11:01","userAgent":"curl/8.5.0","userId":"685ee7276d5c4c3dc71afc9c"}
{"environment":"development","ip":"::1","level":"info","message":"POST /api/v1/auth/login","service":"medblock-backend","timestamp":"2025-06-29 16:11:58","userAgent":"curl/8.5.0"}
{"action":"user_login","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","resource":"auth","service":"medblock-backend","timestamp":"2025-06-29 16:11:58","userAgent":"curl/8.5.0","userId":"685ee7276d5c4c3dc71afc9c"}
{"environment":"development","ip":"::1","level":"info","message":"GET /api/v1/users","service":"medblock-backend","timestamp":"2025-06-29 16:12:43","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"GET","resource":"/api/v1/users","service":"medblock-backend","timestamp":"2025-06-29 16:12:43","userAgent":"curl/8.5.0","userId":"685ee7276d5c4c3dc71afc9c"}
{"action":"FETCH_ALL_USERS_SUCCESS","environment":"development","level":"info","message":"AUDIT_LOG","resource":"All Users List","service":"medblock-backend","timestamp":"2025-06-29 16:12:43","userId":"685ee7276d5c4c3dc71afc9c"}
{"environment":"development","ip":"::1","level":"info","message":"GET /api/v1/users/role/admin","service":"medblock-backend","timestamp":"2025-06-29 16:14:41","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"GET","resource":"/api/v1/users/role/admin","service":"medblock-backend","timestamp":"2025-06-29 16:14:41","userAgent":"curl/8.5.0","userId":"685ee7276d5c4c3dc71afc9c"}
{"action":"users_by_role_listed","count":4,"environment":"development","level":"info","message":"AUDIT_LOG","resource":"users","role":"admin","service":"medblock-backend","timestamp":"2025-06-29 16:14:41"}
{"environment":"development","ip":"::1","level":"info","message":"DELETE /api/v1/users/685db0bdb5642849727fe6fb","service":"medblock-backend","timestamp":"2025-06-29 16:18:08","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"DELETE","resource":"/api/v1/users/685db0bdb5642849727fe6fb","service":"medblock-backend","timestamp":"2025-06-29 16:18:08","userAgent":"curl/8.5.0","userId":"685ee7276d5c4c3dc71afc9c"}
{"action":"user_deleted","deletedUserRole":"admin","environment":"development","level":"info","message":"AUDIT_LOG","resource":"user:undefined","service":"medblock-backend","timestamp":"2025-06-29 16:18:08"}
{"environment":"development","ip":"::1","level":"info","message":"DELETE /api/v1/users/685da1f425549ec1ae4d9eab","service":"medblock-backend","timestamp":"2025-06-29 16:18:20","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"DELETE","resource":"/api/v1/users/685da1f425549ec1ae4d9eab","service":"medblock-backend","timestamp":"2025-06-29 16:18:20","userAgent":"curl/8.5.0","userId":"685ee7276d5c4c3dc71afc9c"}
{"action":"user_deleted","deletedUserRole":"admin","environment":"development","level":"info","message":"AUDIT_LOG","resource":"user:undefined","service":"medblock-backend","timestamp":"2025-06-29 16:18:20"}
{"environment":"development","ip":"::1","level":"info","message":"DELETE /api/v1/users/685d90ae13d0e6baedf2d103","service":"medblock-backend","timestamp":"2025-06-29 16:18:32","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"DELETE","resource":"/api/v1/users/685d90ae13d0e6baedf2d103","service":"medblock-backend","timestamp":"2025-06-29 16:18:32","userAgent":"curl/8.5.0","userId":"685ee7276d5c4c3dc71afc9c"}
{"action":"user_deleted","deletedUserRole":"admin","environment":"development","level":"info","message":"AUDIT_LOG","resource":"user:undefined","service":"medblock-backend","timestamp":"2025-06-29 16:18:32"}
{"environment":"development","ip":"::1","level":"info","message":"GET /api/v1/users/role/admin","service":"medblock-backend","timestamp":"2025-06-29 16:19:18","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"GET","resource":"/api/v1/users/role/admin","service":"medblock-backend","timestamp":"2025-06-29 16:19:18","userAgent":"curl/8.5.0","userId":"685ee7276d5c4c3dc71afc9c"}
{"action":"users_by_role_listed","count":4,"environment":"development","level":"info","message":"AUDIT_LOG","resource":"users","role":"admin","service":"medblock-backend","timestamp":"2025-06-29 16:19:18"}
{"environment":"development","ip":"::1","level":"info","message":"GET /api/v1/patients","service":"medblock-backend","timestamp":"2025-06-29 16:23:17","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"GET","resource":"/api/v1/patients","service":"medblock-backend","timestamp":"2025-06-29 16:23:17","userAgent":"curl/8.5.0","userId":"685ee7276d5c4c3dc71afc9c"}
{"action":"patients_listed","count":17,"environment":"development","level":"info","limit":20,"message":"AUDIT_LOG","page":1,"resource":"patients","service":"medblock-backend","timestamp":"2025-06-29 16:23:18","userId":"685ee7276d5c4c3dc71afc9c","userRole":"admin"}
{"environment":"development","ip":"::1","level":"info","message":"GET /api/v1/users","service":"medblock-backend","timestamp":"2025-06-29 16:26:34","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"GET","resource":"/api/v1/users","service":"medblock-backend","timestamp":"2025-06-29 16:26:34","userAgent":"curl/8.5.0","userId":"685ee7276d5c4c3dc71afc9c"}
{"action":"FETCH_ALL_USERS_SUCCESS","environment":"development","level":"info","message":"AUDIT_LOG","resource":"All Users List","service":"medblock-backend","timestamp":"2025-06-29 16:26:34","userId":"685ee7276d5c4c3dc71afc9c"}
{"environment":"development","ip":"::1","level":"info","message":"POST /api/v1/auth/forgot-password","service":"medblock-backend","timestamp":"2025-06-29 16:28:29","userAgent":"curl/8.5.0"}
{"email":"doctor.test@example.com","environment":"development","level":"info","message":"Password reset requested","resetToken":"bf046b1e073579e0f27c3bff99fec3b9f12c0866bdd02af80f0718d74d5aac96","service":"medblock-backend","timestamp":"2025-06-29 16:28:29","userId":"685f20fa4ad724ba4e92c04c"}
{"action":"password_reset_requested","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","resource":"auth","service":"medblock-backend","timestamp":"2025-06-29 16:28:29","userAgent":"curl/8.5.0","userId":"685f20fa4ad724ba4e92c04c"}
{"environment":"development","ip":"::1","level":"info","message":"POST /api/v1/auth/reset-password","service":"medblock-backend","timestamp":"2025-06-29 16:29:26","userAgent":"curl/8.5.0"}
{"action":"password_reset_completed","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","resource":"auth","service":"medblock-backend","timestamp":"2025-06-29 16:29:26","userAgent":"curl/8.5.0","userId":"685f20fa4ad724ba4e92c04c"}
{"environment":"development","ip":"::1","level":"info","message":"POST /api/v1/auth/login","service":"medblock-backend","timestamp":"2025-06-29 16:29:57","userAgent":"curl/8.5.0"}
{"action":"user_login","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","resource":"auth","service":"medblock-backend","timestamp":"2025-06-29 16:29:57","userAgent":"curl/8.5.0","userId":"685f20fa4ad724ba4e92c04c"}
{"environment":"development","ip":"::1","level":"info","message":"GET /api/v1/patients","service":"medblock-backend","timestamp":"2025-06-29 16:34:13","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"GET","resource":"/api/v1/patients","service":"medblock-backend","timestamp":"2025-06-29 16:34:13","userAgent":"curl/8.5.0","userId":"685f20fa4ad724ba4e92c04c"}
{"action":"patients_listed","count":17,"environment":"development","level":"info","limit":20,"message":"AUDIT_LOG","page":1,"resource":"patients","service":"medblock-backend","timestamp":"2025-06-29 16:34:14","userId":"685f20fa4ad724ba4e92c04c","userRole":"doctor"}
{"environment":"development","ip":"::1","level":"info","message":"GET /api/v1/patients","service":"medblock-backend","timestamp":"2025-06-29 16:44:59","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"GET","resource":"/api/v1/patients","service":"medblock-backend","timestamp":"2025-06-29 16:44:59","userAgent":"curl/8.5.0","userId":"685f20fa4ad724ba4e92c04c"}
{"action":"patients_listed","count":17,"environment":"development","level":"info","limit":20,"message":"AUDIT_LOG","page":1,"resource":"patients","service":"medblock-backend","timestamp":"2025-06-29 16:44:59","userId":"685f20fa4ad724ba4e92c04c","userRole":"doctor"}
{"environment":"development","level":"info","message":"SIGINT received, shutting down gracefully","service":"medblock-backend","timestamp":"2025-06-29 16:46:28"}
{"environment":"development","level":"info","message":"--- Logger test from server.js ---","service":"medblock-backend","timestamp":"2025-06-29 16:46:33"}
{"environment":"development","level":"info","message":"✅ MongoDB connected successfully","service":"medblock-backend","timestamp":"2025-06-29 16:46:33"}
{"environment":"development","level":"info","message":"Database connected successfully","service":"medblock-backend","timestamp":"2025-06-29 16:46:33"}
{"environment":"development","level":"info","message":"Server running on port 3000 in development mode","service":"medblock-backend","timestamp":"2025-06-29 16:46:33"}
{"environment":"development","level":"info","message":"Health check available at http://localhost:3000/health","service":"medblock-backend","timestamp":"2025-06-29 16:46:33"}
{"environment":"development","level":"info","message":"API documentation available at http://localhost:3000/api/v1","service":"medblock-backend","timestamp":"2025-06-29 16:46:33"}
{"environment":"development","ip":"::1","level":"info","message":"GET /api/v1/patients","service":"medblock-backend","timestamp":"2025-06-29 16:46:46","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"GET","resource":"/api/v1/patients","service":"medblock-backend","timestamp":"2025-06-29 16:46:47","userAgent":"curl/8.5.0","userId":"685f20fa4ad724ba4e92c04c"}
{"action":"patients_listed","count":17,"environment":"development","level":"info","limit":20,"message":"AUDIT_LOG","page":1,"resource":"patients","service":"medblock-backend","timestamp":"2025-06-29 16:46:47","userId":"685f20fa4ad724ba4e92c04c","userRole":"doctor"}
{"environment":"development","ip":"::1","level":"info","message":"GET /api/v1/patients?sortBy=fullName&sortOrder=asc","service":"medblock-backend","timestamp":"2025-06-29 16:48:52","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"GET","resource":"/api/v1/patients?sortBy=fullName&sortOrder=asc","service":"medblock-backend","timestamp":"2025-06-29 16:48:52","userAgent":"curl/8.5.0","userId":"685ee7276d5c4c3dc71afc9c"}
{"action":"patients_listed","count":17,"environment":"development","level":"info","limit":20,"message":"AUDIT_LOG","page":1,"resource":"patients","service":"medblock-backend","timestamp":"2025-06-29 16:48:52","userId":"685ee7276d5c4c3dc71afc9c","userRole":"admin"}
{"environment":"development","level":"info","message":"SIGINT received, shutting down gracefully","service":"medblock-backend","timestamp":"2025-06-29 16:54:45"}
{"environment":"development","level":"info","message":"--- Logger test from server.js ---","service":"medblock-backend","timestamp":"2025-06-29 16:54:48"}
{"environment":"development","level":"info","message":"✅ MongoDB connected successfully","service":"medblock-backend","timestamp":"2025-06-29 16:54:49"}
{"environment":"development","level":"info","message":"Database connected successfully","service":"medblock-backend","timestamp":"2025-06-29 16:54:49"}
{"environment":"development","level":"info","message":"Server running on port 3000 in development mode","service":"medblock-backend","timestamp":"2025-06-29 16:54:49"}
{"environment":"development","level":"info","message":"Health check available at http://localhost:3000/health","service":"medblock-backend","timestamp":"2025-06-29 16:54:49"}
{"environment":"development","level":"info","message":"API documentation available at http://localhost:3000/api/v1","service":"medblock-backend","timestamp":"2025-06-29 16:54:49"}
{"environment":"development","ip":"::1","level":"info","message":"GET /api/v1/patients?sortBy=fullName&sortOrder=asc","service":"medblock-backend","timestamp":"2025-06-29 16:55:13","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"GET","resource":"/api/v1/patients?sortBy=fullName&sortOrder=asc","service":"medblock-backend","timestamp":"2025-06-29 16:55:13","userAgent":"curl/8.5.0","userId":"685ee7276d5c4c3dc71afc9c"}
{"action":"patients_listed","count":17,"environment":"development","level":"info","limit":20,"message":"AUDIT_LOG","page":1,"query":{"sortBy":"fullName","sortOrder":"asc"},"resource":"patients","service":"medblock-backend","sort":{"firstName":1,"lastName":1},"timestamp":"2025-06-29 16:55:13","userId":"685ee7276d5c4c3dc71afc9c","userRole":"admin"}
{"environment":"development","ip":"::1","level":"info","message":"GET /api/v1/patients?sortBy=createdAt&sortOrder=desc","service":"medblock-backend","timestamp":"2025-06-29 16:56:37","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"GET","resource":"/api/v1/patients?sortBy=createdAt&sortOrder=desc","service":"medblock-backend","timestamp":"2025-06-29 16:56:38","userAgent":"curl/8.5.0","userId":"685ee7276d5c4c3dc71afc9c"}
{"action":"patients_listed","count":17,"environment":"development","level":"info","limit":20,"message":"AUDIT_LOG","page":1,"query":{"sortBy":"createdAt","sortOrder":"desc"},"resource":"patients","service":"medblock-backend","sort":{"createdAt":-1},"timestamp":"2025-06-29 16:56:38","userId":"685ee7276d5c4c3dc71afc9c","userRole":"admin"}
{"environment":"development","ip":"::1","level":"info","message":"GET /api/v1/patients?sortBy=age&sortOrder=asc","service":"medblock-backend","timestamp":"2025-06-29 17:00:24","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"GET","resource":"/api/v1/patients?sortBy=age&sortOrder=asc","service":"medblock-backend","timestamp":"2025-06-29 17:00:24","userAgent":"curl/8.5.0","userId":"685ee7276d5c4c3dc71afc9c"}
{"action":"patients_listed","count":17,"environment":"development","level":"info","limit":20,"message":"AUDIT_LOG","page":1,"query":{"sortBy":"age","sortOrder":"asc"},"resource":"patients","service":"medblock-backend","sort":{"dateOfBirth":-1},"timestamp":"2025-06-29 17:00:24","userId":"685ee7276d5c4c3dc71afc9c","userRole":"admin"}
{"environment":"development","ip":"::1","level":"info","message":"GET /api/v1/patients?sortBy=patientId&sortOrder=asc","service":"medblock-backend","timestamp":"2025-06-29 17:01:24","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"GET","resource":"/api/v1/patients?sortBy=patientId&sortOrder=asc","service":"medblock-backend","timestamp":"2025-06-29 17:01:24","userAgent":"curl/8.5.0","userId":"685ee7276d5c4c3dc71afc9c"}
{"action":"patients_listed","count":17,"environment":"development","level":"info","limit":20,"message":"AUDIT_LOG","page":1,"query":{"sortBy":"patientId","sortOrder":"asc"},"resource":"patients","service":"medblock-backend","sort":{"patientId":1},"timestamp":"2025-06-29 17:01:24","userId":"685ee7276d5c4c3dc71afc9c","userRole":"admin"}
{"environment":"development","ip":"::1","level":"info","message":"GET /api/v1/patients?filterBy=nonExistentField&filterValue=someValue","service":"medblock-backend","timestamp":"2025-06-29 17:02:45","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"GET","resource":"/api/v1/patients?filterBy=nonExistentField&filterValue=someValue","service":"medblock-backend","timestamp":"2025-06-29 17:02:45","userAgent":"curl/8.5.0","userId":"685ee7276d5c4c3dc71afc9c"}
{"action":"patients_listed","count":17,"environment":"development","level":"info","limit":20,"message":"AUDIT_LOG","page":1,"query":{"filterBy":"nonExistentField","filterValue":"someValue"},"resource":"patients","service":"medblock-backend","sort":{"createdAt":-1},"timestamp":"2025-06-29 17:02:45","userId":"685ee7276d5c4c3dc71afc9c","userRole":"admin"}
{"environment":"development","ip":"::1","level":"info","message":"GET /api/v1/patients?sortBy=patientId&sortOrder=asc","service":"medblock-backend","timestamp":"2025-06-29 17:04:21","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"GET","resource":"/api/v1/patients?sortBy=patientId&sortOrder=asc","service":"medblock-backend","timestamp":"2025-06-29 17:04:21","userAgent":"curl/8.5.0","userId":"685ee7276d5c4c3dc71afc9c"}
{"action":"patients_listed","count":17,"environment":"development","level":"info","limit":20,"message":"AUDIT_LOG","page":1,"query":{"sortBy":"patientId","sortOrder":"asc"},"resource":"patients","service":"medblock-backend","sort":{"patientId":1},"timestamp":"2025-06-29 17:04:21","userId":"685ee7276d5c4c3dc71afc9c","userRole":"admin"}
{"environment":"development","ip":"::1","level":"info","message":"GET /api/v1/patients?filterBy=nonExistentField&filterValue=someValue","service":"medblock-backend","timestamp":"2025-06-29 17:06:23","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"GET","resource":"/api/v1/patients?filterBy=nonExistentField&filterValue=someValue","service":"medblock-backend","timestamp":"2025-06-29 17:06:23","userAgent":"curl/8.5.0","userId":"685ee7276d5c4c3dc71afc9c"}
{"action":"patients_listed","count":17,"environment":"development","level":"info","limit":20,"message":"AUDIT_LOG","page":1,"query":{"filterBy":"nonExistentField","filterValue":"someValue"},"resource":"patients","service":"medblock-backend","sort":{"createdAt":-1},"timestamp":"2025-06-29 17:06:23","userId":"685ee7276d5c4c3dc71afc9c","userRole":"admin"}
{"environment":"development","level":"info","message":"SIGINT received, shutting down gracefully","service":"medblock-backend","timestamp":"2025-06-29 17:22:41"}
{"environment":"development","level":"info","message":"--- Logger test from server.js ---","service":"medblock-backend","timestamp":"2025-06-29 17:22:45"}
{"environment":"development","level":"info","message":"✅ MongoDB connected successfully","service":"medblock-backend","timestamp":"2025-06-29 17:22:45"}
{"environment":"development","level":"info","message":"Database connected successfully","service":"medblock-backend","timestamp":"2025-06-29 17:22:45"}
{"environment":"development","level":"info","message":"Server running on port 3000 in development mode","service":"medblock-backend","timestamp":"2025-06-29 17:22:45"}
{"environment":"development","level":"info","message":"Health check available at http://localhost:3000/health","service":"medblock-backend","timestamp":"2025-06-29 17:22:45"}
{"environment":"development","level":"info","message":"API documentation available at http://localhost:3000/api/v1","service":"medblock-backend","timestamp":"2025-06-29 17:22:45"}
{"environment":"development","ip":"::1","level":"info","message":"GET /api/v1/patients?filterBy=nonExistentField&filterValue=someValue","service":"medblock-backend","timestamp":"2025-06-29 17:23:12","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"GET","resource":"/api/v1/patients?filterBy=nonExistentField&filterValue=someValue","service":"medblock-backend","timestamp":"2025-06-29 17:23:12","userAgent":"curl/8.5.0","userId":"685ee7276d5c4c3dc71afc9c"}
{"allowedFilters":["fullName","firstName","lastName","patientId","email","phoneNumber","gender","county","subCounty","isActive","checkInStatus","bloodType","assignedDepartment","nationalId","age","dateOfBirth"],"attemptedFilter":"nonExistentField","environment":"development","level":"warn","message":"Invalid filter field provided: nonExistentField","service":"medblock-backend","timestamp":"2025-06-29 17:23:12","userId":"685ee7276d5c4c3dc71afc9c"}
{"environment":"development","ip":"::1","level":"info","message":"GET /api/v1/patients?page=abc&limit=10","service":"medblock-backend","timestamp":"2025-06-29 17:24:12","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"GET","resource":"/api/v1/patients?page=abc&limit=10","service":"medblock-backend","timestamp":"2025-06-29 17:24:12","userAgent":"curl/8.5.0","userId":"685ee7276d5c4c3dc71afc9c"}
{"action":"patients_listed","count":10,"environment":"development","level":"info","limit":10,"message":"AUDIT_LOG","page":1,"query":{"limit":"10","page":"abc"},"resource":"patients","service":"medblock-backend","sort":{"createdAt":-1},"timestamp":"2025-06-29 17:24:12","userId":"685ee7276d5c4c3dc71afc9c","userRole":"admin"}
{"environment":"development","level":"info","message":"SIGINT received, shutting down gracefully","service":"medblock-backend","timestamp":"2025-06-29 17:44:28"}
{"environment":"development","level":"info","message":"--- Logger test from server.js ---","service":"medblock-backend","timestamp":"2025-06-29 17:44:34"}
{"environment":"development","level":"info","message":"✅ MongoDB connected successfully","service":"medblock-backend","timestamp":"2025-06-29 17:44:35"}
{"environment":"development","level":"info","message":"Database connected successfully","service":"medblock-backend","timestamp":"2025-06-29 17:44:35"}
{"environment":"development","level":"info","message":"Server running on port 3000 in development mode","service":"medblock-backend","timestamp":"2025-06-29 17:44:35"}
{"environment":"development","level":"info","message":"Health check available at http://localhost:3000/health","service":"medblock-backend","timestamp":"2025-06-29 17:44:35"}
{"environment":"development","level":"info","message":"API documentation available at http://localhost:3000/api/v1","service":"medblock-backend","timestamp":"2025-06-29 17:44:35"}
{"environment":"development","ip":"::1","level":"info","message":"GET /api/v1/patients?page=abc&limit=10","service":"medblock-backend","timestamp":"2025-06-29 17:44:39","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"GET","resource":"/api/v1/patients?page=abc&limit=10","service":"medblock-backend","timestamp":"2025-06-29 17:44:39","userAgent":"curl/8.5.0","userId":"685ee7276d5c4c3dc71afc9c"}
{"environment":"development","ip":"::1","level":"info","message":"GET /api/v1/patients?page=1&limit=101","service":"medblock-backend","timestamp":"2025-06-29 17:45:52","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"GET","resource":"/api/v1/patients?page=1&limit=101","service":"medblock-backend","timestamp":"2025-06-29 17:45:52","userAgent":"curl/8.5.0","userId":"685ee7276d5c4c3dc71afc9c"}
{"environment":"development","ip":"::1","level":"info","message":"GET /api/v1/health","service":"medblock-backend","timestamp":"2025-06-29 18:13:16","userAgent":"curl/8.5.0"}
{"environment":"development","ip":"::1","level":"info","message":"GET /api/v1/vital-signs","service":"medblock-backend","timestamp":"2025-06-29 18:13:19","userAgent":"curl/8.5.0"}
{"environment":"development","level":"info","message":"SIGINT received, shutting down gracefully","service":"medblock-backend","timestamp":"2025-06-29 18:21:01"}
{"environment":"development","level":"info","message":"--- Logger test from server.js ---","service":"medblock-backend","timestamp":"2025-06-29 18:21:11"}
{"environment":"development","level":"info","message":"✅ MongoDB connected successfully","service":"medblock-backend","timestamp":"2025-06-29 18:21:11"}
{"environment":"development","level":"info","message":"Database connected successfully","service":"medblock-backend","timestamp":"2025-06-29 18:21:11"}
{"environment":"development","level":"info","message":"Server running on port 3000 in development mode","service":"medblock-backend","timestamp":"2025-06-29 18:21:11"}
{"environment":"development","level":"info","message":"Health check available at http://localhost:3000/health","service":"medblock-backend","timestamp":"2025-06-29 18:21:11"}
{"environment":"development","level":"info","message":"API documentation available at http://localhost:3000/api/v1","service":"medblock-backend","timestamp":"2025-06-29 18:21:11"}
{"environment":"development","ip":"::1","level":"info","message":"POST /api/v1/vital-signs","service":"medblock-backend","timestamp":"2025-06-29 18:21:21","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"POST","resource":"/api/v1/vital-signs","service":"medblock-backend","timestamp":"2025-06-29 18:21:21","userAgent":"curl/8.5.0","userId":"685f20fa4ad724ba4e92c04c"}
{"environment":"development","ip":"::1","level":"info","message":"POST /api/v1/vital-signs","service":"medblock-backend","timestamp":"2025-06-29 18:29:01","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"POST","resource":"/api/v1/vital-signs","service":"medblock-backend","timestamp":"2025-06-29 18:29:01","userAgent":"curl/8.5.0","userId":"685f20fa4ad724ba4e92c04c"}
{"environment":"development","level":"info","message":"Vital sign created","patientId":"685f588a504c072b107ea1e8","recordedBy":"685f20fa4ad724ba4e92c04c","service":"medblock-backend","status":"draft","timestamp":"2025-06-29 18:29:02","userRole":"doctor","vitalSignId":"68615bbd8e85a9e762e8700a"}
{"environment":"development","level":"error","message":"Error creating vital sign: Cannot read properties of undefined (reading 'length')","service":"medblock-backend","stack":"TypeError: Cannot read properties of undefined (reading 'length')\n    at model.<anonymous> (/home/josva/Desktop/MedBlock/src/models/Patient.js:425:56)\n    at VirtualType.applyGetters (/home/josva/Desktop/MedBlock/node_modules/mongoose/lib/virtualType.js:152:16)\n    at applyVirtuals (/home/josva/Desktop/MedBlock/node_modules/mongoose/lib/document.js:4190:26)\n    at Document.$toObject (/home/josva/Desktop/MedBlock/node_modules/mongoose/lib/document.js:3920:5)\n    at Document.toJSON (/home/josva/Desktop/MedBlock/node_modules/mongoose/lib/document.js:4401:15)\n    at JSON.stringify (<anonymous>)\n    at stringify (/home/josva/Desktop/MedBlock/node_modules/express/lib/response.js:1160:12)\n    at ServerResponse.json (/home/josva/Desktop/MedBlock/node_modules/express/lib/response.js:271:14)\n    at /home/josva/Desktop/MedBlock/src/routes/vitalSigns.js:74:21\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-06-29 18:29:02"}
{"environment":"development","level":"info","message":"SIGINT received, shutting down gracefully","service":"medblock-backend","timestamp":"2025-06-29 18:36:49"}
{"environment":"development","level":"info","message":"--- Logger test from server.js ---","service":"medblock-backend","timestamp":"2025-06-29 18:36:53"}
{"environment":"development","level":"info","message":"✅ MongoDB connected successfully","service":"medblock-backend","timestamp":"2025-06-29 18:36:53"}
{"environment":"development","level":"info","message":"Database connected successfully","service":"medblock-backend","timestamp":"2025-06-29 18:36:53"}
{"environment":"development","level":"info","message":"Server running on port 3000 in development mode","service":"medblock-backend","timestamp":"2025-06-29 18:36:53"}
{"environment":"development","level":"info","message":"Health check available at http://localhost:3000/health","service":"medblock-backend","timestamp":"2025-06-29 18:36:53"}
{"environment":"development","level":"info","message":"API documentation available at http://localhost:3000/api/v1","service":"medblock-backend","timestamp":"2025-06-29 18:36:53"}
{"environment":"development","ip":"::1","level":"info","message":"POST /api/v1/vital-signs","service":"medblock-backend","timestamp":"2025-06-29 18:37:38","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"POST","resource":"/api/v1/vital-signs","service":"medblock-backend","timestamp":"2025-06-29 18:37:38","userAgent":"curl/8.5.0","userId":"685f20fa4ad724ba4e92c04c"}
{"environment":"development","level":"info","message":"Vital sign created","patientId":"685f588a504c072b107ea1e8","recordedBy":"685f20fa4ad724ba4e92c04c","service":"medblock-backend","status":"draft","timestamp":"2025-06-29 18:37:38","userRole":"doctor","vitalSignId":"68615dc234256f2e84296a73"}
{"environment":"development","level":"error","message":"Error creating vital sign: Cannot read properties of undefined (reading 'length')","service":"medblock-backend","stack":"TypeError: Cannot read properties of undefined (reading 'length')\n    at model.<anonymous> (/home/josva/Desktop/MedBlock/src/models/Patient.js:425:56)\n    at VirtualType.applyGetters (/home/josva/Desktop/MedBlock/node_modules/mongoose/lib/virtualType.js:152:16)\n    at applyVirtuals (/home/josva/Desktop/MedBlock/node_modules/mongoose/lib/document.js:4190:26)\n    at Document.$toObject (/home/josva/Desktop/MedBlock/node_modules/mongoose/lib/document.js:3920:5)\n    at Document.toJSON (/home/josva/Desktop/MedBlock/node_modules/mongoose/lib/document.js:4401:15)\n    at JSON.stringify (<anonymous>)\n    at stringify (/home/josva/Desktop/MedBlock/node_modules/express/lib/response.js:1160:12)\n    at ServerResponse.json (/home/josva/Desktop/MedBlock/node_modules/express/lib/response.js:271:14)\n    at /home/josva/Desktop/MedBlock/src/routes/vitalSigns.js:74:21\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-06-29 18:37:38"}
{"environment":"development","level":"info","message":"SIGINT received, shutting down gracefully","service":"medblock-backend","timestamp":"2025-06-29 18:43:28"}
{"environment":"development","level":"info","message":"--- Logger test from server.js ---","service":"medblock-backend","timestamp":"2025-06-29 18:43:32"}
{"environment":"development","level":"info","message":"✅ MongoDB connected successfully","service":"medblock-backend","timestamp":"2025-06-29 18:43:32"}
{"environment":"development","level":"info","message":"Database connected successfully","service":"medblock-backend","timestamp":"2025-06-29 18:43:32"}
{"environment":"development","level":"info","message":"Server running on port 3000 in development mode","service":"medblock-backend","timestamp":"2025-06-29 18:43:32"}
{"environment":"development","level":"info","message":"Health check available at http://localhost:3000/health","service":"medblock-backend","timestamp":"2025-06-29 18:43:32"}
{"environment":"development","level":"info","message":"API documentation available at http://localhost:3000/api/v1","service":"medblock-backend","timestamp":"2025-06-29 18:43:32"}
{"environment":"development","ip":"::1","level":"info","message":"POST /api/v1/vital-signs","service":"medblock-backend","timestamp":"2025-06-29 18:43:45","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"POST","resource":"/api/v1/vital-signs","service":"medblock-backend","timestamp":"2025-06-29 18:43:45","userAgent":"curl/8.5.0","userId":"685f20fa4ad724ba4e92c04c"}
{"environment":"development","level":"info","message":"Vital sign created","patientId":"685f588a504c072b107ea1e8","recordedBy":"685f20fa4ad724ba4e92c04c","service":"medblock-backend","status":"draft","timestamp":"2025-06-29 18:43:45","userRole":"doctor","vitalSignId":"68615f31ad30f1d068674390"}
{"environment":"development","level":"error","message":"Error creating vital sign: Cannot read properties of undefined (reading 'length')","service":"medblock-backend","stack":"TypeError: Cannot read properties of undefined (reading 'length')\n    at model.<anonymous> (/home/josva/Desktop/MedBlock/src/models/Patient.js:425:56)\n    at VirtualType.applyGetters (/home/josva/Desktop/MedBlock/node_modules/mongoose/lib/virtualType.js:152:16)\n    at applyVirtuals (/home/josva/Desktop/MedBlock/node_modules/mongoose/lib/document.js:4190:26)\n    at Document.$toObject (/home/josva/Desktop/MedBlock/node_modules/mongoose/lib/document.js:3920:5)\n    at Document.toJSON (/home/josva/Desktop/MedBlock/node_modules/mongoose/lib/document.js:4401:15)\n    at JSON.stringify (<anonymous>)\n    at stringify (/home/josva/Desktop/MedBlock/node_modules/express/lib/response.js:1160:12)\n    at ServerResponse.json (/home/josva/Desktop/MedBlock/node_modules/express/lib/response.js:271:14)\n    at /home/josva/Desktop/MedBlock/src/routes/vitalSigns.js:74:21\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-06-29 18:43:45"}
{"environment":"development","level":"info","message":"SIGINT received, shutting down gracefully","service":"medblock-backend","timestamp":"2025-06-29 18:46:13"}
{"environment":"development","level":"info","message":"--- Logger test from server.js ---","service":"medblock-backend","timestamp":"2025-06-29 18:47:39"}
{"environment":"development","level":"info","message":"✅ MongoDB connected successfully","service":"medblock-backend","timestamp":"2025-06-29 18:47:39"}
{"environment":"development","level":"info","message":"Database connected successfully","service":"medblock-backend","timestamp":"2025-06-29 18:47:39"}
{"environment":"development","level":"info","message":"Server running on port 3000 in development mode","service":"medblock-backend","timestamp":"2025-06-29 18:47:39"}
{"environment":"development","level":"info","message":"Health check available at http://localhost:3000/health","service":"medblock-backend","timestamp":"2025-06-29 18:47:39"}
{"environment":"development","level":"info","message":"API documentation available at http://localhost:3000/api/v1","service":"medblock-backend","timestamp":"2025-06-29 18:47:39"}
{"environment":"development","ip":"::1","level":"info","message":"POST /api/v1/vital-signs","service":"medblock-backend","timestamp":"2025-06-29 18:47:53","userAgent":"curl/8.5.0"}
{"action":"user_authenticated","environment":"development","ip":"::1","level":"info","message":"AUDIT_LOG","method":"POST","resource":"/api/v1/vital-signs","service":"medblock-backend","timestamp":"2025-06-29 18:47:53","userAgent":"curl/8.5.0","userId":"685f20fa4ad724ba4e92c04c"}
{"environment":"development","level":"info","message":"Vital sign created","patientId":"685f588a504c072b107ea1e8","recordedBy":"685f20fa4ad724ba4e92c04c","service":"medblock-backend","status":"draft","timestamp":"2025-06-29 18:47:53","userRole":"doctor","vitalSignId":"68616029884219255804e786"}
{"environment":"development","level":"warn","message":"BMI virtual accessed with unpopulated or invalid vitalSigns array. Returning null.","service":"medblock-backend","timestamp":"2025-06-29 18:47:53"}
{"environment":"development","level":"error","message":"Error creating vital sign: Cannot read properties of undefined (reading 'length')","service":"medblock-backend","stack":"TypeError: Cannot read properties of undefined (reading 'length')\n    at model.<anonymous> (/home/josva/Desktop/MedBlock/src/models/Patient.js:521:31)\n    at VirtualType.applyGetters (/home/josva/Desktop/MedBlock/node_modules/mongoose/lib/virtualType.js:152:16)\n    at applyVirtuals (/home/josva/Desktop/MedBlock/node_modules/mongoose/lib/document.js:4190:26)\n    at Document.$toObject (/home/josva/Desktop/MedBlock/node_modules/mongoose/lib/document.js:3920:5)\n    at Document.toJSON (/home/josva/Desktop/MedBlock/node_modules/mongoose/lib/document.js:4401:15)\n    at JSON.stringify (<anonymous>)\n    at stringify (/home/josva/Desktop/MedBlock/node_modules/express/lib/response.js:1160:12)\n    at ServerResponse.json (/home/josva/Desktop/MedBlock/node_modules/express/lib/response.js:271:14)\n    at /home/josva/Desktop/MedBlock/src/routes/vitalSigns.js:74:21\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-06-29 18:47:53"}
{"environment":"development","level":"info","message":"SIGINT received, shutting down gracefully","service":"medblock-backend","timestamp":"2025-06-29 18:55:00"}
